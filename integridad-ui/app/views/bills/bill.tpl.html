<div style="width: 100%;height: 100%;top: 0px;left: 0px;position: fixed;display: block; z-index: 99; background: rgba(255, 255, 255, 0.3)" ng-show="vm.loading">
    <div style="position: absolute;top: 15%;z-index: 100; width: 100%; text-align: center;">
        <div class="sk-circle">
            <div class="sk-circle1 sk-child"></div>
            <div class="sk-circle2 sk-child"></div>
            <div class="sk-circle3 sk-child"></div>
            <div class="sk-circle4 sk-child"></div>
            <div class="sk-circle5 sk-child"></div>
            <div class="sk-circle6 sk-child"></div>
            <div class="sk-circle7 sk-child"></div>
            <div class="sk-circle8 sk-child"></div>
            <div class="sk-circle9 sk-child"></div>
            <div class="sk-circle10 sk-child"></div>
            <div class="sk-circle11 sk-child"></div>
            <div class="sk-circle12 sk-child"></div>
        </div>
    </div>
</div>

<div class="form-group col-md-12">
    <div class="header">
        <h4><b>Factura Online</b></h4>
    </div>

    <div class="row" ng-show="vm.error !== undefined">
        <div class="form-group col-md-12">
            <div class="alert alert-danger">{{vm.error}}</div>
        </div>
    </div>
    <div class="row" ng-show="vm.success !== undefined">
        <div class="form-group col-md-12">
            <div class="alert alert-success">{{vm.success}}</div>
        </div>
    </div>

    <div class="table-responsive" ng-show="vm.clientSelected === undefined && vm.billList === undefined && vm.detailList === undefined && vm.advertencia === false">
        <div class="row">
            <div class="form-group col-md-10">
                <form>
                    <input id="inputCl0" ng-model="vm.searchForced" class="form-control" placeholder="Buscar" autocomplete="off">
                </form>
            </div>
            <div class="form-group col-md-2">
                <button type="button" title="Agregar Nuevo Cliente" class="btn btn-primary btn-sm" ng-click="vm.clientCreate()">
                        <span class = "glyphicon glyphicon-user" aria-hidden = "true"></span>
                </button>
                <button type="button" title="Volver a Facturación" class="btn btn-primary btn-sm"
                        ng-click="vm.volver()">
                        <span class="glyphicon glyphicon-log-out" aria-hidden="true"></span>
                </button>
            </div>
        </div>
        <table class="table table-striped">
            <thead>
                <tr>
                    <th>C&oacute;digo</th>
                    <th>Nombre</th>
                    <th>No. Identidad</th>
                    <th>
                        <button type="button" title="Busqueda por Detalles" class="btn btn-primary btn-sm" ng-click="vm.getDetailsOfBills()">
                                Busqueda por Detalles
                        </button>
                    </th>
                </tr>
            </thead>
            <tbody>
                <tr ng-show="vm.clientList == 0">
                    <td colspan="4">
                        No hay clientes ingresados
                    </td>
                </tr>
                <tr ng-repeat="clientPreSelect in vm.clientList | orderBy:'name' | filter:vm.searchForced">
                    <td>{{clientPreSelect.codApp}}</td>
                    <td>{{clientPreSelect.name}}</td>
                    <td>{{clientPreSelect.typeId}} - {{clientPreSelect.identification}}</td>
                    <td>
                        <button type="button" title="Seleccionar Cliente" class="btn btn-primary btn-sm" ng-click="vm.clientSelectChanged(clientPreSelect)">
                                <span class = "glyphicon glyphicon-ok" aria-hidden = "true"></span>
                        </button>
                        <button type="button" title="Consultar Facturas" class="btn btn-primary btn-sm" ng-click="vm.clientConsult(clientPreSelect)">
                                <span class = "glyphicon glyphicon-search" aria-hidden = "true"></span>
                        </button>
                    </td>
                </tr>
            </tbody>
        </table>
        <div class="row">
            <div class="form-group col-md-12">
                <button type="button" title="Volver a Facturación" class="btn btn-primary btn-sm"
                        ng-click="vm.volver()">
                        <span class="glyphicon glyphicon-log-out" aria-hidden="true"></span>
                </button>
            </div>
        </div>
    </div>

    <div class="table-responsive" ng-show="vm.detailList !== undefined">
        <div class="panel panel-primary">
            <div class="panel-heading">
                <b>Búsqueda de Detalles por Facturas</b>
            </div>
            <div class="panel-body">
                <div class="row">
                    <div class="form-group col-md-12">
                        <input ng-model="searchText" class="form-control" placeholder="Buscar">
                    </div>
                </div>
                <table class="table table-striped">
                    <thead>
                        <tr>
                            <th>N&uacute;mero</th>
                            <th>Fecha</th>
                            <th>Descripci&oacute;n</th>
                            <th></th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr ng-repeat="detail in vm.detailList | orderBy:'dateCreated':true | filter:searchText">
                            <td>{{detail.bill.stringSeq}}</td>
                            <td>{{detail.bill.dateCreated | date : "dd/MM/yyyy"}}</td>
                            <td>{{detail.adicional}}</td>
                            <td>
                                <button type="button" title="Ver Factura" class="btn btn-primary btn-sm" ng-click="vm.billSelect(detail.bill)">
                                        <span class = "glyphicon glyphicon-eye-open" aria-hidden = "true"></span>
                                </button>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <div class="panel-footer">
                <button type="button" title="Salir"  class="btn btn-primary btn-sm" ng-click="vm.detailList = undefined; searchText = undefined">
                        <span class = "glyphicon glyphicon-log-out" aria-hidden = "true"></span>
                </button>
            </div>
        </div>
    </div>

    <div class="table-responsive" ng-show="vm.billList !== undefined">
        <input ng-model="searchText" class="form-control" placeholder="Buscar">
        <table class="table table-striped">
            <thead>
                <tr>
                    <th>N&uacute;mero</th>
                    <th>Fecha</th>
                    <th>Cliente</th>
                    <th>Total $</th>
                    <th></th>
                </tr>
            </thead>
            <tbody>
                <tr ng-show="vm.billList == 0">
                    <td colspan="4">
                        No hay facturas ingresados
                    </td>
                </tr>
                <tr ng-repeat="bill in vm.billList | orderBy:'dateCreated':true | filter:searchText">
                    <td>{{bill.stringSeq}}</td>
                    <td>{{bill.dateCreated | date : "dd/MM/yyyy"}}</td>
                    <td>{{bill.client.name}}</td>
                    <td>{{bill.total}}</td>
                    <td>
                        <button type="button" title="Ver Factura" class="btn btn-primary btn-sm" ng-click="vm.billSelect(bill)">
                                <span class = "glyphicon glyphicon-eye-open" aria-hidden = "true"></span>
                        </button>
                        <button type="button" title="Anular Factura" class="btn btn-warning btn-sm" ng-click="vm.cancelaBill = bill"
                                data-toggle="modal" data-target="#modalAnular">
                                <span class = "glyphicon glyphicon-warning-sign" aria-hidden = "true"></span>
                        </button>
                    </td>
                </tr>
            </tbody>
        </table>
        <div class="row">
            <div class="form-group col-md-12">
                <button type="button" title="Salir"  class="btn btn-primary btn-sm" ng-click="vm.billList = undefined">
                        <span class = "glyphicon glyphicon-log-out" aria-hidden = "true"></span>
                </button>
            </div>
        </div>
    </div>

    <!--FACTURA HOJA COMPLETA-->
    <div class="panel-group table-responsive" ng-show="vm.clientSelected !== undefined" id="printArea" print-section ng-keypress="vm.openPayMode($event)">
        <div class="panel panel-primary">
            <div class="panel-heading">
                <b>Datos del Cliente</b>
            </div>
            <div class="panel-body">
                <div class="row">
                    <div class="form-group col-md-12">
                        <table width="100%">
                            <tr>
                                <td width="20%" align="center"><img src="images/{{vm.companyData.userClient.logo}}" width="70%"><br></td>
                                <td width="80%">
                                    <b>{{vm.companyData.userClient.name}}</b><br/></br>
                                    <b>Matriz: {{vm.companyData.userClient.address1}}</b><br/>
                                    <b>Establecimiento: {{vm.companyData.address1}}</b><br/><br/>
                                    <b>RUC: {{vm.companyData.userClient.ruc}}</b><br/>
                                </td>
                            </tr>
                        </table>
                    </div>
                </div>
                <div class="row table-responsive" print-remove>
                    <div class="form-group col-md-12">
                        <table width="100%">
                            <tr>
                                <td>
                                    <button type="button" title="Buscar Cotizaci&oacute;n" class="btn btn-primary btn-sm" ng-click="vm.getQuotations()"
                                            data-toggle="modal" data-target="#modalCotizacion">
                                            <span class = "glyphicon glyphicon-search" aria-hidden = "true"></span>
                                    </button>
                                </td>
                                <td>
                                    <b>N&uacute;mero de Cotizaci&oacute;n: </b>{{vm.bill.stringQuotationSeq}}
                                </td>
                            </tr>
                        </table>
                    </div>
                </div>
                <div class="row">
                    <div class="form-group col-md-12">
                        <table width="100%">
                            <tr>
                                <td width="30%">
                                    <label>Fecha: </label>
                                    <div class="input-group date" id="pickerBillDate">
                                        <input type="text" class="form-control input-group-addon" ng-disabled="!vm.newBill"/>
                                        <span class="input-group-addon"><span class="glyphicon glyphicon-calendar"></span>
                                    </div>
                                    <script>
                                        var defaultDate = new Date();
                                        $('#pickerBillDate').datetimepicker({format: "DD/MM/YY HH:mm",});
                                    </script>
                                </td>
                                <td width="70%">
                                    <div style="padding-left: 10px">
                                        <label>Clave de Acceso: </label><br/>
                                        {{vm.bill.claveDeAcceso}}
                                    </div>
                                </td>
                            </tr>
                        </table>
                    </div>
                </div>
                <div class="row">
                    <div class="form-group col-md-12">
                        <table width="100%">
                            <tr>
                                <td>
                                    <b>Nombre: </b>{{vm.clientSelected.name}} &nbsp;
                                    <button type="button" title="Cambiar" class="btn btn-primary btn-sm" ng-if="vm.newBill" ng-click="vm.clientChange()">
                                            Cambiar
                                    </button>
                                    <br/>
                                </td>
                                <td>
                                    <b ng-if="vm.clientSelected.typeId === 'CED'">Cédula: </b>
                                    <b ng-if="vm.clientSelected.typeId === 'RUC'">Ruc: </b>
                                    {{vm.clientSelected.identification}}
                                </td>
                                <td>
                                    <b>Teléfono: </b>{{vm.clientSelected.phone}}
                                </td>
                            </tr>
                        </table>
                    </div>
                </div>
                <div class="row">
                    <div class="form-group col-md-12">
                        <table width="100%">
                            <tr>
                                <td><b>Dirección: </b>{{vm.clientSelected.address}}</td>
                                <td><b>E-mail: </b>{{vm.clientSelected.email}}</td>
                            </tr>
                            <tr>
                                <td>
                                    <b>Número de Factura: </b>{{vm.seqNumber}}
                                    &nbsp;&nbsp;&nbsp;
                                    <a data-toggle="modal" data-target="#modalEditBillNumber" ng-click="vm.verifyUser()" ng-if="vm.newBill" print-remove>
                                        <b>Editar</b>
                                    </a>
                                </td>
                                <td print-remove>
                                    <b>Precio Convenido: </b>
                                    <select ng-options="price as price.name for price in vm.prices"  ng-if="vm.newBill"
                                            ng-model="vm.priceType" class="form-control" ng-change="vm.reCalculateTotal()" ng-disabled="vm.bill.details.length > 0">
                                    </select>
                                    <span ng-if="!vm.newBill">{{vm.bill.priceType}}</span>
                                </td>
                            </tr>
                            <tr>
                                <td colspan="2">
                                    <b>{{vm.getIsAgentRetention()}}</b>
                                </td>
                            </tr>
                        </table>
                    </div>
                </div>
                <div class="row" ng-if="vm.companyData.userClient.espTemp == 'A-1'" print-if="vm.companyData.userClient.espTemp == 'A-1'">
                    <div class="form-group col-md-12">
                        <table width="100%" style="border-collapse: separate; border-spacing: 6px;">
                            <tr>
                                <td width="50%">
                                    <b>Orden de Compra: </b>
                                    <input type="text" ng-disabled="!vm.newBill" ng-model="vm.bill.ordenDecompra" class="form-control">
                                </td>
                                <td width="50%">
                                    <b>Srevices Receipts Register: </b>
                                    <input type="text" ng-disabled="!vm.newBill" ng-model="vm.bill.srr" class="form-control">
                                </td>
                            </tr>
                            <tr>
                                <td width="50%">
                                    <b>Lugar: </b>
                                    <input type="text" ng-disabled="!vm.newBill" ng-model="vm.bill.lugar" class="form-control">
                                </td>
                                <td width="50%">
                                    <b>OTI/OTIR: </b>
                                    <input type="text" ng-disabled="!vm.newBill" ng-model="vm.bill.otir" class="form-control">
                                </td>
                            </tr>
                        </table>
                    </div>
                </div>
                <div class="row">
                    <div class="form-group col-md-9">
                        <b>Observaciones:</b>
                        <input type="text" ng-model="vm.bill.observation" class="form-control">
                    </div>
                    <div class="form-group col-md-3" ng-if="vm.newBill">
                        <b>Descuento %: </b>
                        <input type="text" ng-blur="vm.reCalculateTotal()" onkeypress="return ((event.which >= 48 && event.which <= 57) || (event.keyCode == 9 || event.keyCode == 8))"
                               ng-model="vm.bill.discountPercentage" class="form-control" maxlength="9" ng-change="vm.getFechaCobro()" ng-disabled="!vm.newBill">
                    </div>
                </div>
            </div>
        </div>
        <div class="panel panel-primary">
            <div class="panel-heading">
                <b>Detalle</b>
            </div>
            <div class="panel-body table-responsive">
                <div class="row" ng-if="vm.newBill" print-remove>
                    <div class="form-group col-md-3">
                        <b>Código de Barras:</b>
                        <input type="text" id="input4" ng-model="vm.billBarCode" class="form-control" ng-change="vm.filterBarCode()" ng-keypress="vm.fill($event)" maxlength="13"
                               onkeypress="return ((event.which >= 48 && event.which <= 57) || (event.keyCode == 9 || event.keyCode == 8))">
                    </div>
                    <div class="form-group col-md-9">
                        <b>Producto: </b>
                        <input type="text" ng-model="vm.toAdd.name" ng-disabled="true" class="form-control">
                    </div>
                </div>
                <form ng-submit="vm.addProdBarCode()" ng-if="vm.newBill" print-remove>
                    <div class="row">
                        <div class="form-group col-md-2">
                            <b>Existencias: </b>
                            <input type="text" ng-model="vm.toAddExistency" ng-disabled="true" class="form-control">
                        </div>
                        <div class="form-group col-md-3">
                            <b>Valor Unitario: </b>
                            <input type="text" ng-model="vm.toAddPrice" ng-disabled="true" class="form-control">
                        </div>
                        <div class="form-group col-md-2">
                            <b>Descuento Unitario: </b>
                            <input type="text" ng-model="vm.toAddDiscount" ng-attr-tabindex="2" class="form-control">
                        </div>
                        <div class="form-group col-md-2">
                            <b>Cantidad: </b>
                            <input type="text" ng-model="vm.quantity" ng-attr-tabindex="1" class="form-control" id="productQuantity"
                            onkeypress="return ((event.which >= 48 && event.which <= 57) || (event.which === 13) || (event.keyCode == 9 || event.keyCode == 8))">
                        </div>
                        <div class="form-group col-md-3" ng-disabled="vm.toAdd === undefined">
                            <br/>
                            <input id="submitAdd" ng-attr-tabindex="2" type="submit" value="Aceptar">
                            <input id="cancel" ng-attr-tabindex="3" type="button" value="Cancelar" ng-click="vm.cancelBarCode()">
                        </div>
                    </div>
                </form>
                <div class="row">
                    <div class="form-group col-md-12">
                        <table class="table table-striped">
                            <thead>
                                <tr>
                                    <th>Item</th>
                                    <th>C&oacute;digo</th>
                                    <th>Nombre Producto</th>
                                    <th>Descripci&oacute;n</th>
                                    <th>Cant.</th>
                                    <th>U. Med.</th>
                                    <th>V. Unit.</th>
                                    <th>% Desc.</th>
                                    <th>V. Total.</th>
                                    <th ng-if="vm.newBill">
                                        <button type="button" title="Agregar Productos" class="btn btn-primary btn-sm" ng-click="vm.addProduct()"
                                                ng-show="vm.bill.claveDeAcceso === undefined" data-toggle="modal"
                                                data-target="#modalAddProduct" print-remove>
                                                <span class="glyphicon glyphicon-plus" aria-hidden="true"></span>
                                        </button>
                                    </th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr ng-show="vm.clientList == 0">
                                    <td colspan="4">
                                        No hay detalles ingresados
                                    </td>
                                </tr>
                                <tr ng-repeat="detail in vm.bill.details">
                                    <td>{{$index + 1}}</td>
                                    <td>{{detail.product.codeIntegridad}}</td>
                                    <td>{{detail.product.name}}</td>
                                    <td>{{detail.adicional}}</td>
                                    <td>{{detail.quantity}}</td>
                                    <td>{{detail.product.unitOfMeasurementFull}}</td>
                                    <td>{{detail.costEach}}</td>
                                    <td>{{detail.discount}} %</td>
                                    <td>{{(detail.total).toFixed(4)}}</td>
                                    <td ng-if="vm.newBill">
                                        <button type="button" title="Editar Producto" class="btn btn-primary btn-sm"
                                                ng-click="vm.editDetail(detail, $index)"
                                                ng-show="vm.bill.claveDeAcceso === undefined"
                                                data-toggle="modal" data-target="#modalAddProduct" print-remove>
                                                <span class="glyphicon glyphicon-pencil" aria-hidden="true"></span>
                                        </button>
                                        <button type="button" title="Eliminar Producto" class="btn btn-primary btn-sm"
                                                ng-show="vm.bill.claveDeAcceso === undefined"
                                                ng-click="vm.removeDetail($index)" print-remove>
                                                <span class="glyphicon glyphicon-trash" aria-hidden="true"></span>
                                        </button>
                                    </td>
                                </tr>
                                <tr>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td><b>SubTotal: </b></td>
                                    <td>{{(vm.bill.subTotal).toFixed(2)}}</td>
                                    <td></td>
                                </tr>
                                <tr>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td><b>Descuento: </b></td>
                                    <td>{{(vm.bill.discount).toFixed(2)}}</td>
                                    <td></td>
                                </tr>
                                <tr>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td><b>Base 0%: </b></td>
                                    <td>{{(vm.bill.baseNoTaxes).toFixed(2)}}</td>
                                    <td></td>
                                </tr>
                                <tr>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td><b>Base 12%: </b></td>
                                    <td>{{(vm.bill.baseTaxes).toFixed(2)}}</td>
                                    <td></td>
                                </tr>
                                <tr>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td><b>Iva: </b></td>
                                    <td>{{(vm.bill.iva).toFixed(2)}}</td>
                                    <td></td>
                                </tr>
                                <tr>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td><b>Total: </b></td>
                                    <td>{{(vm.bill.total).toFixed(2)}}</td>
                                    <td></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
            <div class="panel-footer" print-remove>
                <button type="button" title = "Forma de Pago" class="btn btn-primary btn-sm" ng-if="vm.newBuy"
                        ng-click="vm.openModalPayMode()"
                        ng-disabled="vm.bill.total <= 0 || vm.billed"
                        ng-show="vm.bill.claveDeAcceso === undefined">
                        <span class = "glyphicon glyphicon-usd" aria-hidden = "true"></span>
                </button>
                <button type="button" title="Volver a Inicio" class="btn btn-danger btn-sm" ng-if="vm.newBuy"
                        ng-click="vm.exit()">
                        <span class="glyphicon glyphicon-log-out" aria-hidden="true"></span>
                </button>
            </div>
        </div>
        <div class="panel panel-primary" print-only print-avoid-break>
            <div class="panel-heading">
                <b>Forma de Pago</b>
            </div>
            <div class="panel-body">
                <div class="row">
                    <div class="col-md-12">
                        <table class="table table-striped">
                            <thead>
                                <tr>
                                    <th>Medio</th>
                                    <th>Valor</th>
                                    <th></th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr ng-repeat="pago in vm.pagos">
                                    <td>
                                        {{pago.medio}}<br/>
                                        <span ng-if="pago.medio === 'cheque'">
                                            {{pago.chequeBank}} - {{pago.chequeAccount}} - {{pago.chequeNumber}}<br/>
                                        </span>
                                        <span ng-if="pago.medio === 'credito'">
                                            Número de Pagos: {{pago.creditoNumeroPagos}} - Días: {{pago.creditoIntervalos}}<br/>
                                        </span>
                                        <span ng-if="pago.medio === 'cheque_posfechado'">
                                            {{pago.chequeBank}} - {{pago.chequeAccount}} - {{pago.chequeNumber}} - {{pago.fechaCobro | date : "dd/MM/yyyy"}}<br/>
                                        </span>
                                        <span ng-if="pago.medio === 'tarjeta_credito' || pago.medio === 'tarjeta_debito'">
                                            {{pago.cardBrand}}<br/>
                                        </span>
                                        {{pago.payForm}}
                                    </td>
                                    <td>{{pago.total}}</td>
                                    <td></td>
                                </tr>
                                <tr>
                                    <td><b>Total:</b></td>
                                    <td>{{vm.getTotalPago()}}</td>
                                    <td>Vuelto: {{vm.getCambio}}</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
                <div print-only print-if="vm.companyData.userClient.espTemp == 'A-1'" print-avoid-break>
                    <div class="col-md-12">
                        <table width="100%">
                            <tr>
                                <td align="center" colspan="2">
                                    Debo y pagaré incondicionalmente a la orden de Petroleum & Power Engineers S.A. el valor total de esta factura sin protesto.
                                </td>
                            </tr>
                            <tr>
                                <td width="50%" align="center">
                                    <br/><br/><br/>
                                    ________________<br/>
                                    FIRMA AUTORIZADA
                                </td>
                                <td width="50%" align="center">
                                    <br/><br/><br/>
                                    ________________<br/>
                                    RECIBI CONFORME
                                </td>
                            </tr>
                        </table>
                    </div>
                </div>
            </div>
        </div>
        <div class="panel panel-primary" ng-if="!vm.newBill" print-remove>
            <div class="panel-heading">
                <b>Forma de Pago</b>
            </div>
            <div class="panel-body">
                <div class="row">
                    <div class="col-md-12">
                        <table class="table table-striped">
                            <thead>
                                <tr>
                                    <th>Medio</th>
                                    <th>Valor</th>
                                    <th></th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr ng-repeat="pago in vm.pagos">
                                    <td>
                                        {{pago.medio}}<br/>
                                        <span ng-if="pago.medio === 'cheque'">
                                            {{pago.chequeBank}} - {{pago.chequeAccount}} - {{pago.chequeNumber}}<br/>
                                        </span>
                                        <span ng-if="pago.medio === 'credito'">
                                            Número de Pagos: {{pago.creditoNumeroPagos}} - Días: {{pago.creditoIntervalos}}<br/>
                                        </span>
                                        <span ng-if="pago.medio === 'cheque_posfechado'">
                                            {{pago.chequeBank}} - {{pago.chequeAccount}} - {{pago.chequeNumber}} - {{pago.fechaCobro | date : "dd/MM/yyyy"}}<br/>
                                        </span>
                                        <span ng-if="pago.medio === 'tarjeta_credito' || pago.medio === 'tarjeta_debito'">
                                            {{pago.cardBrand}}<br/>
                                        </span>
                                        {{pago.payForm}}
                                    </td>
                                    <td>{{pago.total}}</td>
                                    <td></td>
                                </tr>
                                <tr>
                                    <td><b>Total: </b></td>
                                    <td>{{vm.getTotalPagoB()}}</td>
                                    <td>
                                        Vuelto: {{vm.getCambioB}}
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
            <div class="panel-footer" print-remove>
                <button type="button" title="Nueva Factura" class="btn btn-primary btn-sm"
                        ng-if="!vm.newBill"
                        ng-click="vm.nuevaBill()">
                        <span class="glyphicon glyphicon-file" aria-hidden="true"></span>
                </button>
                <button print-btn type="button" title = "Imprimir Factura" class="btn btn-primary btn-sm"
                        id="printBtnBill" ng-if="!vm.newBill">
                        <span class = "glyphicon glyphicon-print" aria-hidden = "true"></span>
                </button>
                <button type="button" title = "Imprimir Ticket-Recibo" class="btn btn-success btn-sm"
                        ng-if="!vm.newBill && vm.user.cashier.specialPrint" id="printBtnBillTicket"
                        ng-click="vm.printToCart('printMatrixBillId')">
                        <span class = "glyphicon glyphicon-print" aria-hidden = "true"></span>
                </button>
                <button type="button" title = "Imprimir Ticket-Termal" class="btn btn-warning btn-sm"
                        ng-if="!vm.newBill && vm.user.cashier.specialPrint" id="printBtnBillTicketLR"
                        ng-click="vm.printToCartTwo('printLRDosMillBillId')">
                        <span class = "glyphicon glyphicon-print" aria-hidden = "true"></span>
                </button>
                <button type="button" title="Volver a Inicio" class="btn btn-danger btn-sm"
                        ng-if="!vm.newBill"
                        ng-click="vm.exit()">
                        <span class="glyphicon glyphicon-log-out" aria-hidden="true"></span>
                </button>
            </div>
        </div>
        <div class="panel panel-primary" ng-if="!vm.newConsumptionOn">
            <div class="panel-heading">
                <b>Forma de Pago</b>
            </div>
            <div class="panel-body">
                <div class="row">
                    <div class="col-md-12">
                        <table class="table table-striped">
                            <thead>
                                <tr>
                                    <th>Medio</th>
                                    <th>Valor</th>
                                    <th></th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr ng-repeat="pago in vm.pagos">
                                    <td>
                                        {{pago.medio}}<br/>
                                            <span ng-if="pago.medio === 'cheque'">
                                                {{pago.chequeBank}} - {{pago.chequeAccount}} - {{pago.chequeNumber}}<br/>
                                            </span>
                                            <span ng-if="pago.medio === 'tarjeta_credito' || pago.medio === 'tarjeta_debito'">
                                                {{pago.cardBrand}}<br/>
                                            </span>
                                        {{pago.payForm}}
                                    </td>
                                    <td>{{pago.total}}</td>
                                    <td></td>
                                </tr>
                                <tr>
                                    <td><b>Total:</b></td>
                                    <td>{{vm.getTotalPagoB()}}</td>
                                    <td>Vuelto: {{vm.getCambioB}}</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
            <div class="panel-footer">
                <button type="button" title="Nueva Factura" class="btn btn-primary btn-sm"
                        ng-click="vm.nuevaBill()">
                        <span class="glyphicon glyphicon-file" aria-hidden="true"></span>
                </button>
                <button type="button" title = "Imprimir Ticket Consumo" class="btn btn-primary btn-sm"
                        ng-click="vm.printToCart('printMatrixConsumptionId')">
                        <span class="glyphicon glyphicon-print" aria-hidden="true"></span>
                </button>
                <button type="button" title="Volver a Inicio" class="btn btn-danger btn-sm"
                        ng-click="vm.exit()">
                        <span class="glyphicon glyphicon-log-out" aria-hidden="true"></span>
                </button>
            </div>
        </div>
    </div>

    <!--CREA Y DESCARGA TICKET FACTURA PARA EPSON TM20-->
    <div id="billToDownloadEpsonTM20" ng-show='false'>
        <p>------------------------------</p><br>
        <p>{{vm.companyData.userClient.name}}</p><br>
        <p>RUC: {{vm.companyData.userClient.ruc}}</p><br>
        <p>DIRECCION MATRIZ: {{vm.companyData.userClient.address1}}</p><br>
        <p>FACTURA No. {{vm.seqNumber}}</p><br>
        <p>CLAVE ACCESO: {{vm.bill.claveDeAcceso}}</p><br/>
        <p>AMBIENTE: PRODUCCIÓN</p><br/>
        <p>EMISIÓN: NORMAL</p><br/><br/>
        <p>RAZON SOCIAL: {{vm.clientSelected.name}}</p><br/>
        <p>IDENTIFICACION: {{vm.clientSelected.identification}}</p><br/>
        <p>FECHA: {{vm.getDateToPrint() | date:  "dd/MM/yyyy"}}</p><br/><br/>
        <p>CANT... DESCRIP... P.UNT... TOTAL</p><br/>
        <table width="100%">
            <tr ng-repeat="detail in vm.bill.details">
                <td>{{detail.quantity}} {{(detail.product.name).substr(0,16)}} &#36;{{detail.costEach}} &#36;{{detail.total}}<br/></td>
            </tr>
        </table>
        <br/>
        <p>SUBTOTAL: {{vm.bill.subTotal}}</p><br/>
        <p>BASE 0%: {{vm.bill.baseNoTaxes}}</p><br/>
        <p>BASE 12%: {{vm.bill.baseTaxes}}</p><br/>
        <p>IVA: {{vm.bill.iva}}</p><br/>
        <p>TOTAL: {{vm.bill.total}}</p><br/>
        <p>------------------------------</p>
    </div>

    <!--IMPRIME TICKET FACTURA-->
    <div id="printMatrixBillId" ng-show='false'>
        ------------------------------<br/>
        <p>{{vm.companyData.userClient.name}}</p><br/>
        <p>RUC: {{vm.companyData.userClient.ruc}}</p><br/>
        <p>DIRECCION MATRIZ:</b><br/>
        <p>{{vm.companyData.userClient.address1}}</p></br>
        <p>TELÉFONO: {{vm.companyData.userClient.phone}}</p><br/>
        <p>E-MAIL: {{vm.companyData.userClient.email}}</p><br/>

        <p>FACTURA No. {{vm.seqNumber}}</p><br/>
        <p>CLAVE ACCESO: {{vm.bill.claveDeAcceso}}</p><br/>
        <p>AMBIENTE: PRODUCCIÓN</p><br/>
        <p>EMISIÓN: NORMAL</p><br/>

        <p>RAZON SOCIAL:</p><br/>
        <p>{{vm.clientSelected.name}}</p><br/>
        <p>IDENTIFICACION: {{vm.clientSelected.identification}}</p><br/>
        <p>FECHA: {{vm.getDateToPrint() | date :  "dd/MM/yyyy"}}</p><br/>
        <p>{{vm.getIsAgentRetention()}}</p><br/>
        <p>DESCRIPCIÓN &nbsp;&nbsp;CANTIDAD &nbsp;&nbsp;P.UNIT &nbsp;&nbsp;TOTAL</p>
        <table width="100%">
            <tr ng-repeat="detail in vm.bill.details">
                <td>{{(detail.product.name).substr(0,15)}} &nbsp;{{detail.quantity}}&nbsp; &#36;{{detail.costEach}}&nbsp;&nbsp; &#36;{{detail.total}}<br/></td>
            </tr>
        </table>
        <br/>
        <table width="100%">
            <tr>
                <td>SUBTOTAL: &#36;{{vm.bill.subTotal}}</td>
            </tr>
            <tr>
                <td>BASE 0%: &#36;{{vm.bill.baseNoTaxes}}</td>
            </tr>
            <tr>
                <td>BASE 12%: &#36;{{vm.bill.baseTaxes}}</td>
            </tr>
            <tr>
                <td>IVA:   &#36;{{vm.bill.iva}}</td>
            </tr>
            <tr>
                <td>TOTAL: &#36;{{vm.bill.total}}</td>
            </tr>
        </table>

        ------------------------------------
    </div>

    <!--IMPRIME TICKET FACTURA LR2000-->
    <div id="printLRDosMillBillId" ng-show='false' 
    style="padding: 0; margin: 0; font-family: Arial, Helvetica, sans-serif; font-size:small;">
        <table width="100%">
            <tr>
                <td align="center">
                    <img src="images/{{vm.companyData.userClient.logo}}" width="110" height="80"/>
                    <h4><b>{{vm.companyData.userClient.name}}</b></h4>
                    <p><b>Matriz:</b> {{vm.companyData.userClient.address1}}</p>
                    <p><b>Establecimiento:</b> {{vm.companyData.address1}}</p>
                    <p><b>Teléfono:</b> {{vm.companyData.userClient.phone}}</p>
                    <p><b>RUC:</b> {{vm.companyData.userClient.ruc}}</p>
                </td>
            </tr>
        </table>

        <p><b>FACTURA No.</b> {{vm.seqNumber}}</p>
        <p><b>CLAVE ACCESO:</b> {{vm.bill.claveDeAcceso}}</p>
        <p><b>AMBIENTE:</b> PRODUCCIÓN<br/>
        <b>EMISIÓN:</b> NORMAL<br/>
        <b>--- CLIENTE ---</b><br/>
        <b>RAZON SOCIAL: </b>{{vm.clientSelected.name}}<br/>
        <b>IDENTIFICACION: </b>{{vm.clientSelected.identification}}<br/>
        <b>FECHA: </b> {{vm.getDateToPrint() | date :  "dd/MM/yyyy"}}</p>
        <p>{{vm.getIsAgentRetention()}}</p>

        ------------------------------------------------------------------
        <table width="100%">
            <tr>
                <th>DESCRIPCION</th>
                <th>CANTIDAD</th>
                <th>UNITARIO</th>
                <th>TOTAL</th>
            </tr>
            <tr ng-repeat="detail in vm.bill.details">
                <td>{{(detail.product.name).substr(0,15)}}</td>
                <td align="center">{{detail.quantity}}</td>
                <td>&#36;{{detail.costEach}}</td>
                <td>&#36;{{detail.total}}</td>
            </tr>
            <tr>
                <td>SUBTOTAL:</td>
                <td></td>
                <td></td>
                <td>&#36;{{vm.bill.subTotal}}</td>
            </tr>
            <tr>
                <td>BASE 0%:</td>
                <td></td>
                <td></td>
                <td>&#36;{{vm.bill.baseNoTaxes}}</td>
            </tr>
            <tr>
                <td>BASE 12%:</td>
                <td></td>
                <td></td>
                <td>&#36;{{vm.bill.baseTaxes}}</td>
            </tr>
            <tr>
                <td>IVA:</td>
                <td></td>
                <td></td>
                <td>&#36;{{vm.bill.iva}}</td>
            </tr>
            <tr>
                <td><b>TOTAL:</b></td>
                <td></td>
                <td></td>
                <td><b>&#36;{{vm.bill.total}}</b></td>
            </tr>
        </table>
        ------------------------------------------------------------------
    </div>

    <!--IMPRIME TICKET DE CONSUMO-->
    <div id="printMatrixConsumptionId" ng-show='false'>
        ----------------------<br/>
        <p>CONSUMO No. {{vm.csmSeqNumber}}</p><br/>
        <p>SUPERVISOR: {{vm.consumption.nameSupervisor}}</p><br/>
        <p>OBSERVACIONES: {{vm.consumption.observation}}</p><br/>

        <p>RAZON SOCIAL:</p><br/>
        <p>{{vm.consumption.client.name}}</p><br/>
        <p>IDENTIFICACION: {{vm.consumption.client.identification}}</p><br/>
        <p>FECHA: {{vm.getDateToPrintCsm() | date :  "dd/MM/yyyy"}}</p><br/>
        <p>DESCRIPCIÓN &nbsp;&nbsp;CANTIDAD &nbsp;&nbsp;P.UNIT &nbsp;&nbsp;TOTAL</p>
        <table width="100%">
            <tr ng-repeat="detail in vm.consumption.detailsConsumption">
                <td>{{(detail.product.name).substr(0,15)}} &nbsp;{{detail.quantity}}&nbsp; &#36;{{detail.costEach}}&nbsp;&nbsp; &#36;{{detail.total}}<br/></td>
            </tr>
        </table>
        <br/>
        <table width="100%">
            <tr>
                <td>SUBTOTAL: &#36;{{vm.consumption.subTotal}}</td>
            </tr>
            <tr>
                <td>BASE 0%: &#36;{{vm.consumption.baseNoTaxes}}</td>
            </tr>
            <tr>
                <td>BASE 12%: &#36;{{vm.consumption.baseTaxes}}</td>
            </tr>
            <tr>
                <td>IVA:   &#36;{{vm.consumption.iva}}</td>
            </tr>
            <tr>
                <td>TOTAL: &#36;{{vm.consumption.total}}</td>
            </tr>
        </table>

        ---------------------
    </div>

    <!--AGREGAR TIPO DE PAGO A LA FACTURA Y FACTURAR-->
    <div id="modalAddPago" class="modal fade" role="dialog">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" ng-click="vm.medio={}">&times;</button>
                    <h4 class="modal-title">Agregar Pago</h4>
                    Total: {{vm.bill.total}}
                </div>
                <div class="modal-body">
                    <div class="row">
                        <div class="form-group col-md-6">
                            <b>Tipo de Pago: </b>
                            <select ng-options="med.name for med in vm.medList  | orderBy:'name'  track by med.code"
                                    ng-model="vm.medio" class="form-control" ng-change="vm.loadMedio()">
                            </select>
                        </div>
                        <div class="form-group col-md-6">
                            <b>Forma de Pago: </b><br/>
                            {{vm.medio.payForm}}
                        </div>
                    </div>
                    <div class="row" ng-show="vm.medio.code === 'cheque' || vm.medio.code === 'cheque_posfechado'">
                        <div class="form-group col-md-4">
                            <b>Banco: </b>
                            <input type="text" ng-model="vm.medio.chequeBank" class="form-control" maxlength="9">
                        </div>
                        <div class="form-group col-md-4">
                            <b>Cuenta: </b>
                            <input type="text" ng-model="vm.medio.chequeAccount" class="form-control" maxlength="9">
                        </div>
                        <div class="form-group col-md-4">
                            <b>Número de Cheque: </b>
                            <input type="text" ng-model="vm.medio.chequeNumber" class="form-control" maxlength="9">
                        </div>
                    </div>
                    <div class="row" ng-show="vm.medio.code === 'cheque_posfechado'">
                        <div class="form-group col-md-6">
                            <b>Días Plazo: </b>
                            <input type="text" onkeypress="return ((event.which >= 48 && event.which <= 57) || (event.keyCode == 9 || event.keyCode == 8))"
                                   ng-model="vm.medio.chequeDiasPlazo" class="form-control" maxlength="9" ng-change="vm.getFechaCobro()">
                        </div>
                        <div class="form-group col-md-6">
                            <b>Fecha Cobro: </b><br/>
                            {{vm.medio.fechaCobro | date :  "dd/MM/yyyy"}}
                        </div>
                    </div>
                    <div class="row" ng-show="vm.medio.code === 'credito'">
                        <div class="form-group col-md-4">
                            <b>Número de Pagos: </b>
                            <input type="text" onkeypress="return ((event.which >= 48 && event.which <= 57) || (event.keyCode == 9 || event.keyCode == 8))"
                                   ng-model="vm.medio.creditoNumeroPagos" class="form-control" maxlength="2">
                        </div>
                        <div class="form-group col-md-4">
                            <b>Intervalo de Días: </b><br/>
                            <input type="text" onkeypress="return ((event.which >= 48 && event.which <= 57) || (event.keyCode == 9 || event.keyCode == 8))"
                                  ng-model="vm.medio.creditoIntervalos" class="form-control" maxlength="3">
                        </div>
                        <div class="form-group col-md-4">
                            <br/>
                            <button type="button" title = "Calcular" class="btn btn-primary btn-sm" ng-click="vm.loadCredit()"
                                    ng-disabled="vm.medio.creditoIntervalos === undefined || vm.medio.creditoNumeroPagos === undefined">
                                    <span class = "glyphicon glyphicon-th" aria-hidden = "true"></span>
                            </button>
                        </div>
                    </div>
                    <div class="row" ng-show="vm.medio.code === 'credito'">
                        <div class="form-group col-md-12">
                            <table class="table table-striped">
                                <thead>
                                    <tr>
                                        <th>Pago</th>
                                        <th>Días Plazo</th>
                                        <th>Fechas</th>
                                        <th>Valor $</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr ng-repeat="cred in vm.medio.credits">
                                        <td>{{cred.payNumber}}</td>
                                        <td>{{cred.diasPlazo}}</td>
                                        <td>{{cred.fecha | date:'dd/MM/yyyy'}}</td>
                                        <td>{{cred.valor}}</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                    <div class="row" ng-show="vm.medio.code === 'tarjeta_credito' || vm.medio.code === 'tarjeta_debito'">
                        <div class="form-group col-md-6">
                            <b>Tarjeta: </b>
                            <select ng-options="card as card for card in vm.creditCardList"
                                    ng-model="vm.medio.cardBrand" class="form-control">
                            </select>
                        </div>
                        <div class="form-group col-md-6">
                            <b>No. Lote: </b>
                            <input type="text" onkeypress="return ((event.which >= 48 && event.which <= 57) || (event.keyCode == 9 || event.keyCode == 8))"
                                   ng-model="vm.medio.numeroLote" class="form-control" maxlength="5">
                        </div>
                    </div>
                    <div class="row">
                        <form ng-submit="vm.addPago()">
                            <div class="form-group col-md-4" ng-if="vm.medio.code !== 'credito'">
                                <b>Valor: </b>
                                <input type="text" onkeypress="return ((event.which >= 46 && event.which <= 57) || (event.keyCode == 9 || event.keyCode == 8) || (event.which === 13))"
                                       ng-model="vm.medio.total" class="form-control" maxlength="9" id="medioTotal">
                            </div>
                            <div class="form-group col-md-4" ng-if="vm.medio.code !== 'credito'">
                                <b>Valor: </b><br />
                                $ {{vm.medio.total}}
                            </div>
                            <div class="form-group col-md-4">
                                <br/>
                                <input type="submit" value = "Agregar Pago" class="btn btn-primary btn-sm" id="addPaymentBtn"
                                ng-disabled="vm.medio === undefined || vm.medio.total === undefined">
                            </div>
                        </form>
                    </div>
                    <div class="row">
                        <div class="col-md-12">
                            <table class="table table-striped">
                                <thead>
                                    <tr>
                                        <th>Medio</th>
                                        <th>Valor</th>
                                        <th></th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr ng-show="vm.pagos == 0">
                                        <td colspan="4">
                                            No hay pagos ingresados
                                        </td>
                                    </tr>
                                    <tr ng-repeat="pago in vm.pagos">
                                        <td>{{pago.medio.name}}</td>
                                        <td>{{pago.total}}</td>
                                        <td>
                                            <button type="button" title = "Eliminar Pago" class="btn btn-primary btn-sm" ng-click="vm.removePago($index)">
                                                    <span class = "glyphicon glyphicon-trash" aria-hidden = "true"></span>
                                            </button>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td><b>Total:</b></td>
                                        <td>{{vm.getTotalPago()}}</td>
                                        <td><h3>Vuelto: {{vm.getTextCambio()}}</h3></td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" title = "Facturar" class="btn btn-success btn-sm" ng-click="vm.getClaveAcceso()" id="processBillBtn"
                            ng-disabled="(vm.pagos.length === 0 || vm.getCambio < 0) || vm.billed" print-remove>
                            <span class = "glyphicon glyphicon-credit-card" aria-hidden = "true"></span>
                    </button>
                    <button type="button" title = "Cancelar Facturación" class="btn btn-warning btn-sm" data-dismiss="modal">
                            <span class = "glyphicon glyphicon-log-out" aria-hidden = "true"></span>
                    </button>
                    <button type="button" title="Generar Consumo" class="btn btn-primary btn-sm" ng-click="vm.saveConsumption(vm.consumption)"
                            ng-disabled="(vm.pagos.length === 0 || vm.getCambio < 0) || vm.billed">
                            Consumo
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!--AGREGAR PRODUCTOS A LA FACTURA-->
    <div id="modalAddProduct" class="modal fade" role="dialog">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" ng-click="vm.productToAdd=undefined">&times;</button>
                    <h4 class="modal-title">Agregar Producto</h4>
                </div>
                <div class="modal-body">
                    <div class="row">
                        <div class="col-md-12" ng-if="vm.productToAdd === undefined">
                            <div class="row">
                                <div class="form-group col-md-8">
                                    <form>
                                        <input id="prod011" ng-model="vm.searchText" ng-keypress="vm.filterEvent($event)" class="form-control" placeholder="Buscar" autocomplete="off">
                                    </form>
                                </div>
                                <div class="form-group col-md-4">
                                    <button type="button" title="Buscar" class="btn btn-primary btn-sm" ng-click="vm.filter()">
                                            <span class = "glyphicon glyphicon-search" aria-hidden = "true"></span>
                                    </button>
                                </div>
                            </div>
                            <table class="table table-striped">
                                <thead>
                                    <tr>
                                        <th>C&oacute;digo</th>
                                        <th>Nombre</th>
                                        <th>Cantidad Disponible</th>
                                        <th>Precio Unitario $</th>
                                        <th></th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr ng-show="vm.productList == 0">
                                        <td colspan="4">
                                            No hay productos ingresados
                                        </td>
                                    </tr>
                                    <tr ng-repeat="productSelect in vm.productList | orderBy:'name' | filter:searchTextProd">
                                        <td>{{productSelect.codeIntegridad}}</td>
                                        <td>{{productSelect.name}}</td>
                                        <td>{{productSelect.quantity}}</td>
                                        <td>{{vm.getCost(productSelect[vm.priceType.cod], productSelect.averageCost)}}</td>
                                        <td>
                                            <button type="button" title="Seleccionar" class="btn btn-primary btn-sm" ng-click="vm.selectProductToAdd(productSelect)">
                                                    <span class = "glyphicon glyphicon-check" aria-hidden = "true"></span>
                                            </button>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                            <nav aria-label="Page navigation example">
                                <ul class="pagination pagination-sm">
                                    <li class="page-item" ng-repeat="page in vm.range() track by $index" ng-class="vm.getActiveClass($index)">
                                        <a class="page-link" ng-click="vm.paginate($index)">{{$index + 1}}</a>
                                    </li>
                                </ul>
                            </nav>
                        </div>
                        <div class="col-md-12" ng-if="vm.productToAdd !== undefined">
                            <div class="panel panel-primary">
                                <div class="panel-heading">
                                    <b>{{vm.productToAdd.name}}</b>
                                </div>
                                <div class="panel-body">
                                    <div class="row" ng-show="vm.errorQuantity">
                                        <div class="form-group col-md-12">
                                            <div class="alert alert-danger">{{vm.errorQuantity}}</div>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="form-group col-md-6">
                                            <b>Cantidad Disponible: </b><h4>{{vm.productToAdd.quantity}}</h4>
                                        </div>
                                        <div class="form-group col-md-6">
                                            <b>Cantidad a Venta: </b>
                                            <input type="text" onkeypress="return ((event.which >= 48 && event.which <= 57) || (event.keyCode == 9 || event.keyCode == 8))"
                                                   ng-model="vm.quantity" class="form-control" maxlength="9">
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="form-group col-md-4">
                                            <b>Descripción: </b>
                                            <input type="text" ng-model="vm.adicional" class="form-control" maxlength="254">
                                        </div>
                                        <div class="form-group col-md-4">
                                            <b>Precio Unitario: </b>
                                            <input type="text" ng-model="vm.productToAdd.costEachCalculated" class="form-control">
                                        </div>
                                        <div class="form-group col-md-4">
                                            <b>% Descuento: </b>
                                            <input type="text" ng-model="vm.toAddDiscount" class="form-control">
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" title="Aceptar y Cerrar" class="btn btn-success btn-sm" ng-click="vm.acceptProduct(true)"
                            ng-disabled="vm.productToAdd === undefined">
                            <span class = "glyphicon glyphicon-thumbs-up" aria-hidden = "true"></span>
                    </button>
                    <button type="button" title="Aceptar y Agregar Mas productos" class="btn btn-primary btn-sm" ng-click="vm.acceptProduct(false)"
                            ng-disabled="vm.productToAdd === undefined">
                            <span class = "glyphicon glyphicon-ok-sign" aria-hidden = "true"></span>
                    </button>
                    <button type="button" title="Salir" class="btn btn-primary btn-sm" data-dismiss = "modal">
                            <span class = "glyphicon glyphicon-log-out" aria-hidden = "true"></span>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!--EDITAR NUMERO DE FACTURA-->
    <div id="modalEditBillNumber" class="modal fade" role="dialog">
        <div class="modal-dialog">
            <div class="modal-content" ng-show="vm.isEmp">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                    <h4 class="modal-title">Editar N&uacute;mero de Factura</h4>
                </div>
                <div class="modal-body">
                    <div class="row" ng-show="vm.errorValidateAdm !== undefined">
                        <div class="form-group col-md-12">
                            <div class="alert alert-danger">{{vm.errorValidateAdm}}</div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="form-group col-md-12">
                            <b>Clave Administrador: </b>
                            <input type="password" ng-model="vm.passwordAdm" class="form-control">
                        </div>
                    </div>
                    <div class="row">
                        <div class="form-group col-md-12">
                            <button type="button" title="Validar" class="btn btn-primary btn-sm" ng-click="vm.validateAdm()" ng-disabled="vm.passwordAdm === undefined">
                                    <span class = "glyphicon glyphicon-tags" aria-hidden = "true"></span>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-content" ng-show="!vm.isEmp">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" ng-click="vm.productToAdd=undefined">&times;</button>
                    <h4 class="modal-title">Editar N&uacute;mero de Factura</h4>
                </div>
                <div class="modal-body">
                    <div class="row">
                        <div class="form-group col-md-12">
                            <b>Nuevo Número de Factura: </b>
                        </div>
                    </div>
                    <div class="row">
                        <div class="form-group col-md-2">
                            {{vm.seqNumberFirstPart}}-
                        </div>
                        <div class="form-group col-md-10">
                            <input type="text" onkeypress="return ((event.which >= 48 && event.which <= 57) || (event.keyCode == 9 || event.keyCode == 8))"
                                   ng-model="vm.seqNumberSecondPart" class="form-control" maxlength="9">
                        </div>
                    </div>
                    <div class="row" ng-show="vm.seqErrorNumber !== undefined">
                        <div class="form-group col-md-12">
                            <div class="alert alert-danger">{{vm.seqErrorNumber}}</div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" title="Aceptar" class="btn btn-success btn-sm" ng-click="vm.acceptNewSeq()">
                            <span class = "glyphicon glyphicon-thumbs-up" aria-hidden = "true"></span>
                    </button>
                    <button type="button" title = "Salir" class="btn btn-primary btn-sm" data-dismiss="modal">
                            <span class = "glyphicon glyphicon-log-out" aria-hidden = "true"></span>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!--ANULAR FACTURA-->
    <div id="modalAnular" class="modal fade" role="dialog">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                    <h3 class="modal-title">¡¡¡Advertencia!!!</h3>
                </div>
                <div class="modal-body">
                    <div class="row">
                        <div class="col-md-12" >
                            <p>¿Est&aacute; seguro que desea Anular la Factura <b>No. {{vm.cancelaBill.stringSeq}}</b>?</p>
                            <p>Recuerde que la Factura Anulada <b>NO puede ser Recuperada</b></p>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" title="Anular Factura" class="btn btn-danger btn-sm" ng-click="vm.billDeactivate()" data-dismiss="modal">
                            <span class = "glyphicon glyphicon-screenshot" aria-hidden = "true"></span>
                    </button>
                    <button type="button" title = "Salir" class="btn btn-primary btn-sm" data-dismiss="modal">
                            <span class = "glyphicon glyphicon-log-out" aria-hidden = "true"></span>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!--SELECCIONAR COTIZACIONES-->
    <div id="modalCotizacion" class="modal fade" role="dialog">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" ng-click="vm.quotations = []">&times;</button>
                    <h4 class="modal-title">Cotizaciones</h4>
                </div>
                <div class="modal-body">
                    <div class="row">
                        <div class="col-md-12" >
                            <div class="row">
                                <div class="form-group col-md-8">
                                    <input ng-model="vm.searchTextCotizacion" class="form-control" placeholder="Buscar" />
                                </div>
                            </div>
                            <table class="table table-striped">
                                <thead>
                                    <tr>
                                        <th>N&uacute;mero</th>
                                        <th>Fecha</th>
                                        <th>Total $</th>
                                        <th></th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr ng-show="vm.productList == 0">
                                        <td colspan="4">
                                            No hay cotizaciones ingresadas
                                        </td>
                                    </tr>
                                    <tr ng-repeat="quotation in vm.quotations | orderBy:'stringQuotationSeq' | filter:searchTextCotizacion">
                                        <td>{{quotation.stringQuotationSeq}}</td>
                                        <td>{{quotation.dateCreated | date :  "dd/MM/yyyy"}}</td>
                                        <td>{{quotation.total}}</td>
                                        <td>
                                            <button type="button" title="Seleccionar" class="btn btn-primary btn-sm" ng-click="vm.selectQuotation(quotation)" data-dismiss="modal">
                                                    <span class = "glyphicon glyphicon-check" aria-hidden = "true"></span>
                                            </button>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!--ADVERTENCIA-->
    <div ng-show="vm.advertencia === true">
        <div class="row">
            <div class="col-md-8 col-md-offset-3">
                <img src="images/advertencia.png" style="height: 250px; width: 340px; margin-top: 10px;">
            </div>
        </div>
        <br/>
        <br/>
        <div class="row">
            <div class="col-md-10 col-md-offset-2">
                <h4><b>MR. ZOLUTIONS LE INFORMA:</b> ESTIMADO CLIENTE, SU USUARIO</h4>
                <h4><b>NO ESTÁ AUTORIZADO</b> PARA EJECUTAR ESTA OPCIÓN DEL MENÚ</h4>
            </div>
        </div>
        <br/>
        <div class="row">
            <div class="col-md-12">
                <button type="button" title = "Aceptar y Salir" class="btn btn-success btn-sm" ng-click="vm.exit()">
                        <span class = "glyphicon glyphicon-thumbs-down" aria-hidden = "true"></span>
                </button>
            </div>
        </div>
    </div>
</div>
