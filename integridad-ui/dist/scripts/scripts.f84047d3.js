function routes(a){a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl",controllerAs:"vm"}).when("/activate/:idUSer/:validate",{templateUrl:"views/activate/activate.tpl.html",controller:"ActivateCtrl",controllerAs:"vm"}).when("/home",{templateUrl:"views/home/home.tpl.html",controller:"HomeCtrl",controllerAs:"vm"}).when("/users",{templateUrl:"views/users/users.tpl.html",controller:"UsersCtrl",controllerAs:"vm"}).when("/users/edit",{templateUrl:"views/users/edit.tpl.html",controller:"UserEditCtrl",controllerAs:"vm"}).when("/clients",{templateUrl:"views/clients/clients.tpl.html",controller:"ClientsCtrl",controllerAs:"vm"}).when("/clients/:create",{templateUrl:"views/clients/clients.tpl.html",controller:"ClientsCtrl",controllerAs:"vm"}).when("/bills/bill",{templateUrl:"views/bills/bill.tpl.html",controller:"BillCtrl",controllerAs:"vm"}).when("/projects/projects",{templateUrl:"views/projects/projects.tpl.html",controller:"ProjectsCtrl",controllerAs:"vm"}).when("/products/products",{templateUrl:"views/products/products.tpl.html",controller:"ProductsCtrl",controllerAs:"vm"}).when("/products/products/:subsidiaryId",{templateUrl:"views/products/products.tpl.html",controller:"ProductsCtrl",controllerAs:"vm"}).otherwise({redirectTo:"/"})}var app=angular.module("integridadUiApp",["app.routes","app.core","app.directives"]);app.run(["$rootScope","$location","authorizationService","$localStorage",function(a,b,c,d){a.$on("$routeChangeStart",function(a){b.path().includes("/activate/")||c.isLoggedIn()||b.path("/")})}]),angular.module("app.routes",["ngRoute"]).config(routes),routes.$inject=["$routeProvider"],angular.module("app.services",["base64"]),angular.module("app.core",["app.services","ui.bootstrap","ngResource","toaster","ngAnimate","ngStorage","angularUtils.directives.dirPagination","xen3r0.underscorejs"]),angular.module("app.directives",["ngPatternRestrict"]),angular.module("integridadUiApp").controller("MainCtrl",["$rootScope","$location","authService","utilStringService","permissionService","$localStorage",function(a,b,c,d,e,f){function g(){e.getPermissions(f.user.userType).then(function(c){f.permissions=c,a.updateMenu(),h.loading=!1,b.path("/home")})["catch"](function(a){h.loading=!1,h.error=a.data})}var h=this;h.loading=!1,h.init=!0,h.recover=!1,h.userIntegridad={},h.error=void 0,h.success=void 0,h.login=function(){h.loading=!0;var a={email:h.email,password:h.password};c.authUser(a).then(function(a){if(f.user=a,f.user.tempPass)h.loading=!1,h.passwordNotMatch=!1,h.userIntegridad=angular.copy(f.user),$("#modalChangePassword").modal("show");else{var b=new Date;f.timeloged=b.getTime(),g()}})["catch"](function(a){h.loading=!1,h.error=a.data})},h.update=function(){h.loading=!0,h.userIntegridad.password=h.newPass,h.userIntegridad.tempPass=!1,c.updateUser(h.userIntegridad).then(function(a){h.error=void 0,h.success="Perfil actualizado con exito",f.user=a;var b=new Date;f.timeloged=b.getTime(),g()})["catch"](function(a){h.loading=!1,h.error=a.data})},h.validatePassword=function(){h.passwordNotMatch=h.newPass!==h.passConfirmation},h.register=function(){h.userIntegridad.birthDay=$("#pickerBirthday").data("DateTimePicker").date().toDate().getTime(),h.userIntegridad.email=h.userIntegridad.email.trim(),h.userIntegridad.password=h.userIntegridad.password.trim();var a=d.isAnyInArrayStringEmpty([h.userIntegridad.email,h.userIntegridad.password,h.userIntegridad.firstName,h.userIntegridad.lastName]);a?h.error="Debe ingresar Nombres completos, email y password":(a=d.isStringEmpty(h.userIntegridad.cedula)&&d.isStringEmpty(h.userIntegridad.ruc),a&&(h.error="Debe ingresar un numero de cedula o ruc")),a||(h.loading=!0,c.registerUser(h.userIntegridad).then(function(a){h.loading=!1,h.error=void 0,h.init=!0,h.success="Resgistro realizado con exito. Se envio un email a la cuenta registrada para activar su cuenta"})["catch"](function(a){h.loading=!1,h.error=a.data}))},h.recoverPass=function(){h.loading=!0;var a={email:h.email};c.recoverUser(a).then(function(a){h.loading=!1,h.recover=!1,h.success="Se envio un email a la cuenta registrada con un nuevo Password para ingresar al sistema."})["catch"](function(a){h.loading=!1,h.error=a.data})}}]),angular.module("integridadUiApp").controller("MenuCtrl",["$rootScope","$scope","$localStorage","$location",function(a,b,c,d){if(b.permissions=[],a.updateMenu=function(){b.permissions=c.permissions,b.nameType=c.user.firstName+" - "+c.user.userType.name},b.logout=function(){b.permissions=[],b.nameType=void 0,c.permissions=void 0,c.user=void 0,c.timeloged=void 0,d.path("/")},b.$on("onBeforeUnload",function(a,c){b.logout()}),c.timeloged){var e=new Date,f=e.getTime(),g=f-c.timeloged;g>864e5&&b.logout()}c.permissions&&a.updateMenu()}]),angular.module("integridadUiApp").controller("ActivateCtrl",["$routeParams","$location","authService","permissionService","$rootScope","$localStorage",function(a,b,c,d,e,f){var g=this;g.errorActive=!1,c.activeUser(a.idUSer,a.validate).then(function(a){f.user=a;var c=new Date;f.timeloged=c.getTime(),d.getPermissions(f.user.userType).then(function(a){f.permissions=a,e.updateMenu(),g.loading=!1,b.path("/home")})["catch"](function(a){g.loading=!1,g.error=a.data})})["catch"](function(a){g.errorActive=!0,g.error=a.data})}]),angular.module("integridadUiApp").controller("HomeCtrl",function(){}),angular.module("integridadUiApp").controller("UsersCtrl",["utilStringService","userTypeService","authService","projectService","subsidiaryService","validatorService","cashierService",function(a,b,c,d,e,f,g){function h(){l.loading=!0,c.getLazy().then(function(a){l.userList=a})["catch"](function(a){l.loading=!1,l.error=a.data}),i()}function i(){d.getLazy().then(function(a){l.projectList=a,l.loading=!1})["catch"](function(a){l.loading=!1,l.error=a.data})}function j(){l.loading=!0,c.registerUser(l.userIntegridad).then(function(a){l.loading=!1,l.error=void 0,l.success="Resgistro realizado con exito. Se envio un email a la cuenta registrada para activar su cuenta",l.userIntegridad=void 0,h()})["catch"](function(a){l.loading=!1,l.error=a.data})}function k(a){l.loading=!0,c.updateUser(l.userIntegridad).then(function(b){l.loading=!1,l.error=void 0,a?l.success="Resgistro eliminado con exito":l.success="Resgistro actualizado con exito",l.userIntegridad=void 0,h()})["catch"](function(a){l.loading=!1,l.error=a.data})}var l=this;l.loading=!1,l.userIntegridad=void 0,l.project=void 0,l.bosses=[],l.codeBosses={EMP:"ADM",ADM:"SAD",SAD:"SAD"},l.getSubsidiaries=function(){e.getByProjectId(l.project.id).then(function(a){l.subsidiaryList=a,l.loading=!1})["catch"](function(a){l.loading=!1,l.error=a.data})},l.getBosses=function(){c.getBosses(l.codeBosses[l.userIntegridad.userType.code],l.userIntegridad.subsidiary.id).then(function(a){l.bosses=a})},l.getCashiers=function(){g.getBySubsidiaryId(l.userIntegridad.subsidiary.id).then(function(a){l.cashierList=a,l.loading=!1})["catch"](function(a){l.loading=!1,l.error=a.data})},l.userCreate=function(){l.success=void 0,l.error=void 0,l.userIntegridad={}},l.userEdit=function(a){l.success=void 0,l.error=void 0,l.userIntegridad=angular.copy(a),void 0!==l.userIntegridad.cedula&&null!==l.userIntegridad.cedula?l.typeId="Cedula":l.typeId="Ruc",i(),l.project=l.userIntegridad.subsidiary.userClient,l.getSubsidiaries(),l.getBosses(),$("#pickerBirthday").data("DateTimePicker").date(new Date(l.userIntegridad.birthDay))},l.register=function(){l.userIntegridad.birthDay=$("#pickerBirthday").data("DateTimePicker").date().toDate().getTime(),l.userIntegridad.email=l.userIntegridad.email.trim(),l.userIntegridad.password=a.randomString();var b=a.isAnyInArrayStringEmpty([l.userIntegridad.email,l.userIntegridad.password,l.userIntegridad.firstName,l.userIntegridad.lastName]);b?l.error="Debe ingresar Nombres completos y un email":(b=a.isStringEmpty(l.userIntegridad.cedula)&&a.isStringEmpty(l.userIntegridad.ruc),b&&(l.error="Debe ingresar un numero de cedula o ruc"));var c=!0;"Cedula"===l.typeId?c=f.isCedulaValid(l.userIntegridad.cedula):"Ruc"===l.typeId&&(c=f.isRucValid(l.userIntegridad.ruc)),c?b||(void 0===l.userIntegridad.id?j():(l.userIntegridad.password="",k(!1))):l.error="Identificacion invalida"},l.remove=function(){l.userIntegridad.active=!1,k(!0)},l.cancel=function(){l.userIntegridad=void 0,l.success=void 0,l.error=void 0},l.userIntegridadResend=function(a){l.loading=!0,c.recoverUser(a).then(function(b){l.loading=!1,l.recover=!1,l.success="Se envio un email a "+a.email+" con un nuevo Password para ingresar al sistema."})["catch"](function(a){l.loading=!1,l.error=a.data})},function(){l.loading=!0,b.getUserTypes().then(function(a){l.userTypes=a,l.loading=!1})["catch"](function(a){l.loading=!1,l.error=a.data}),h()}()}]),angular.module("integridadUiApp").controller("UserEditCtrl",["$rootScope","utilStringService","userTypeService","authService","$localStorage",function(a,b,c,d,e){function f(){$("#pickerBirthday").data("DateTimePicker").date(new Date(g.userIntegridad.birthDay))}var g=this;g.loading=!1,g.userIntegridad=angular.copy(e.user),g.changePassword=!1,g.passwordNotMatch=!1,g.validatePassword=function(){g.passwordNotMatch=g.newPass!==g.passConfirmation},g.editUser=function(){g.changePassword&&!g.passwordNotMatch?g.userIntegridad.password=g.newPass:g.userIntegridad.password="",g.userIntegridad.birthDay=$("#pickerBirthday").data("DateTimePicker").date().toDate().getTime(),g.userIntegridad.email=g.userIntegridad.email.trim();var c=b.isAnyInArrayStringEmpty([g.userIntegridad.email,g.userIntegridad.firstName,g.userIntegridad.lastName]);c?g.error="Debe ingresar Nombres completos y un email":(c=b.isStringEmpty(g.userIntegridad.cedula)&&b.isStringEmpty(g.userIntegridad.ruc),c&&(g.error="Debe ingresar un numero de cedula o ruc")),c||(g.loading=!0,d.updateUser(g.userIntegridad).then(function(b){g.loading=!1,g.error=void 0,g.success="Perfil actualizado con exito",e.user=b,a.updateMenu()})["catch"](function(a){g.loading=!1,g.error=a.data}))},g.cancel=function(){g.userIntegridad=angular.copy(e.user),g.success=void 0,g.error=void 0,g.changePassword=!1,g.passwordNotMatch=!1},function(){f()}()}]),angular.module("integridadUiApp").controller("ClientsCtrl",["$routeParams","$location","projectService","utilStringService","countryListService","clientService","$localStorage","validatorService",function(a,b,c,d,e,f,g,h){function i(){a.create?l.clientCreate():(l.loading=!0,f.getLazy().then(function(a){l.clientList=a,l.loading=!1})["catch"](function(a){l.loading=!1,l.error=a.data}))}function j(){f.create(l.client).then(function(c){l.client=void 0,i(),l.error=void 0,l.success="Resgistro realizado con exito",a.create&&b.path("/bills/bill")})["catch"](function(a){l.loading=!1,l.error=a.data})}function k(a){f.update(l.client).then(function(b){l.client=void 0,i(),l.error=void 0,a?l.success="Resgistro eliminado con exito":l.success="Resgistro actualizado con exito"})["catch"](function(a){l.loading=!1,l.error=a.data})}var l=this;l.loading=!1,l.client=void 0,l.countryList=e.getCountryList(),l.citiesList=e.getCitiesEcuador(),l.clientList=void 0,l.clientCreate=function(){c.getNumberOfProjects(g.user.subsidiary.userClient.id).then(function(a){l.success=void 0,l.error=void 0;var b=parseInt(a);l.client={country:"Ecuador",city:"Quito",codApp:b+1,userClient:g.user.subsidiary.userClient}})["catch"](function(a){l.loading=!1,l.error=a.data})},l.clientEdit=function(a){l.success=void 0,l.error=void 0,l.client=angular.copy(a)},l.validateEcuador=function(){"Ecuador"!==l.client.country&&(l.client.city=void 0)},l.save=function(){var a=d.isAnyInArrayStringEmpty([l.client.name,l.client.identification,l.client.codApp]),b=!0;"CED"===l.client.typeId?b=h.isCedulaValid(l.client.identification):"RUC"===l.client.typeId&&(b=h.isRucValid(l.client.identification)),a?l.error="Debe ingresar Nombres completos, una identificacion y el Codigo de Contabilidad":b?(l.loading=!0,void 0===l.client.id?j():k(!1)):l.error="Identificacion invalida"},l.remove=function(){l.client.active=!1,k(!0)},l.cancel=function(){l.client=void 0,l.success=void 0,l.error=void 0,a.create&&b.path("/bills/bill")},function(){i()}()}]),angular.module("integridadUiApp").controller("BillCtrl",["_","$rootScope","$location","utilStringService","$localStorage","clientService","productService","authService",function(a,b,c,d,e,f,g,h){function i(){n.clientSelected=void 0,n.dateBill=void 0,n.seqNumber=void 0,n.productList=void 0,n.productToAdd=void 0,n.quantity=void 0,n.loading=!0,n.indexDetail=void 0,n.priceType=n.prices[0],f.getLazyByProjectId(e.user.subsidiary.userClient.id).then(function(a){n.clientList=a,n.loading=!1})["catch"](function(a){n.loading=!1,n.error=a.data})}function j(a,b){for(var c=""+a;c.length<b;)c="0"+c;return c}function k(){var a=parseInt(e.user.cashier.billNumberSeq)+1;n.seqNumberFirstPart=e.user.subsidiary.userClient.threeCode+"-"+e.user.cashier.threeCode,n.seqNumberSecondPart=j(a,10),n.seqNumber=n.seqNumberFirstPart+"-"+n.seqNumberSecondPart}function l(){n.bill={client:n.clientSelected,userIntegridad:e.user,subsidiary:e.user.subsidiary,dateCreated:n.dateBill.getTime(),total:0,subTotal:0,details:[]}}function m(){n.bill.subTotal=0,a.map(n.bill.details,function(a){n.bill.subTotal=(parseFloat(n.bill.subTotal)+parseFloat(a.total)).toFixed(2),n.bill.total=(1.12*parseFloat(n.bill.subTotal)).toFixed(2)})}var n=this;n.loading=!1,n.clientList=void 0,n.isEmp=!0,n.prices=[{name:"EFECTIVO",cod:"cashPercentage"},{name:"MAYORISTA",cod:"majorPercentage"},{name:"CREDITO",cod:"creditPercentage"},{name:"TARJETA",cod:"cardPercentage"}],n.acceptNewSeq=function(){n.seqNumber=n.seqNumberFirstPart+"-"+n.seqNumberSecondPart},n.reCalculateTotal=function(){a.map(n.bill.details,function(a){var b=n.getCost("1."+a.product[n.priceType.cod],a.product.averageCost);a.costEach=b,a.total=(parseFloat(a.quantity)*parseFloat(a.costEach)).toFixed(2)}),m()},n.clientCreate=function(){c.path("/clients/create")},n.clientSelect=function(a){n.dateBill=new Date,n.clientSelected=a,k(),l()},n.addProduct=function(){n.indexDetail=void 0,n.loading=!0,n.errorQuantity=void 0,g.getLazyBySusidiaryId(e.user.subsidiary.id).then(function(b){n.loading=!1,n.productList=[];for(var c=0;c<b.length;c++){var d=a.find(n.bill.details,function(a){return a.product.id===b[c].id});if(void 0===d){var f=a.find(b[c].productBySubsidiaries,function(a){return a.subsidiary.id===e.user.subsidiary.id});b[c].quantity=f.quantity,n.productList.push(b[c])}}})["catch"](function(a){n.loading=!1,n.error=a.data})},n.acceptProduct=function(b){if(parseInt(n.quantity)<=parseInt(n.productToAdd.quantity)){n.errorQuantity=void 0;var c=n.getCost("1."+n.productToAdd[n.priceType.cod],n.productToAdd.averageCost),d={product:angular.copy(n.productToAdd),quantity:n.quantity,costEach:c,total:(parseFloat(n.quantity)*parseFloat(c)).toFixed(2)};if(void 0!==n.indexDetail?n.bill.details[n.indexDetail]=d:n.bill.details.push(d),n.productToAdd=void 0,n.quantity=void 0,m(),b)$("#modalAddProduct").modal("hide");else{var e=a.filter(n.productList,function(a){return a.id!==d.product.id});n.productList=e}}else n.errorQuantity="Cantidad disponible insuficiente"},n.getCost=function(a,b){var c=parseFloat(a),d=c*b;return d.toFixed(2)},n.editDetail=function(a,b){n.indexDetail=b,n.productToAdd=a.product,n.quantity=a.quantity},n.removeDetail=function(a){n.bill.details.splice(a,1)},n.validateAdm=function(){n.errorValidateAdm=void 0;var a=e.user.user;a.password=n.passwordAdm,h.authUser(a).then(function(a){n.loading=!1,n.isEmp=!1})["catch"](function(a){n.loading=!1,n.errorValidateAdm=a.data})},n.verifyUser=function(){n.isEmp="EMP"===e.user.userType.code},function(){i()}()}]),angular.module("integridadUiApp").controller("ProjectsCtrl",["$localStorage","$location","projectService","utilStringService","validatorService",function(a,b,c,d,e){function f(){i.loading=!0,c.getLazy().then(function(a){i.projectList=a,i.loading=!1})["catch"](function(a){i.loading=!1,i.error=a.data})}function g(){c.create(i.project).then(function(a){i.project=void 0,f(),i.error=void 0,i.success="Resgistro realizado con exito"})["catch"](function(a){i.loading=!1,i.error=a.data})}function h(a){c.update(i.project).then(function(b){i.project=void 0,f(),i.error=void 0,a?i.success="Resgistro eliminado con exito":i.success="Resgistro actualizado con exito"})["catch"](function(a){i.loading=!1,i.error=a.data})}var i=this;i.loading=!1,i.project=void 0,i.projectList=void 0,i.subsidiary=void 0,i.cashier=void 0,i.warehouse=void 0,i.projectCreate=function(){i.success=void 0,i.error=void 0,i.project={subsidiaries:[]},i.project.initialActivityDate=$("#pickerInitialDate").data("DateTimePicker").date().toDate().getTime()},i.save=function(){i.project.initialActivityDate=$("#pickerInitialDate").data("DateTimePicker").date().toDate().getTime();var a=d.isAnyInArrayStringEmpty([i.project.name,i.project.threeCode,i.project.codeIntegridad,i.project.ruc]),b=e.isRucValid(i.project.ruc);a?i.error="Debe ingresar Nombres completos, ruc y sus Codigos":b?(i.loading=!0,void 0===i.project.id?g():h(!1)):i.error="RUC invalido"},i.remove=function(){i.project.active=!1,h(!0)},i.addSubsidiary=function(){i.subsidiary={cashiers:[],warehouses:[]}},i.removeWarehouse=function(){i.warehouse.active=!1},i.removeCashier=function(){i.cashier.active=!1},i.removeSubsidiary=function(){i.subsidiary.active=!1},i.addWarehouse=function(){var a={nameNumber:i.warehouseName,dateCreated:(new Date).getTime(),active:!0};i.subsidiary.warehouses.push(a),i.warehouseName=void 0},i.editProject=function(a){i.success=void 0,i.error=void 0,c.getById(a.id).then(function(a){i.project=a,$("#pickerInitialDate").data("DateTimePicker").date(new Date(i.project.initialActivityDate))})["catch"](function(a){i.loading=!1,i.error=a.data})},i.saveSubsidiary=function(){void 0===i.subsidiary.id&&void 0!==i.subsidiary.name&&(i.subsidiary.active=!0,i.subsidiary.dateCreated=(new Date).getTime(),i.project.subsidiaries.push(i.subsidiary)),i.subsidiary=void 0,i.updSubsi=!1},i.saveCashier=function(){i.cashier.active=!0,i.cashier.dateCreated=(new Date).getTime(),i.subsidiary.cashiers.push(i.cashier)},i.saveWarehouse=function(){i.warehouse.active=!0,i.warehouse.dateCreated=(new Date).getTime(),i.subsidiary.warehouses.push(i.warehouse)},i.cancel=function(){i.updSubsi=!1,i.project=void 0,i.success=void 0,i.error=void 0},i.cancelSubisdiary=function(){i.updSubsi=!1,i.subsidiary=void 0,i.success=void 0,i.error=void 0},i.products=function(a){b.path("/products/products/"+a.id)},function(){f()}()}]),angular.module("integridadUiApp").controller("ProductsCtrl",["_","$localStorage","$location","productService","utilStringService","projectService","subsidiaryService","productTypeService","messurementListService","brandService","lineService","groupService","subgroupService","$routeParams",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){function o(){s.loading=!0,s.messurements=i.getMessurementList(),h.getproductTypesLazy().then(function(a){s.productTypes=a})["catch"](function(a){s.loading=!1,s.error=a.data}),n.subsidiaryId?d.getLazyBySusidiaryId(n.subsidiaryId).then(function(a){s.productList=a,s.loading=!1})["catch"](function(a){s.loading=!1,s.error=a.data}):d.getLazyByProjectId(b.user.subsidiary.userClient.id).then(function(a){s.productList=a,s.loading=!1})["catch"](function(a){s.loading=!1,s.error=a.data})}function p(c){g.getByProjectId(b.user.subsidiary.userClient.id).then(function(b){s.subsidiaries=b,c&&a.each(s.subsidiaries,function(b){a.each(s.product.productBySubsidiaries,function(a){b.id===a.subsidiary.id&&a.active&&(b.cantidad=a.quantity,b.selected=!0)})})})["catch"](function(a){s.loading=!1,s.error=a.data})}function q(){s.product.productBySubsidiaries=s.productBySubsidiaries,d.create(s.product).then(function(a){s.product=void 0,s.selectedGroup=void 0,s.selectedLine=void 0,s.wizard=0,o(),s.error=void 0,s.success="Resgistro realizado con exito"})["catch"](function(a){s.loading=!1,s.error=a.data})}function r(b){a.each(s.product.productBySubsidiaries,function(a){a.active=!1}),a.each(s.productBySubsidiaries,function(a){s.product.productBySubsidiaries.push(a)}),d.update(s.product).then(function(a){s.product=void 0,s.selectedGroup=void 0,s.selectedLine=void 0,s.wizard=0,o(),s.error=void 0,b?s.success="Resgistro eliminado con exito":s.success="Resgistro actualizado con exito"})["catch"](function(a){s.loading=!1,s.error=a.data})}var s=this;s.loading=!1,s.product=void 0,s.productList=void 0,s.subsidiaryId=void 0,s.productTypes=void 0,s.messurements=void 0,s.subsidiaries=void 0,s.brands=void 0,s.lineas=void 0,s.groups=void 0,s.subGroups=void 0,s.productBySubsidiaries=[],s.wizard=0,s.editProduct=function(b){s.selectedGroup=b.subgroup.groupLine,s.selectedLine=b.subgroup.groupLine.line,s.messurements=i.getMessurementList(),a.each(s.messurements,function(a){b.unitOfMeasurementAbbr===a.shortName&&(s.messurementSelected=a)}),s.getGroups(),s.getSubGroups(),p(!0),s.wizard=1,s.product=b},s.productCreate=function(){p(!1),s.success=void 0,s.error=void 0,s.productBySubsidiaries=[],s.wizard=1,s.product={userClient:b.user.subsidiary.userClient,productBySubsidiaries:[]}},s.changeSub=function(a){a.selected?a.cantidad=0:a.cantidad=void 0},s.getGroups=function(){l.getGroupsByLineLazy(s.selectedLine.id).then(function(a){s.groups=a})["catch"](function(a){s.loading=!1,s.error=a.data})},s.getSubGroups=function(){m.getSubGroupsByGroupLazy(s.selectedGroup.id).then(function(a){s.subGroups=a})["catch"](function(a){s.loading=!1,s.error=a.data})},s.createBrand=function(){s.newBrand={userClient:b.user.subsidiary.userClient,active:!0}},s.createLine=function(){s.newLine={userClient:b.user.subsidiary.userClient,active:!0,groupLines:[]}},s.createGroup=function(){s.newGroup={line:s.selectedLine,active:!0,products:[]}},s.createSubGroup=function(){s.newSubGroup={groupLine:s.selectedGroup,active:!0,subGroups:[]}},s.saveNewBrand=function(){j.create(s.newBrand).then(function(a){s.brands.push(a),s.product.brand=a,s.newBrand=void 0})["catch"](function(a){s.loading=!1,s.error=a.data})},s.saveNewLine=function(){k.create(s.newLine).then(function(a){s.lineas.push(a),s.selectedLine=a,s.newLine=void 0,s.groups=[]})["catch"](function(a){s.loading=!1,s.error=a.data})},s.saveNewGroup=function(){l.create(s.newGroup).then(function(a){s.groups.push(a),s.selectedGroup=a,s.newGroup=void 0,s.subGroups=[]})["catch"](function(a){s.loading=!1,s.error=a.data})},s.saveNewSubGroup=function(){m.create(s.newSubGroup).then(function(a){s.subGroups.push(a),s.product.subgroup=a,s.newSubGroup=void 0})["catch"](function(a){s.loading=!1,s.error=a.data})},s.wiz2=function(){s.productBySubsidiaries=[],s.product.unitOfMeasurementAbbr=s.messurementSelected.shortName,s.product.unitOfMeasurementFull=s.messurementSelected.name,a.each(s.subsidiaries,function(a){if(a.selected){var b={dateCreated:(new Date).getTime(),quantity:a.cantidad,subsidiary:a,active:!0};s.productBySubsidiaries.push(b)}}),j.getBrandsLazy(b.user.subsidiary.userClient.id).then(function(a){s.brands=a})["catch"](function(a){s.loading=!1,s.error=a.data}),k.getLinesLazy(b.user.subsidiary.userClient.id).then(function(a){s.lineas=a})["catch"](function(a){s.loading=!1,s.error=a.data}),s.wizard=2},s.wiz3=function(){s.wizard=3},s.save=function(){var a=e.isAnyInArrayStringEmpty([s.product.name]);a?s.error="Debe ingresar Nombre del producto":(s.loading=!0,void 0===s.product.id?q():r(!1))},s.remove=function(){s.product.active=!1,r(!0)},s.cancel=function(){s.wizard=0,s.product=void 0,s.selectedGroup=void 0,s.selectedLine=void 0,s.success=void 0,s.error=void 0},function(){o()}()}]),angular.module("app.services").factory("beforeunload",["$rootScope","$window",function(a,b){return b.onbeforeunload=function(b){var c={};a.$broadcast("onBeforeUnload",c)},b.onunload=function(){a.$broadcast("onUnload")},{}}]).run(["beforeunload",function(a){}]),angular.module("app.services").factory("authorizationService",["$localStorage",function(a){return{isLoggedIn:function(){return a.user?a.user:!1}}}]),angular.module("app.services").service("securityService",["$http","$base64",function(a,b){var c="https://integridad.herokuapp.com/integridad/v1",d={},e=b.encode("dan:12345");d.headers={"Content-Type":"application/json",Authorization:"Basic "+e},this.get=function(b){return a.get(c+b)},this["delete"]=function(b){return a["delete"](c+b)},this.post=function(b,e){var f=c+b;return a.post(f,e,d)},this.put=function(b,e){var f=c+b;return a.put(f,e,d)}}]),angular.module("app.services").service("utilStringService",function(){this.isStringEmpty=function(a){return a?!1:!0},this.isAnyInArrayStringEmpty=function(a){for(var b,c=0;c<a.length;c++){if(!a[c]){b=!0;break}b=!1}return b},this.randomString=function(){for(var a="",b="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",c=0;5>c;c++)a+=b.charAt(Math.floor(Math.random()*b.length));return a}}),angular.module("app.services").service("validatorService",function(){this.isCedulaValid=function(a){if("string"==typeof a&&10==a.length&&/^\d+$/.test(a)){var b=a.split("").map(Number),c=10*b[0]+b[1];if(c>=1&&(24>=c||30==c)){var d=b.pop(),e=b.reduce(function(a,b,c){return a-b*(2-c%2)%9-9*(9==b)},1e3)%10;return e===d}return!1}},this.isRucValid=function(a){for(var b,c=a.length,d=0,e=0;c>e;e++)b=a.substring(e,e+1),(0==b||1==b||2==b||3==b||4==b||5==b||6==b||7==b||8==b||9==b)&&(d+=1);if(d==c){for(;1!=a.substring(10,13);)return!1;for(;a.substring(0,2)>24;)return!1;return!0}return!1}}),angular.module("app.services").service("countryListService",function(){this.getCountryList=function(){var a=["Afghanistan","Albania","Algeria","Andorra","Angola","Anguilla","Antigua &amp; Barbuda","Argentina","Armenia","Aruba","Australia","Austria","Azerbaijan","Bahamas","Bahrain","Bangladesh","Barbados","Belarus","Belgium","Belize","Benin","Bermuda","Bhutan","Bolivia","Bosnia &amp; Herzegovina","Botswana","Brazil","British Virgin Islands","Brunei","Bulgaria","Burkina Faso","Burundi","Cambodia","Cameroon","Canada","Cape Verde","Cayman Islands","Chad","Chile","China","Colombia","Congo","Cook Islands","Costa Rica","Cote D Ivoire","Croatia","Cruise Ship","Cuba","Cyprus","Czech Republic","Denmark","Djibouti","Dominica","Dominican Republic","Ecuador","Egypt","El Salvador","Equatorial Guinea","Estonia","Ethiopia","Falkland Islands","Faroe Islands","Fiji","Finland","France","French Polynesia","French West Indies","Gabon","Gambia","Georgia","Germany","Ghana","Gibraltar","Greece","Greenland","Grenada","Guam","Guatemala","Guernsey","Guinea","Guinea Bissau","Guyana","Haiti","Honduras","Hong Kong","Hungary","Iceland","India","Indonesia","Iran","Iraq","Ireland","Isle of Man","Israel","Italy","Jamaica","Japan","Jersey","Jordan","Kazakhstan","Kenya","Kuwait","Kyrgyz Republic","Laos","Latvia","Lebanon","Lesotho","Liberia","Libya","Liechtenstein","Lithuania","Luxembourg","Macau","Macedonia","Madagascar","Malawi","Malaysia","Maldives","Mali","Malta","Mauritania","Mauritius","Mexico","Moldova","Monaco","Mongolia","Montenegro","Montserrat","Morocco","Mozambique","Namibia","Nepal","Netherlands","Netherlands Antilles","New Caledonia","New Zealand","Nicaragua","Niger","Nigeria","Norway","Oman","Pakistan","Palestine","Panama","Papua New Guinea","Paraguay","Peru","Philippines","Poland","Portugal","Puerto Rico","Qatar","Reunion","Romania","Russia","Rwanda","Saint Pierre &amp; Miquelon","Samoa","San Marino","Satellite","Saudi Arabia","Senegal","Serbia","Seychelles","Sierra Leone","Singapore","Slovakia","Slovenia","South Africa","South Korea","Spain","Sri Lanka","St Kitts &amp; Nevis","St Lucia","St Vincent","St. Lucia","Sudan","Suriname","Swaziland","Sweden","Switzerland","Syria","Taiwan","Tajikistan","Tanzania","Thailand","Timor L'Este","Togo","Tonga","Trinidad &amp; Tobago","Tunisia","Turkey","Turkmenistan","Turks &amp; Caicos","Uganda","Ukraine","United Arab Emirates","United Kingdom","United States","United States Minor Outlying Islands","Uruguay","Uzbekistan","Venezuela","Vietnam","Virgin Islands (US)","Yemen","Zambia","Zimbabwe"];return a},this.getCitiesEcuador=function(){var a=["Ambato","Arajuno","Babahoyo","Bahía de Caráquez","Baños de Agua Santa","Cuenca","Coca","Durán","Esmeraldas","Guaranda","Guayaquil","Ibarra","La Libertad","Lago Agrio","Latacunga","Loja","Macas","Machala","Manta","Milagro","Nueva Loja","Portoviejo","Piñas","Pintag","Quevedo","Quito","Riobamba","Santo Domingo de los Colorados","Salinas","Shell Mera","Tulcán"];return a}}),angular.module("app.services").service("authService",["securityService",function(a){this.authUser=function(b){return a.post("/user/auth",b).then(function(a){return a.data})},this.registerUser=function(b){return a.post("/user",b).then(function(a){return a.data})},this.activeUser=function(b,c){return a.put("/user/"+b+"/"+c).then(function(a){return a.data})},this.updateUser=function(b){return a.put("/user",b).then(function(a){return a.data})},this.recoverUser=function(b){return a.post("/user/recover",b).then(function(a){return a.data})},this.getLazy=function(){return a.get("/user/lazy").then(function(a){return a.data})},this.getBosses=function(b,c){return a.get("/user/lazy/bosses/"+c+"/"+b).then(function(a){return a.data})}}]),angular.module("app.services").service("clientService",["securityService",function(a){this.create=function(b){return a.post("/client",b).then(function(a){return a.data})},this.update=function(b){return a.put("/client",b).then(function(a){return a.data})},this.getLazy=function(){return a.get("/client/lazy").then(function(a){return a.data})},this.getLazyByProjectId=function(b){return a.get("/client/lazy/"+b).then(function(a){return a.data})}}]),angular.module("app.services").service("permissionService",["securityService",function(a){this.getPermissions=function(b){return a.post("/user_type_permission/user_type",b).then(function(a){return a.data})}}]),angular.module("app.services").service("userTypeService",["securityService",function(a){this.getUserTypes=function(){return a.get("/user_type/lazy").then(function(a){return a.data})}}]),angular.module("app.services").service("subsidiaryService",["securityService",function(a){this.getByProjectId=function(b){return a.get("/subsidiary/user_client/"+b).then(function(a){return a.data})},this.getById=function(b){return a.get("/subsidiary/"+b).then(function(a){return a.data})}}]),angular.module("app.services").service("projectService",["securityService",function(a){this.create=function(b){return a.post("/project",b).then(function(a){return a.data})},this.update=function(b){return a.put("/project",b).then(function(a){return a.data})},this.getLazy=function(){return a.get("/project/lazy").then(function(a){return a.data})},this.getById=function(b){return a.get("/project/"+b).then(function(a){return a.data})},this.getNumberOfProjects=function(b){return a.get("/project//clients_number/"+b).then(function(a){return a.data})}}]),angular.module("app.services").service("productService",["securityService",function(a){this.create=function(b){return a.post("/product",b).then(function(a){return a.data})},this.update=function(b){return a.put("/product",b).then(function(a){return a.data})},this["delete"]=function(b){return a["delete"]("/product/"+b).then(function(a){return a.data})},this.getById=function(b){return a.get("/product/"+b).then(function(a){return a.data})},this.getLazy=function(){return a.get("/product/actives").then(function(a){return a.data})},this.getLazyByProjectId=function(b){return a.get("/product/actives/user_client/"+b).then(function(a){return a.data})},this.getLazyBySusidiaryId=function(b){return a.get("/product/actives/subsidiary/"+b).then(function(a){return a.data})}}]),angular.module("app.services").service("productTypeService",["securityService",function(a){this.getproductTypesLazy=function(){return a.get("/product_type/actives_lazy").then(function(a){return a.data})}}]),angular.module("app.services").service("messurementListService",function(){this.getMessurementList=function(){var a=[{shortName:"UND",name:"UNIDAD"},{shortName:"LT",name:"LITRO"},{shortName:"KL",name:"KILO"},{shortName:"LB",name:"LIBRA"},{shortName:"MT",name:"METRO"},{shortName:"GR",name:"GRAMO"
},{shortName:"GL",name:"GALON"}];return a}}),angular.module("app.services").service("brandService",["securityService",function(a){this.getBrandsLazy=function(b){return a.get("/brand/actives_lazy/"+b).then(function(a){return a.data})},this.create=function(b){return a.post("/brand",b).then(function(a){return a.data})}}]),angular.module("app.services").service("lineService",["securityService",function(a){this.getLinesLazy=function(b){return a.get("/line/actives_lazy/"+b).then(function(a){return a.data})},this.create=function(b){return a.post("/line",b).then(function(a){return a.data})}}]),angular.module("app.services").service("groupService",["securityService",function(a){this.getGroupsByLineLazy=function(b){return a.get("/group_line/actives_lazy/"+b).then(function(a){return a.data})},this.create=function(b){return a.post("/group_line",b).then(function(a){return a.data})}}]),angular.module("app.services").service("subgroupService",["securityService",function(a){this.getSubGroupsByGroupLazy=function(b){return a.get("/sub_group/actives_lazy/"+b).then(function(a){return a.data})},this.create=function(b){return a.post("/sub_group",b).then(function(a){return a.data})}}]),angular.module("app.services").service("cashierService",["securityService",function(a){this.getBySubsidiaryId=function(b){return a.get("/cashier/subsidiary/"+b).then(function(a){return a.data})}}]),angular.module("integridadUiApp").run(["$templateCache",function(a){"use strict";a.put("views/activate/activate.tpl.html",'<div class="panel panel-default"> <div class="panel-body"> <div class="row" ng-show="vm.errorActive"> <div class="form-group col-md-12"> <div class="alert alert-danger">{{vm.error}}</div> </div> </div> </div> </div>'),a.put("views/bills/bill.tpl.html",'<div style="width: 100%;height: 100%;top: 0px;left: 0px;position: fixed;display: block; z-index: 99; background: rgba(255, 255, 255, 0.3)" ng-show="vm.loading"> <div style="position: absolute;top: 15%;z-index: 100; width: 100%; text-align: center"> <div class="sk-circle"> <div class="sk-circle1 sk-child"></div> <div class="sk-circle2 sk-child"></div> <div class="sk-circle3 sk-child"></div> <div class="sk-circle4 sk-child"></div> <div class="sk-circle5 sk-child"></div> <div class="sk-circle6 sk-child"></div> <div class="sk-circle7 sk-child"></div> <div class="sk-circle8 sk-child"></div> <div class="sk-circle9 sk-child"></div> <div class="sk-circle10 sk-child"></div> <div class="sk-circle11 sk-child"></div> <div class="sk-circle12 sk-child"></div> </div> </div> </div> <div class="header"> <h4> Factura </h4> </div> <div class="row" ng-show="vm.error !== undefined"> <div class="form-group col-md-12"> <div class="alert alert-danger">{{vm.error}}</div> </div> </div> <div class="row" ng-show="vm.success !== undefined"> <div class="form-group col-md-12"> <div class="alert alert-success">{{vm.success}}</div> </div> </div> <div ng-show="vm.clientSelected === undefined"> <input ng-model="searchText" class="form-control" placeholder="Buscar"> <table class="table table-striped"> <thead> <tr> <th> C&oacute;digo </th> <th> Nombre </th> <th> Ruc / C&eacute;dula </th> <th> <button type="button" class="btn btn-primary" ng-click="vm.clientCreate()"> Crear Cliente </button> </th> </tr> </thead> <tbody> <tr ng-show="vm.clientList == 0"> <td colspan="4"> No hay clientes ingresados </td> </tr> <tr ng-repeat="clientPreSelect in vm.clientList | orderBy:name | filter:searchText"> <td>{{ clientPreSelect.codApp }}</td> <td>{{ clientPreSelect.name }}</td> <td>{{ clientPreSelect.identification }}</td> <td> <button type="button" class="btn btn-primary" ng-click="vm.clientSelect(clientPreSelect)"> Facturar </button> <button type="button" class="btn btn-primary" ng-click="vm.clientConsult(clientPreSelect)"> Consultar </button> </td> </tr> </tbody> </table> </div> <div ng-show="vm.clientSelected !== undefined"> <div class="panel panel-default"> <div class="panel-heading"> <b>Datos del Cliente</b> </div> <div class="panel-body"> <div class="row"> <div class="form-group col-md-6"> <b>FECHA: </b>{{vm.dateBill | date:\'dd/MM/yyyy\'}} </div> <div class="form-group col-md-6"> <b>NOMBRE: </b>{{vm.clientSelected.name}} </div> </div> <div class="row"> <div class="form-group col-md-6"> <b ng-if="vm.clientSelected.typeId === \'CED\'">CEDULA: </b> <b ng-if="vm.clientSelected.typeId === \'RUC\'">RUC: </b> {{vm.clientSelected.identification}} </div> <div class="form-group col-md-6"> <b>TELEFONO: </b>{{vm.clientSelected.phone}} </div> </div> <div class="row"> <div class="form-group col-md-12"> <b>DIRECCION: </b>{{vm.clientSelected.address}} </div> </div> <div class="row"> <div class="form-group col-md-12"> <b>NUMERO DE FACTURA: </b> {{vm.seqNumber}} &nbsp;&nbsp;&nbsp; <a data-toggle="modal" data-target="#modalEditBillNumber" ng-click="vm.verifyUser()"> Editar </a> </div> </div> <div class="row"> <div class="form-group col-md-12"> <b>PRECIO CONVENIDO: </b> <select ng-options="price as price.name for price in vm.prices" ng-model="vm.priceType" class="form-control" ng-change="vm.reCalculateTotal()"></select> </div> </div> </div> </div> <div class="panel panel-default"> <div class="panel-heading"> <b>Detalle</b> </div> <div class="panel-body"> <div class="row"> <div class="form-group col-md-12"> <table class="table table-striped"> <thead> <tr> <th> Producto </th> <th> Cantidad </th> <th> Valor unitario </th> <th> Valor Total </th> <th> <button type="button" class="btn btn-primary" ng-click="vm.addProduct()" data-toggle="modal" data-target="#modalAddProduct"> Agregar Producto </button> </th> </tr> </thead> <tbody> <tr ng-show="vm.clientList == 0"> <td colspan="4"> No hay detalles ingresados </td> </tr> <tr ng-repeat="detail in vm.bill.details"> <td>{{detail.product.name}}</td> <td>{{detail.quantity}}</td> <td>{{detail.costEach}}</td> <td>{{detail.total}}</td> <td> <button type="button" class="btn btn-primary" ng-click="vm.editDetail(detail, $index)" data-toggle="modal" data-target="#modalAddProduct"> Editar </button> <button type="button" class="btn btn-primary" ng-click="vm.removeDetail($index)"> Eliminar </button> </td> </tr> <tr> <td></td> <td></td> <td><b>SUBTOTAL: </b></td> <td>{{vm.bill.subTotal}}</td> <td> </td> </tr> <tr> <td></td> <td></td> <td><b>TOTAL: </b></td> <td>{{vm.bill.total}}</td> <td> </td> </tr> </tbody> </table> </div> </div> </div> </div> <div id="modalAddProduct" class="modal fade" role="dialog"> <div class="modal-dialog"> <div class="modal-content"> <div class="modal-header"> <button type="button" class="close" data-dismiss="modal" ng-click="vm.productToAdd=undefined">&times;</button> <h4 class="modal-title">Agregar Producto</h4> </div> <div class="modal-body"> <div class="row"> <div class="col-md-12" ng-if="vm.productToAdd === undefined"> <input ng-model="searchText" class="form-control" placeholder="Buscar"> <table class="table table-striped"> <thead> <tr> <th> Nombre </th> <th> Cantidad Disponible</th> <th> Precio Unitario $</th> <th> </th> </tr> </thead> <tbody> <tr ng-show="vm.productList == 0"> <td colspan="4"> No hay proyectos ingresados </td> </tr> <tr ng-repeat="productSelect in vm.productList | orderBy:name | filter:searchText"> <td>{{ productSelect.name }}</td> <td>{{ productSelect.quantity }}</td> <td>{{ vm.getCost(\'1.\'+ productSelect[vm.priceType.cod], productSelect.averageCost) }}</td> <td> <button type="button" class="btn btn-primary" ng-click="vm.productToAdd = productSelect; vm.quantity = 1"> Seleccionar </button> </td> </tr> </tbody> </table> </div> <div class="col-md-12" ng-if="vm.productToAdd !== undefined"> <div class="panel panel-default"> <div class="panel-heading"> <b>{{vm.productToAdd.name}}</b> </div> <div class="panel-body"> <div class="row" ng-show="vm.errorQuantity"> <div class="form-group col-md-12"> <div class="alert alert-danger">{{vm.errorQuantity}}</div> </div> </div> <div class="row"> <div class="form-group col-md-6"> <b>CANTIDAD DISPONIBLE: </b><h4>{{vm.productToAdd.quantity}}</h4> </div> <div class="form-group col-md-6"> <b>CANTIDAD A VENDER: </b> <input type="text" onkeypress="return ((event.which >= 48 && event.which <= 57) || (event.keyCode == 9 || event.keyCode == 8))" ng-model="vm.quantity" class="form-control" maxlength="9"> </div> </div> </div> <div class="panel-footer"> <button type="button" class="btn btn-primary" ng-click="vm.productToAdd = undefined; vm.quantity = undefined"> Cancelar </button> </div> </div> </div> </div> </div> <div class="modal-footer"> <button type="button" class="btn btn-primary" ng-click="vm.acceptProduct(true)" ng-disabled="vm.productToAdd === undefined"> Aceptar y Cerrar </button> <button type="button" class="btn btn-primary" ng-click="vm.acceptProduct(false)" ng-disabled="vm.productToAdd === undefined"> Aceptar y Agreagar Mas productos </button> </div> </div> </div> </div> <div id="modalEditBillNumber" class="modal fade" role="dialog"> <div class="modal-dialog"> <div class="modal-content" ng-show="vm.isEmp"> <div class="modal-header"> <button type="button" class="close" data-dismiss="modal">&times;</button> <h4 class="modal-title">Editar N&uacute;mero de Factura</h4> </div> <div class="modal-body"> <div class="row" ng-show="vm.errorValidateAdm !== undefined"> <div class="form-group col-md-12"> <div class="alert alert-danger">{{vm.errorValidateAdm}}</div> </div> </div> <div class="row"> <div class="form-group col-md-12"> <b>CLAVE ADMINISTRADOR: </b> <input type="password" ng-model="vm.passwordAdm" class="form-control"> </div> </div> <div class="row"> <div class="form-group col-md-12"> <button type="button" class="btn btn-primary" ng-click="vm.validateAdm()" ng-disabled="vm.passwordAdm === undefined"> Validar </button> </div> </div> </div> </div> <div class="modal-content" ng-show="!vm.isEmp"> <div class="modal-header"> <button type="button" class="close" data-dismiss="modal" ng-click="vm.productToAdd=undefined">&times;</button> <h4 class="modal-title">Editar N&uacute;mero de Factura</h4> </div> <div class="modal-body"> <div class="row"> <div class="form-group col-md-12"> <b>NUEVO NUMERO DE FACTURA: </b> </div> </div> <div class="row"> <div class="form-group col-md-2"> {{vm.seqNumberFirstPart}}- </div> <div class="form-group col-md-10"> <input type="text" onkeypress="return ((event.which >= 48 && event.which <= 57) || (event.keyCode == 9 || event.keyCode == 8))" ng-model="vm.seqNumberSecondPart" class="form-control" maxlength="10"> </div> </div> </div> <div class="modal-footer"> <button type="button" class="btn btn-primary" ng-click="vm.acceptNewSeq()" data-dismiss="modal"> Aceptar </button> <button type="button" class="btn btn-primary" data-dismiss="modal"> Cancelar </button> </div> </div> </div> </div></div>'),a.put("views/clients/clients.tpl.html",'<div style="width: 100%;height: 100%;top: 0px;left: 0px;position: fixed;display: block; z-index: 99; background: rgba(255, 255, 255, 0.3)" ng-show="vm.loading"> <div style="position: absolute;top: 15%;z-index: 100; width: 100%; text-align: center"> <div class="sk-circle"> <div class="sk-circle1 sk-child"></div> <div class="sk-circle2 sk-child"></div> <div class="sk-circle3 sk-child"></div> <div class="sk-circle4 sk-child"></div> <div class="sk-circle5 sk-child"></div> <div class="sk-circle6 sk-child"></div> <div class="sk-circle7 sk-child"></div> <div class="sk-circle8 sk-child"></div> <div class="sk-circle9 sk-child"></div> <div class="sk-circle10 sk-child"></div> <div class="sk-circle11 sk-child"></div> <div class="sk-circle12 sk-child"></div> </div> </div> </div> <div class="header"> <h4> Clientes </h4> </div> <div class="row" ng-show="vm.error !== undefined"> <div class="form-group col-md-12"> <div class="alert alert-danger">{{vm.error}}</div> </div> </div> <div class="row" ng-show="vm.success !== undefined"> <div class="form-group col-md-12"> <div class="alert alert-success">{{vm.success}}</div> </div> </div> <div ng-show="vm.client === undefined"> <input ng-model="searchText" class="form-control" placeholder="Buscar"> <table class="table table-striped"> <thead> <tr> <th> C&oacute;digo </th> <th> Nombre </th> <th> Ruc / C&eacute;dula </th> <th> <button type="button" class="btn btn-primary" ng-click="vm.clientCreate()"> Crear </button> </th> </tr> </thead> <tbody> <tr ng-show="vm.clientList == 0"> <td colspan="4"> No hay clientes ingresados </td> </tr> <tr ng-repeat="clientEdit in vm.clientList | orderBy:name | filter:searchText"> <td>{{ clientEdit.codApp }}</td> <td>{{ clientEdit.name }}</td> <td>{{ clientEdit.identification }}</td> <td> <button type="button" class="btn btn-primary" ng-click="vm.clientEdit(clientEdit)"> Editar </button> <button type="button" class="btn btn-primary" ng-click="vm.client=clientEdit" data-toggle="modal" data-target="#modalEliminar"> Eliminar </button> </td> </tr> </tbody> </table> </div> <div class="panel panel-default" ng-show="vm.client"> <div class="panel-body"> <div class="row"> <div class="form-group col-md-12"> <label>Nombre *: </label> <input type="text" ng-model="vm.client.name" class="form-control"> </div> </div> <div class="row"> <div class="form-group col-md-6"> <label>Tel&eacute;fono: (incluir c&oacute;digo de provincia ej: 02) </label> <input type="text" onkeypress="return ((event.which >= 48 && event.which <= 57) || (event.keyCode == 9 || event.keyCode == 8))" ng-model="vm.client.phone" class="form-control" maxlength="9"> </div> <div class="form-group col-md-6"> <label>Tel&eacute;fono celular: </label> <input type="text" onkeypress="return ((event.which >= 48 && event.which <= 57) || (event.keyCode == 9 || event.keyCode == 8))" ng-model="vm.client.celPhone" class="form-control" maxlength="10"> </div> </div> <div class="row"> <div class="form-group col-md-6"> <label>Pa&iacute;s: </label> <select ng-options="country for country in vm.countryList" ng-model="vm.client.country" class="form-control" ng-change="vm.validateEcuador()"></select> </div> <div class="form-group col-md-6" ng-show="vm.client.country === \'Ecuador\'"> <label>Ciudad: </label> <select ng-options="city for city in vm.citiesList" ng-model="vm.client.city" class="form-control"></select> </div> <div class="form-group col-md-6" ng-show="vm.client.country !== \'Ecuador\'"> <label>Ciudad: </label> <input type="text" ng-model="vm.client.city" class="form-control"> </div> </div> <div class="row"> <div class="form-group col-md-6"> <label>Tipo de Identificacion: </label> <select ng-options="item.code as item.name for item in [{code:\'CED\', name:\'CEDULA\'}, {code:\'RUC\', name:\'RUC\'}]" ng-model="vm.client.typeId" class="form-control"></select> </div> <div class="form-group col-md-6" ng-show="vm.client.typeId === \'CED\'"> <label>C&eacute;dula *: </label> <input type="text" onkeypress="return ((event.which >= 48 && event.which <= 57) || (event.keyCode == 9 || event.keyCode == 8))" ng-model="vm.client.identification" class="form-control" maxlength="10"> </div> <div class="form-group col-md-6" ng-show="vm.client.typeId === \'RUC\'"> <label>Ruc *: </label> <input type="text" onkeypress="return ((event.which >= 48 && event.which <= 57) || (event.keyCode == 9 || event.keyCode == 8))" ng-model="vm.client.identification" class="form-control" maxlength="13"> </div> </div> <div class="row"> <div class="form-group col-md-12"> <label>E-mail: </label> <input type="text" ng-model="vm.client.email" class="form-control"> </div> </div> <div class="row"> <div class="form-group col-md-12"> <label>Direcci&oacute;n: </label> <input type="text" ng-model="vm.client.address" class="form-control"> </div> </div> <!-- <div class="row">\n      <div class="form-group col-md-12">\n        <label>Intersecci&oacute;n: </label>\n        <input type="text" ng-model="vm.client.address2" class="form-control">\n      </div>\n    </div> --> <div class="row"> <div class="form-group col-md-6"> <label>C&oacute;digo Contabilidad: </label> <input type="text" ng-model="vm.client.codConta" class="form-control"> </div> <div class="form-group col-md-6"> <label>Contacto: </label> <input type="text" ng-model="vm.client.contact" class="form-control"> </div> </div> <div class="row"> <div class="form-group col-md-6"> <label>C&oacute;digo : </label> <input type="text" ng-model="vm.client.codApp" class="form-control"> </div> </div> </div> <div class="panel-footer"> <button type="button" class="btn btn-primary" ng-click="vm.save()" ng-disabled="vm.client.name === undefined || vm.client.identification === undefined ||\n      vm.client.codApp === undefined"> Guardar </button> <button type="button" class="btn btn-success" ng-click="vm.cancel()"> Cancelar </button> </div> </div> <div id="modalEliminar" class="modal fade" role="dialog"> <div class="modal-dialog"> <div class="modal-content"> <div class="modal-header"> <button type="button" class="close" data-dismiss="modal" ng-click="vm.client=undefined">&times;</button> <h4 class="modal-title">Advertencia</h4> </div> <div class="modal-body"> <div class="row"> <div class="col-md-12"> Esta seguro que desea Eliminar el cliente {{vm.client.name}} con identificacion: {{vm.client.identification}} </div> </div> </div> <div class="modal-footer"> <button type="button" class="btn btn-primary" ng-click="vm.remove()" data-dismiss="modal"> Eliminar </button> </div> </div> </div> </div>'),a.put("views/home/home.tpl.html",'<div class="panel panel-default"> <div class="panel-body"> <div class="row"> <div class="col-md-8 col-md-offset-2"> <img src="images/imagen1.8283985a.jpg" style="width: 100%"><br> </div> </div> <div class="row"> <div class="form-group col-md-12 text-center"> <span> <h3>BIENVENIDO AL SISTEMA CONTABLE INTEGRIDAD.<br>Un programa inteligente, hecho para servir.</h3> <span> </span></span></div> </div> </div> </div>'),a.put("views/main.html",'<div style="width: 100%;height: 100%;top: 0px;left: 0px;position: fixed;display: block; z-index: 99; background: rgba(255, 255, 255, 0.3)" ng-show="vm.loading"> <div style="position: absolute;top: 15%;z-index: 100; width: 100%; text-align: center"> <div class="sk-circle"> <div class="sk-circle1 sk-child"></div> <div class="sk-circle2 sk-child"></div> <div class="sk-circle3 sk-child"></div> <div class="sk-circle4 sk-child"></div> <div class="sk-circle5 sk-child"></div> <div class="sk-circle6 sk-child"></div> <div class="sk-circle7 sk-child"></div> <div class="sk-circle8 sk-child"></div> <div class="sk-circle9 sk-child"></div> <div class="sk-circle10 sk-child"></div> <div class="sk-circle11 sk-child"></div> <div class="sk-circle12 sk-child"></div> </div> </div> </div> <div class="row" ng-show="vm.init"> <div class="col-md-8 col-md-offset-2"> <img src="images/zolutions1.36c9be71.jpg"><br> </div> </div> <div class="panel panel-default" ng-show="vm.init && !vm.recover"> <form> <div class="panel-body"> <div class="row" ng-show="vm.error !== undefined"> <div class="form-group col-md-12"> <div class="alert alert-danger">{{vm.error}}</div> </div> </div> <div class="row" ng-show="vm.success !== undefined"> <div class="form-group col-md-12"> <div class="alert alert-success">{{vm.success}}</div> </div> </div> <div class="row"> <div class="form-group col-md-6"> <label>E-mail: </label> <input type="text" ng-model="vm.email" name="email" id="email" class="form-control"> </div> <div class="form-group col-md-6"> <label>Password: </label> <input type="password" ng-model="vm.password" class="form-control"> </div> </div> </div> <div class="panel-footer"> <button class="btn btn-primary" ng-click="vm.login()" ng-disabled="vm.email === undefined || vm.password === undefined"> Ingresar </button> <!-- <button type="button" class="btn btn-success"\n      ng-click="vm.init = false; vm.userIntegridad = {}; vm.success=undefined; vm.error=undefined">\n        Registrarse\n      </button> --> <button type="button" class="btn btn-warning" ng-click="vm.recover = true; vm.success=undefined; vm.error=undefined"> Olvid&eacute; mi Password </button> </div> </form> </div> <div class="panel panel-default" ng-show="vm.recover"> <div class="panel-body"> <div class="row" ng-show="vm.error !== undefined"> <div class="form-group col-md-12"> <div class="alert alert-danger">{{vm.error}}</div> </div> </div> <div class="row" ng-show="vm.success !== undefined"> <div class="form-group col-md-12"> <div class="alert alert-success">{{vm.success}}</div> </div> </div> <div class="row"> <div class="form-group col-md-12"> <label>Ingrese E-mail de la cuenta a recuperar: </label> <input type="text" ng-model="vm.email" class="form-control"> </div> </div> </div> <div class="panel-footer"> <button type="button" class="btn btn-primary" ng-click="vm.recoverPass()" ng-disabled="vm.email === undefined"> Recuperar </button> <button type="button" class="btn btn-success" ng-click="vm.recover = false; vm.userIntegridad = {}; vm.success=undefined; vm.error=undefined"> Cancelar </button> </div> </div> <div class="panel panel-default" ng-show="!vm.init"> <div class="panel-body"> <div class="row" ng-show="vm.error !== undefined"> <div class="form-group col-md-12"> <div class="alert alert-danger">{{vm.error}}</div> </div> </div> <div class="row" ng-show="vm.success !== undefined"> <div class="form-group col-md-12"> <div class="alert alert-success">{{vm.success}}</div> </div> </div> <div class="row"> <div class="form-group col-md-6"> <label>Nombre *: </label> <input type="text" ng-model="vm.userIntegridad.firstName" class="form-control"> </div> <div class="form-group col-md-6"> <label>Apellido *: </label> <input type="text" ng-model="vm.userIntegridad.lastName" class="form-control"> </div> </div> <div class="row"> <div class="form-group col-md-6"> <label>Tel&eacute;fono: (incluir c&oacute;digo de provincia ej: 02) </label> <input type="text" onkeypress="return ((event.which >= 48 && event.which <= 57) || (event.keyCode == 9 || event.keyCode == 8))" ng-model="vm.userIntegridad.phone" class="form-control" maxlength="9"> </div> <div class="form-group col-md-6"> <label>Tel&eacute;fono celular: </label> <input type="text" onkeypress="return ((event.which >= 48 && event.which <= 57) || (event.keyCode == 9 || event.keyCode == 8))" ng-model="vm.userIntegridad.celPhone" class="form-control" maxlength="10"> </div> </div> <div class="row"> <div class="form-group col-md-6"> <label>Fecha de Nacimiento</label> <div class="input-group date" id="pickerBirthday"> <input type="text" class="form-control input-group-addon"> <span class="input-group-addon"><span class="glyphicon glyphicon-calendar"></span> </div> <script>var defaultDate = new Date();\n          $(\'#pickerBirthday\').datetimepicker({\n            format: "DD/MM/YY",\n            defaultDate: defaultDate\n          });</script> </div> </div> <div class="row"> <div class="form-group col-md-6"> <label>Tipo de Identificacion: </label> <select ng-options="item for item in [\'Cedula\', \'Ruc\']" ng-model="vm.typeId" class="form-control"></select> </div> <div class="form-group col-md-6" ng-show="vm.typeId === \'Cedula\'"> <label>C&eacute;dula *: </label> <input type="text" onkeypress="return ((event.which >= 48 && event.which <= 57) || (event.keyCode == 9 || event.keyCode == 8))" ng-model="vm.userIntegridad.cedula" class="form-control" maxlength="10"> </div> <div class="form-group col-md-6" ng-show="vm.typeId === \'Ruc\'"> <label>Ruc *: </label> <input type="text" onkeypress="return ((event.which >= 48 && event.which <= 57) || (event.keyCode == 9 || event.keyCode == 8))" ng-model="vm.userIntegridad.ruc" class="form-control" maxlength="13"> </div> </div> <div class="row"> <div class="form-group col-md-12"> <label>Direcci&oacute;n: </label> <input type="text" ng-model="vm.userIntegridad.address1" class="form-control"> </div> </div> <!-- <div class="row">\n      <div class="form-group col-md-12">\n        <label>Intersecci&oacute;n: </label>\n        <input type="text" ng-model="vm.userIntegridad.address2" class="form-control">\n      </div>\n    </div> --> <div class="row"> <div class="form-group col-md-6"> <label>E-mail *: </label> <input type="text" ng-model="vm.userIntegridad.email" class="form-control"> </div> <div class="form-group col-md-6"> <label>Password *: </label> <input type="password" ng-model="vm.userIntegridad.password" class="form-control"> </div> </div> </div> <div class="panel-footer"> <button type="button" class="btn btn-primary" ng-click="vm.register()" ng-disabled="vm.userIntegridad.email === undefined || vm.userIntegridad.password === undefined"> Registrar </button> <button type="button" class="btn btn-success" ng-click="vm.init = true; vm.userIntegridad = {}; vm.success=undefined; vm.error=undefined"> Cancelar </button> </div> </div> <div id="modalChangePassword" class="modal fade" role="dialog"> <div class="modal-dialog"> <div class="modal-content"> <div class="modal-header"> <h4 class="modal-title">Cambie su clave Temporal</h4> </div> <div class="modal-body"> <div class="row"> <div class="form-group col-md-6"> <label>Nuevo Password</label> <input type="password" class="form-control" id="password" ng-model="vm.newPass"> </div> <div class="form-group col-md-6"> <label>Confirmar nuevo Password</label> <input type="password" class="form-control" id="passwordConfirmation" ng-model="vm.passConfirmation" ng-change="vm.validatePassword()"> </div> </div> <div class="row" ng-show="vm.passwordNotMatch"> <div class="form-group col-md-12"> <div class="alert alert-danger">El nuevo password no coincide con la confirmacion</div> </div> </div> </div> <div class="modal-footer"> <div ng-if="vm.passConfirmation"> <button class="btn btn-primary" ng-click="vm.update()" data-dismiss="modal" ng-disabled="vm.passwordNotMatch">Cambiar e Ingresar</button> </div> </div> </div> </div> </div>'),a.put("views/products/products.tpl.html",'<div style="width: 100%;height: 100%;top: 0px;left: 0px;position: fixed;display: block; z-index: 99; background: rgba(255, 255, 255, 0.3)" ng-show="vm.loading"> <div style="position: absolute;top: 15%;z-index: 100; width: 100%; text-align: center"> <div class="sk-circle"> <div class="sk-circle1 sk-child"></div> <div class="sk-circle2 sk-child"></div> <div class="sk-circle3 sk-child"></div> <div class="sk-circle4 sk-child"></div> <div class="sk-circle5 sk-child"></div> <div class="sk-circle6 sk-child"></div> <div class="sk-circle7 sk-child"></div> <div class="sk-circle8 sk-child"></div> <div class="sk-circle9 sk-child"></div> <div class="sk-circle10 sk-child"></div> <div class="sk-circle11 sk-child"></div> <div class="sk-circle12 sk-child"></div> </div> </div> </div> <div class="header"> <h4> Productos </h4> </div> <div class="row" ng-show="vm.error !== undefined"> <div class="form-group col-md-12"> <div class="alert alert-danger">{{vm.error}}</div> </div> </div> <div class="row" ng-show="vm.success !== undefined"> <div class="form-group col-md-12"> <div class="alert alert-success">{{vm.success}}</div> </div> </div> <div ng-show="vm.wizard === 0"> <input ng-model="searchText" class="form-control" placeholder="Buscar"> <table class="table table-striped"> <thead> <tr> <th> Nombre </th> <th> <button type="button" class="btn btn-primary" ng-click="vm.productCreate()"> Crear </button> </th> </tr> </thead> <tbody> <tr ng-show="vm.productList == 0"> <td colspan="4"> No hay proyectos ingresados </td> </tr> <tr ng-repeat="productEdit in vm.productList | orderBy:name | filter:searchText"> <td>{{ productEdit.name }}</td> <td> <button type="button" class="btn btn-primary" ng-click="vm.editProduct(productEdit)"> Editar </button> <button type="button" class="btn btn-primary" ng-click="vm.product=productEdit" data-toggle="modal" data-target="#modalEliminar"> Eliminar </button> </td> </tr> </tbody> </table> </div> <div class="panel panel-default" ng-show="vm.wizard === 1"> <div class="panel-body"> <div class="row"> <div class="form-group col-md-12"> <label>Nombre *: </label> <input type="text" ng-model="vm.product.name" class="form-control"> </div> </div> <div class="row"> <div class="form-group col-md-4"> <label>C&oacute;digo: </label> <input type="text" ng-model="vm.product.codeIntegridad" class="form-control"> </div> <div class="form-group col-md-4"> <label>Tipo de Producto: </label> <select ng-options="type as type.name for type in vm.productTypes  | orderBy:\'name\'  track by type.id" ng-model="vm.product.productType" class="form-control"> </select> </div> <div class="form-group col-md-4"> <label>Medida: </label> <select ng-options="mess as mess.name for mess in vm.messurements  | orderBy:\'name\'  track by mess.shortName" ng-model="vm.messurementSelected" ng-change="vm.setUnitOfMeasurementFull()" class="form-control"> </select> </div> </div> <div class="row"> <div class="form-group col-md-10"> <label>Sucursales: </label> <span ng-repeat="sub in vm.subsidiaries" class="list-group-item"> <div class="row"> <div class="form-group col-sm-7"> <input class="pull-right" ng-model="sub.selected" type="checkbox" ng-change="vm.changeSub(sub)"> {{ sub.name }} </div> <div class="form-group col-sm-2"> Cantidad: </div> <div class="form-group col-sm-3"> <input type="text" onkeypress="return ((event.which >= 46 && event.which <= 57) || (event.keyCode == 9 || event.keyCode == 8))" ng-model="sub.cantidad" class="form-control" ng-disabled="!sub.selected"> </div> </div> </span> </div> </div> <div class="row"> <div class="form-group col-md-12"> <label>Caracter&iacute;sticas: </label> <textarea class="form-control" rows="3" id="comment" ng-model="vm.product.characteristics"></textarea> </div> </div> <div class="row"> <div class="form-group col-md-6"> <label>C&oacute;digo de Barras: </label> <input type="text" onkeypress="return ((event.which >= 46 && event.which <= 57) || (event.keyCode == 9 || event.keyCode == 8))" ng-model="vm.product.barCode" class="form-control" maxlength="9"> </div> </div> </div> <div class="panel-footer"> <button type="button" class="btn btn-primary" ng-click="vm.wiz2()" ng-disabled="vm.product.name === undefined"> Siguiente </button> <button type="button" class="btn btn-success" ng-click="vm.cancel()"> Cancelar </button> </div> </div> <div class="panel panel-default" ng-show="vm.wizard === 2"> <div class="panel-body"> <div class="row"> <div class="form-group col-md-9"> <label>Marca: </label> <select ng-options="brand as brand.name for brand in vm.brands  | orderBy:\'name\'  track by brand.id" ng-model="vm.product.brand" class="form-control"> </select> </div> <div class="form-group col-md-3"> <label>&nbsp;</label> <button type="button" class="form-control btn btn-primary" ng-click="vm.createBrand()" data-toggle="modal" data-target="#modalCreateBrand"> Crear Marca </button> </div> </div> <div class="row"> <div class="form-group col-md-9"> <label>L&iacute;nea: </label> <select ng-options="lin as lin.name for lin in vm.lineas  | orderBy:\'name\'  track by lin.id" ng-model="vm.selectedLine" class="form-control" ng-change="vm.getGroups()"> </select> </div> <div class="form-group col-md-3"> <label>&nbsp;</label> <button type="button" class="form-control btn btn-primary" ng-click="vm.createLine()" data-toggle="modal" data-target="#modalCreateLine" ng-disabled="vm.product.brand === undefined"> Crear L&iacute;nea </button> </div> </div> <div class="row"> <div class="form-group col-md-9"> <label>Grupo: </label> <select ng-options="group as group.name for group in vm.groups  | orderBy:\'name\'  track by group.id" ng-model="vm.selectedGroup" class="form-control" ng-change="vm.getSubGroups()"> </select> </div> <div class="form-group col-md-3"> <label>&nbsp;</label> <button type="button" class="form-control btn btn-primary" ng-click="vm.createGroup()" data-toggle="modal" data-target="#modalCreateGroup" ng-disabled="vm.selectedLine === undefined"> Crear Grupo </button> </div> </div> <div class="row"> <div class="form-group col-md-9"> <label>Subgrupo: </label> <select ng-options="subgroup as subgroup.name for subgroup in vm.subGroups  | orderBy:\'name\'  track by subgroup.id" ng-model="vm.product.subgroup" class="form-control"> </select> </div> <div class="form-group col-md-3"> <label>&nbsp;</label> <button type="button" class="form-control btn btn-primary" ng-click="vm.createSubGroup()" data-toggle="modal" data-target="#modalCreateSubGroup" ng-disabled="vm.selectedGroup === undefined"> Crear Subgrupo </button> </div> </div> </div> <div class="panel-footer"> <button type="button" class="btn btn-primary" ng-click="vm.wiz3()"> Siguiente </button> <button type="button" class="btn btn-primary" ng-click="vm.wizard = 1"> Atr&aacute;s </button> <button type="button" class="btn btn-success" ng-click="vm.cancel()"> Cancelar </button> </div> </div> <div class="panel panel-default" ng-show="vm.wizard === 3"> <div class="panel-body"> <div class="row"> <div class="form-group col-md-6"> <label>M&aacute;ximo / M&iacute;nimo: </label> <input type="text" onkeypress="return ((event.which >= 46 && event.which <= 57) || (event.keyCode == 9 || event.keyCode == 8))" ng-model="vm.product.maxMinimun" class="form-control" maxlength="9">  </div> <div class="form-group col-md-6"> <label>Costo (promedio): </label> <input type="text" onkeypress="return ((event.which >= 46 && event.which <= 57) || (event.keyCode == 9 || event.keyCode == 8))" ng-model="vm.product.averageCost" class="form-control" maxlength="9">  </div> </div> <div class="row"> <div class="form-group col-md-6"> <label>Ganancia % efectivo: </label> <input type="text" onkeypress="return ((event.which >= 46 && event.which <= 57) || (event.keyCode == 9 || event.keyCode == 8))" ng-model="vm.product.cashPercentage" class="form-control" maxlength="9">  </div> <div class="form-group col-md-6"> <label>Ganancia % cr&eacute;dito: </label> <input type="text" onkeypress="return ((event.which >= 46 && event.which <= 57) || (event.keyCode == 9 || event.keyCode == 8))" ng-model="vm.product.creditPercentage" class="form-control" maxlength="9">  </div> </div> <div class="row"> <div class="form-group col-md-6"> <label>Ganancia % tarjeta: </label> <input type="text" onkeypress="return ((event.which >= 46 && event.which <= 57) || (event.keyCode == 9 || event.keyCode == 8))" ng-model="vm.product.cardPercentage" class="form-control" maxlength="9">  </div> <div class="form-group col-md-6"> <label>Ganancia % mayorista: </label> <input type="text" onkeypress="return ((event.which >= 46 && event.which <= 57) || (event.keyCode == 9 || event.keyCode == 8))" ng-model="vm.product.majorPercentage" class="form-control" maxlength="9">  </div> </div> </div> <div class="panel-footer"> <button type="button" class="btn btn-primary" ng-click="vm.save()"> Guardar </button> <button type="button" class="btn btn-primary" ng-click="vm.wizard = 2"> Atr&aacute;s </button> <button type="button" class="btn btn-success" ng-click="vm.cancel()"> Cancelar </button> </div> </div> <div id="modalEliminar" class="modal fade" role="dialog"> <div class="modal-dialog"> <div class="modal-content"> <div class="modal-header"> <button type="button" class="close" data-dismiss="modal" ng-click="vm.product=undefined">&times;</button> <h4 class="modal-title">Advertencia</h4> </div> <div class="modal-body"> <div class="row"> <div class="col-md-12"> Esta seguro que desea Eliminar el Producto {{vm.product.name}} </div> </div> </div> <div class="modal-footer"> <button type="button" class="btn btn-primary" ng-click="vm.remove()" data-dismiss="modal"> Eliminar </button> </div> </div> </div> </div> <div id="modalCreateBrand" class="modal fade" role="dialog"> <div class="modal-dialog"> <div class="modal-content"> <div class="modal-header"> <button type="button" class="close" data-dismiss="modal" ng-click="vm.newBrand=undefined">&times;</button> <h4 class="modal-title">Crear Marca</h4> </div> <div class="modal-body"> <div class="row"> <div class="form-group col-md-12"> <label>Nombre : </label> <input type="text" ng-model="vm.newBrand.name" class="form-control"> </div> </div> <div class="row"> <div class="form-group col-md-6"> <label>C&oacute;digo: </label> <input type="text" ng-model="vm.newBrand.code" class="form-control"> </div> </div> </div> <div class="modal-footer"> <button type="button" class="btn btn-primary" ng-click="vm.saveNewBrand()" data-dismiss="modal"> Aceptar </button> <button type="button" class="btn btn-success" ng-click="vm.newBrand = undefined" data-dismiss="modal"> Cancelar </button> </div> </div> </div> </div> <div id="modalCreateLine" class="modal fade" role="dialog"> <div class="modal-dialog"> <div class="modal-content"> <div class="modal-header"> <button type="button" class="close" data-dismiss="modal" ng-click="vm.newLine=undefined">&times;</button> <h4 class="modal-title">Crear L&iacute;nea</h4> </div> <div class="modal-body"> <div class="row"> <div class="form-group col-md-12"> <label>Nombre : </label> <input type="text" ng-model="vm.newLine.name" class="form-control"> </div> </div> <div class="row"> <div class="form-group col-md-6"> <label>C&oacute;digo: </label> <input type="text" ng-model="vm.newLine.code" class="form-control"> </div> </div> </div> <div class="modal-footer"> <button type="button" class="btn btn-primary" ng-click="vm.saveNewLine()" data-dismiss="modal"> Aceptar </button> <button type="button" class="btn btn-success" ng-click="vm.newLine = undefined" data-dismiss="modal"> Cancelar </button> </div> </div> </div> </div> <div id="modalCreateGroup" class="modal fade" role="dialog"> <div class="modal-dialog"> <div class="modal-content"> <div class="modal-header"> <button type="button" class="close" data-dismiss="modal" ng-click="vm.newGroup=undefined">&times;</button> <h4 class="modal-title">Crear Grupo</h4> </div> <div class="modal-body"> <div class="row"> <div class="form-group col-md-12"> <label>Nombre : </label> <input type="text" ng-model="vm.newGroup.name" class="form-control"> </div> </div> <div class="row"> <div class="form-group col-md-6"> <label>C&oacute;digo: </label> <input type="text" ng-model="vm.newGroup.code" class="form-control"> </div> </div> </div> <div class="modal-footer"> <button type="button" class="btn btn-primary" ng-click="vm.saveNewGroup()" data-dismiss="modal"> Aceptar </button> <button type="button" class="btn btn-success" ng-click="vm.newGroup = undefined" data-dismiss="modal"> Cancelar </button> </div> </div> </div> </div> <div id="modalCreateSubGroup" class="modal fade" role="dialog"> <div class="modal-dialog"> <div class="modal-content"> <div class="modal-header"> <button type="button" class="close" data-dismiss="modal" ng-click="vm.newSubGroup=undefined">&times;</button> <h4 class="modal-title">Crear Subgrupo</h4> </div> <div class="modal-body"> <div class="row"> <div class="form-group col-md-12"> <label>Nombre : </label> <input type="text" ng-model="vm.newSubGroup.name" class="form-control"> </div> </div> <div class="row"> <div class="form-group col-md-6"> <label>C&oacute;digo: </label> <input type="text" ng-model="vm.newSubGroup.code" class="form-control"> </div> </div> </div> <div class="modal-footer"> <button type="button" class="btn btn-primary" ng-click="vm.saveNewSubGroup()" data-dismiss="modal"> Aceptar </button> <button type="button" class="btn btn-success" ng-click="vm.newSubGroup = undefined" data-dismiss="modal"> Cancelar </button> </div> </div> </div> </div>'),
a.put("views/projects/projects.tpl.html",'<div style="width: 100%;height: 100%;top: 0px;left: 0px;position: fixed;display: block; z-index: 99; background: rgba(255, 255, 255, 0.3)" ng-show="vm.loading"> <div style="position: absolute;top: 15%;z-index: 100; width: 100%; text-align: center"> <div class="sk-circle"> <div class="sk-circle1 sk-child"></div> <div class="sk-circle2 sk-child"></div> <div class="sk-circle3 sk-child"></div> <div class="sk-circle4 sk-child"></div> <div class="sk-circle5 sk-child"></div> <div class="sk-circle6 sk-child"></div> <div class="sk-circle7 sk-child"></div> <div class="sk-circle8 sk-child"></div> <div class="sk-circle9 sk-child"></div> <div class="sk-circle10 sk-child"></div> <div class="sk-circle11 sk-child"></div> <div class="sk-circle12 sk-child"></div> </div> </div> </div> <div class="header"> <h4> Proyectos </h4> </div> <div class="row" ng-show="vm.error !== undefined"> <div class="form-group col-md-12"> <div class="alert alert-danger">{{vm.error}}</div> </div> </div> <div class="row" ng-show="vm.success !== undefined"> <div class="form-group col-md-12"> <div class="alert alert-success">{{vm.success}}</div> </div> </div> <div ng-show="vm.project === undefined"> <input ng-model="searchText" class="form-control" placeholder="Buscar"> <table class="table table-striped"> <thead> <tr> <th> Codigo </th> <th> Nombre </th> <th> Ruc </th> <th> <button type="button" class="btn btn-primary" ng-click="vm.projectCreate()"> Crear </button> </th> </tr> </thead> <tbody> <tr ng-show="vm.projectList == 0"> <td colspan="4"> No hay proyectos ingresados </td> </tr> <tr ng-repeat="projectEdit in vm.projectList | orderBy:name | filter:searchText"> <td>{{ projectEdit.codeIntegridad }}</td> <td>{{ projectEdit.name }}</td> <td>{{ projectEdit.ruc }}</td> <td> <button type="button" class="btn btn-primary" ng-click="vm.editProject(projectEdit)"> Editar </button> <button type="button" class="btn btn-primary" ng-click="vm.project=projectEdit" data-toggle="modal" data-target="#modalEliminar"> Eliminar </button> </td> </tr> </tbody> </table> </div> <div class="panel panel-default" ng-show="!vm.updSubsi && vm.project"> <div class="panel-body"> <div class="row"> <div class="form-group col-md-12"> <label>Nombre *: </label> <input type="text" ng-model="vm.project.name" class="form-control"> </div> </div> <div class="row"> <div class="form-group col-md-6"> <label>Tel&eacute;fono: (incluir c&oacute;digo de provincia ej: 02) </label> <input type="text" onkeypress="return ((event.which >= 48 && event.which <= 57) || (event.keyCode == 9 || event.keyCode == 8))" ng-model="vm.project.phone" class="form-control" maxlength="9"> </div> <div class="form-group col-md-6"> <label>Tel&eacute;fono celular: </label> <input type="text" onkeypress="return ((event.which >= 48 && event.which <= 57) || (event.keyCode == 9 || event.keyCode == 8))" ng-model="vm.project.celPhone" class="form-control" maxlength="10"> </div> </div> <div class="row"> <div class="form-group col-md-6"> <label>Ciudad: </label> <input type="text" ng-model="vm.project.city" class="form-control"> </div> </div> <div class="row"> <div class="form-group col-md-12"> <label>Direcci&oacute;n: </label> <input type="text" ng-model="vm.project.address1" class="form-control"> </div> </div> <div class="row"> <div class="form-group col-md-6"> <label>C&eacute;dula: </label> <input type="text" onkeypress="return ((event.which >= 48 && event.which <= 57) || (event.keyCode == 9 || event.keyCode == 8))" ng-model="vm.project.cedula" class="form-control" maxlength="10"> </div> <div class="form-group col-md-6"> <label>Ruc *: </label> <input type="text" onkeypress="return ((event.which >= 48 && event.which <= 57) || (event.keyCode == 9 || event.keyCode == 8))" ng-model="vm.project.ruc" class="form-control" maxlength="13"> </div> </div> <div class="row"> <div class="form-group col-md-6"> <label>C&oacute;digo Facturaci&oacute;n (Ejemplo: 001): </label> <input type="text" ng-model="vm.project.threeCode" class="form-control"> </div> <div class="form-group col-md-6"> <label>C&oacute;digo Integridad(Ejemplo: COD01-01): </label> <input type="text" ng-model="vm.project.codeIntegridad" class="form-control"> </div> </div> <div class="row"> <div class="form-group col-md-6"> <label>Fecha de Inicio de Actividades</label> <div class="input-group date" id="pickerInitialDate"> <input type="text" class="form-control input-group-addon"> <span class="input-group-addon"><span class="glyphicon glyphicon-calendar"></span> </div> <script>var defaultDate = new Date();\n          $(\'#pickerInitialDate\').datetimepicker({\n            format: "DD/MM/YY",\n            defaultDate: defaultDate\n          });</script> </div> </div> <div class="row"> <div class="form-group col-md-12"> <div class="panel panel-default"> <div class="panel-heading"> Sucursales </div> <div class="panel-body"> <table class="table table-striped"> <thead> <tr> <th> C&oacute;digo Facturaci&oacute;n </th> <th> Nombre </th> <th> Ciudad </th> <th> Direcci&oacute;n </th> <th> <button type="button" class="btn btn-primary" ng-click="vm.addSubsidiary(); vm.updSubsi = true" data-toggle="modal" data-target="#modalSubsidiary"> Agregar </button> </th> </tr> </thead> <tbody> <tr ng-show="vm.project.subsidiaries == 0"> <td colspan="4"> No hay sucursales ingresados </td> </tr> <tr ng-repeat="subsi in vm.project.subsidiaries | orderBy:name | filter:{active: true}"> <td>{{ subsi.threeCode }}</td> <td>{{ subsi.name }}</td> <td>{{ subsi.city }}</td> <td>{{ subsi.address1 }}</td> <td> <button type="button" class="btn btn-primary" ng-click="vm.subsidiary=subsi; vm.updSubsi = true" data-toggle="modal" data-target="#modalSubsidiary"> Editar </button> <button type="button" class="btn btn-primary" ng-click="vm.subsidiary=subsi; vm.updSubsi = false" data-toggle="modal" data-target="#modalEliminarSubsidiary"> Eliminar </button> <button type="button" class="btn btn-primary" ng-click="vm.products(subsi)"> Productos </button> </td> </tr> </tbody> </table> </div> </div> </div> </div> </div> <div class="panel-footer"> <button type="button" class="btn btn-primary" ng-click="vm.save()" ng-disabled="vm.project.name === undefined"> Guardar </button> <button type="button" class="btn btn-success" ng-click="vm.cancel()"> Cancelar </button> </div> </div> <div ng-show="vm.subsidiary !== undefined && vm.updSubsi"> <div class="panel panel-default"> <div class="panel-heading"> Sucursal </div> <div class="panel-body"> <div class="row"> <div class="form-group col-md-12"> <label>Nombre *: </label> <input type="text" ng-model="vm.subsidiary.name" class="form-control"> </div> </div> <div class="row"> <div class="form-group col-md-6"> <label>Tel&eacute;fono: (incluir c&oacute;digo de provincia ej: 02) </label> <input type="text" onkeypress="return ((event.which >= 48 && event.which <= 57) || (event.keyCode == 9 || event.keyCode == 8))" ng-model="vm.subsidiary.phone" class="form-control" maxlength="9"> </div> <div class="form-group col-md-6"> <label>Tel&eacute;fono celular: </label> <input type="text" onkeypress="return ((event.which >= 48 && event.which <= 57) || (event.keyCode == 9 || event.keyCode == 8))" ng-model="vm.subsidiary.celPhone" class="form-control" maxlength="10"> </div> </div> <div class="row"> <div class="form-group col-md-6"> <label>Ciudad: </label> <input type="text" ng-model="vm.subsidiary.city" class="form-control"> </div> </div> <div class="row"> <div class="form-group col-md-12"> <label>Direcci&oacute;n: </label> <input type="text" ng-model="vm.subsidiary.address1" class="form-control"> </div> </div> <div class="row"> <div class="form-group col-md-6"> <label>C&oacute;digo Facturaci&oacute;n (Ejemplo: 001): </label> <input type="text" ng-model="vm.subsidiary.threeCode" class="form-control"> </div> <div class="form-group col-md-6"> <div class="panel panel-default"> <div class="panel-heading"> Bodegas </div> <div class="panel-body"> <table class="table table-striped"> <thead> <tr> <th> <!-- N&uacute;mero / Nombre de Bodega  --> <input type="text" ng-model="vm.warehouseName" class="form-control" placeholder="Ingrese un Nombre"> </th> <th> <button type="button" class="btn btn-primary" ng-click="vm.addWarehouse()"> Agregar </button> </th> </tr> </thead> <tbody> <tr ng-show="vm.subsidiary.warehouses == 0"> <td colspan="2"> No hay bodegas ingresados </td> </tr> <tr ng-repeat="warehouse in vm.subsidiary.warehouses | filter:{active: true}"> <td>{{ warehouse.nameNumber }}</td> <td> <button type="button" class="btn btn-primary" ng-click="vm.warehouse=warehouse" data-toggle="modal" data-target="#modalEliminarWarehouse"> Eliminar </button> </td> </tr> </tbody> </table> </div> </div> </div> </div> <div class="row"> </div> <div class="row"> <div class="form-group col-md-12"> <div class="panel panel-default"> <div class="panel-heading"> Cajas </div> <div class="panel-body"> <table class="table table-striped"> <thead> <tr> <th> N&uacute;mero / Nombre de caja </th> <th> <button type="button" class="btn btn-primary" ng-click="vm.cashier={}" data-toggle="modal" data-target="#modalCashier"> Agregar </button> </th> </tr> </thead> <tbody> <tr ng-show="vm.subsidiary.cashiers == 0"> <td colspan="2"> No hay cajas ingresados </td> </tr> <tr ng-repeat="cashier in vm.subsidiary.cashiers | filter:{active: true}"> <td>{{ cashier.nameNumber }}</td> <td> <button type="button" class="btn btn-primary" ng-click="vm.cashier=cashier" data-toggle="modal" data-target="#modalEliminarCashier"> Eliminar </button> </td> </tr> </tbody> </table> </div> </div> </div> </div> </div> <div class="panel-footer"> <button type="button" class="btn btn-primary" ng-click="vm.saveSubsidiary()" data-dismiss="modal"> Guardar </button> <button type="button" class="btn btn-success" ng-click="vm.cancelSubisdiary()"> Cancelar </button> </div> </div> </div> <div id="modalCashier" class="modal fade" role="dialog"> <div class="modal-dialog"> <div class="modal-content"> <div class="modal-header"> <button type="button" class="close" data-dismiss="modal" ng-click="vm.subsidiary=undefined">&times;</button> <h4 class="modal-title">Caja</h4> </div> <div class="modal-body"> <div class="row"> <div class="form-group col-md-12"> <label>Nombre o N&uacute;mero *: </label> <input type="text" ng-model="vm.cashier.nameNumber" class="form-control"> </div> </div> <div class="row"> <div class="form-group col-md-6"> <label>C&oacute;digo de facturaci&oacute;n </label> <input type="text" onkeypress="return ((event.which >= 48 && event.which <= 57) || (event.keyCode == 9 || event.keyCode == 8))" ng-model="vm.cashier.threeCode" class="form-control" maxlength="9"> </div> <div class="form-group col-md-6"> <label>Secuencial: </label> <input type="text" onkeypress="return ((event.which >= 48 && event.which <= 57) || (event.keyCode == 9 || event.keyCode == 8))" ng-model="vm.cashier.billNumberSeq" class="form-control" maxlength="10"> </div> </div> </div> <div class="modal-footer"> <button type="button" class="btn btn-primary" ng-click="vm.saveCashier()" data-dismiss="modal"> Guardar </button> <button type="button" class="btn btn-success" ng-click="vm.cancelCashier()" data-dismiss="modal"> Cancelar </button> </div> </div> </div> </div> <div id="modalEliminar" class="modal fade" role="dialog"> <div class="modal-dialog"> <div class="modal-content"> <div class="modal-header"> <button type="button" class="close" data-dismiss="modal" ng-click="vm.project=undefined">&times;</button> <h4 class="modal-title">Advertencia</h4> </div> <div class="modal-body"> <div class="row"> <div class="col-md-12"> Esta seguro que desea Eliminar el Proyecto {{vm.project.name}} con identificacion: {{vm.project.cedula}} / {{vm.project.ruc}} </div> </div> </div> <div class="modal-footer"> <button type="button" class="btn btn-primary" ng-click="vm.remove()" data-dismiss="modal"> Eliminar </button> </div> </div> </div> </div> <div id="modalEliminarSubsidiary" class="modal fade" role="dialog"> <div class="modal-dialog"> <div class="modal-content"> <div class="modal-header"> <button type="button" class="close" data-dismiss="modal" ng-click="vm.subsidiary=undefined">&times;</button> <h4 class="modal-title">Advertencia</h4> </div> <div class="modal-body"> <div class="row"> <div class="col-md-12"> Esta seguro que desea Eliminar la Sucursal {{vm.subsidiary.name}} con c&oacute;digo: {{vm.subsidiary.threeCode}} </div> </div> </div> <div class="modal-footer"> <button type="button" class="btn btn-primary" ng-click="vm.removeSubsidiary()" data-dismiss="modal"> Eliminar </button> </div> </div> </div> </div> <div id="modalEliminarCashier" class="modal fade" role="dialog"> <div class="modal-dialog"> <div class="modal-content"> <div class="modal-header"> <button type="button" class="close" data-dismiss="modal" ng-click="vm.cashier=undefined">&times;</button> <h4 class="modal-title">Advertencia</h4> </div> <div class="modal-body"> <div class="row"> <div class="col-md-12"> Esta seguro que desea Eliminar La caja {{vm.cashier.nameNumber}} </div> </div> </div> <div class="modal-footer"> <button type="button" class="btn btn-primary" ng-click="vm.removeCashier()" data-dismiss="modal"> Eliminar </button> </div> </div> </div> </div> <div id="modalEliminarWarehouse" class="modal fade" role="dialog"> <div class="modal-dialog"> <div class="modal-content"> <div class="modal-header"> <button type="button" class="close" data-dismiss="modal" ng-click="vm.warehouse=undefined">&times;</button> <h4 class="modal-title">Advertencia</h4> </div> <div class="modal-body"> <div class="row"> <div class="col-md-12"> Esta seguro que desea Eliminar La Bodega {{vm.warehouse.nameNumber}} </div> </div> </div> <div class="modal-footer"> <button type="button" class="btn btn-primary" ng-click="vm.removeWarehouse()" data-dismiss="modal"> Eliminar </button> </div> </div> </div> </div>'),a.put("views/users/edit.tpl.html",'<div style="width: 100%;height: 100%;top: 0px;left: 0px;position: fixed;display: block; z-index: 99; background: rgba(255, 255, 255, 0.3)" ng-show="vm.loading"> <div style="position: absolute;top: 15%;z-index: 100; width: 100%; text-align: center"> <div class="sk-circle"> <div class="sk-circle1 sk-child"></div> <div class="sk-circle2 sk-child"></div> <div class="sk-circle3 sk-child"></div> <div class="sk-circle4 sk-child"></div> <div class="sk-circle5 sk-child"></div> <div class="sk-circle6 sk-child"></div> <div class="sk-circle7 sk-child"></div> <div class="sk-circle8 sk-child"></div> <div class="sk-circle9 sk-child"></div> <div class="sk-circle10 sk-child"></div> <div class="sk-circle11 sk-child"></div> <div class="sk-circle12 sk-child"></div> </div> </div> </div> <div class="panel panel-default"> <div class="panel-body"> <div class="row" ng-show="vm.error !== undefined"> <div class="form-group col-md-12"> <div class="alert alert-danger">{{vm.error}}</div> </div> </div> <div class="row" ng-show="vm.success !== undefined"> <div class="form-group col-md-12"> <div class="alert alert-success">{{vm.success}}</div> </div> </div> <div class="row"> <div class="form-group col-md-6"> <label>Nombre *: </label> <input type="text" ng-model="vm.userIntegridad.firstName" class="form-control"> </div> <div class="form-group col-md-6"> <label>Apellido *: </label> <input type="text" ng-model="vm.userIntegridad.lastName" class="form-control"> </div> </div> <div class="row"> <div class="form-group col-md-6"> <label>Tel&eacute;fono: (incluir c&oacute;digo de provincia ej: 02) </label> <input type="text" onkeypress="return ((event.which >= 48 && event.which <= 57) || (event.keyCode == 9 || event.keyCode == 8))" ng-model="vm.userIntegridad.phone" class="form-control" maxlength="9"> </div> <div class="form-group col-md-6"> <label>Tel&eacute;fono celular: </label> <input type="text" onkeypress="return ((event.which >= 48 && event.which <= 57) || (event.keyCode == 9 || event.keyCode == 8))" ng-model="vm.userIntegridad.celPhone" class="form-control" maxlength="10"> </div> </div> <div class="row"> <div class="form-group col-md-6"> <label>Fecha de Nacimiento</label> <div class="input-group date" id="pickerBirthday"> <input type="text" class="form-control input-group-addon"> <span class="input-group-addon"><span class="glyphicon glyphicon-calendar"></span> </div> <script>var defaultDate = new Date();\n          $(\'#pickerBirthday\').datetimepicker({\n            format: "DD/MM/YY",\n            defaultDate: defaultDate\n          });</script> </div> </div> <div class="row"> <div class="form-group col-md-6"> <label>C&eacute;dula *: </label> <input type="text" onkeypress="return ((event.which >= 48 && event.which <= 57) || (event.keyCode == 9 || event.keyCode == 8))" ng-model="vm.userIntegridad.cedula" class="form-control" maxlength="10"> </div> <div class="form-group col-md-6"> <label>Ruc *: </label> <input type="text" onkeypress="return ((event.which >= 48 && event.which <= 57) || (event.keyCode == 9 || event.keyCode == 8))" ng-model="vm.userIntegridad.ruc" class="form-control" maxlength="13"> </div> </div> <div class="row"> <div class="form-group col-md-12"> <label>Direcci&oacute;n: </label> <input type="text" ng-model="vm.userIntegridad.address1" class="form-control"> </div> </div> <!-- <div class="row">\n      <div class="form-group col-md-12">\n        <label>Intersecci&oacute;n: </label>\n        <input type="text" ng-model="vm.userIntegridad.address2" class="form-control">\n      </div>\n    </div> --> <div class="row"> <div class="form-group col-md-12"> <label>E-mail *: </label> <input type="text" ng-model="vm.userIntegridad.email" class="form-control"> </div> </div> <div class="row"> <div class="form-group col-md-12"> <label for="password">Cambiar Password&nbsp;</label> <input type="checkbox" id="changePassword" ng-model="vm.changePassword"> </div> </div> <div class="row" ng-show="vm.changePassword"> <div class="form-group col-md-6"> <label>Nuevo Password</label> <input type="password" class="form-control" id="password" ng-model="vm.newPass" ng-required="vm.changePassword"> </div> <div class="form-group col-md-6"> <label>Confirmar nuevo Password</label> <input type="password" class="form-control" id="passwordConfirmation" ng-model="vm.passConfirmation" ng-change="vm.validatePassword()" ng-required="vm.changePassword"> </div> </div> <div class="row" ng-show="vm.passwordNotMatch"> <div class="form-group col-md-12"> <div class="alert alert-danger">El nuevo password no coincide con la confirmacion</div> </div> </div> </div> <div class="panel-footer"> <button type="button" class="btn btn-primary" ng-click="vm.editUser()" ng-disabled="vm.userIntegridad.email === undefined || vm.passwordNotMatch"> Editar </button> <button type="button" class="btn btn-success" ng-click="vm.cancel()"> Cancelar </button> </div> </div>'),a.put("views/users/users.tpl.html",'<div style="width: 100%;height: 100%;top: 0px;left: 0px;position: fixed;display: block; z-index: 99; background: rgba(255, 255, 255, 0.3)" ng-show="vm.loading"> <div style="position: absolute;top: 15%;z-index: 100; width: 100%; text-align: center"> <div class="sk-circle"> <div class="sk-circle1 sk-child"></div> <div class="sk-circle2 sk-child"></div> <div class="sk-circle3 sk-child"></div> <div class="sk-circle4 sk-child"></div> <div class="sk-circle5 sk-child"></div> <div class="sk-circle6 sk-child"></div> <div class="sk-circle7 sk-child"></div> <div class="sk-circle8 sk-child"></div> <div class="sk-circle9 sk-child"></div> <div class="sk-circle10 sk-child"></div> <div class="sk-circle11 sk-child"></div> <div class="sk-circle12 sk-child"></div> </div> </div> </div> <div class="header"> <h4> Usuarios </h4> </div> <div class="row" ng-show="vm.error !== undefined"> <div class="form-group col-md-12"> <div class="alert alert-danger">{{vm.error}}</div> </div> </div> <div class="row" ng-show="vm.success !== undefined"> <div class="form-group col-md-12"> <div class="alert alert-success">{{vm.success}}</div> </div> </div> <div ng-show="vm.userIntegridad === undefined"> <input ng-model="searchText" class="form-control" placeholder="Buscar"> <table class="table table-striped"> <thead> <tr> <th> Nombre </th> <th> Apellido </th> <th> Ruc </th> <th> C&eacute;dula </th> <th> Tipo </th> <th> <button type="button" class="btn btn-primary" ng-click="vm.userCreate()"> Crear </button> </th> </tr> </thead> <tbody> <tr ng-show="vm.clientList == 0"> <td colspan="4"> No hay usuarios ingresados </td> </tr> <tr ng-repeat="userEdit in vm.userList | orderBy:firstName | filter:searchText"> <td>{{ userEdit.firstName }}</td> <td>{{ userEdit.lastName }}</td> <td>{{ userEdit.ruc }}</td> <td>{{ userEdit.cedula }}</td> <td>{{ userEdit.userType.name }}</td> <td> <button type="button" class="btn btn-primary" ng-click="vm.userEdit(userEdit)"> Editar </button> <button type="button" class="btn btn-primary" ng-click="vm.userIntegridad=userEdit" data-toggle="modal" data-target="#modalEliminar"> Eliminar </button> <button type="button" class="btn btn-primary" ng-click="vm.userIntegridadResend(userEdit)"> Resetear Password </button> </td> </tr> </tbody> </table> </div> <div ng-show="vm.userIntegridad"> <div class="panel panel-default"> <div class="panel-body"> <div class="row"> <div class="form-group col-md-6"> <label>Proyecto *: </label> <select ng-options="project as project.name for project in vm.projectList  | orderBy:\'name\'  track by project.id" ng-change="vm.getSubsidiaries()" ng-model="vm.project" class="form-control"> </select> </div> <div class="form-group col-md-6"> <label>Surcursal *: </label> <select ng-options="sub as sub.name for sub in vm.subsidiaryList  | orderBy:\'name\' track by sub.id" ng-model="vm.userIntegridad.subsidiary" class="form-control" ng-change="vm.getCashiers()"> </select> </div> </div> <div class="row"> <div class="form-group col-md-6"> <label>Caja*: </label> <select ng-options="cas as cas.nameNumber for cas in vm.cashierList  | orderBy:\'nameNumber\' track by cas.id" ng-model="vm.userIntegridad.cashier" class="form-control"> </select> <!-- <input type="text" onkeypress="return ((event.which >= 48 && event.which <= 57) || (event.keyCode == 9 || event.keyCode == 8))"\n          ng-model="vm.userIntegridad.cashier" class="form-control" maxlength="9"> -->  </div> <div class="form-group col-md-6"> <label>Tipo de Usuario *: </label> <select ng-options="userType as userType.name for userType in vm.userTypes  | orderBy:\'name\' track by userType.id" ng-model="vm.userIntegridad.userType" class="form-control" ng-change="vm.getBosses()"> </select> </div> </div> <div class="row"> <div class="form-group col-md-12"> <label>Supervisor *: </label> <select ng-options="boss as (boss.firstName + \' \' + boss.lastName) for boss in vm.bosses  track by boss.id" ng-model="vm.userIntegridad.user" class="form-control"> </select> </div> </div> <div class="row"> <div class="form-group col-md-6"> <label>Nombre *: </label> <input type="text" ng-model="vm.userIntegridad.firstName" class="form-control"> </div> <div class="form-group col-md-6"> <label>Apellido *: </label> <input type="text" ng-model="vm.userIntegridad.lastName" class="form-control"> </div> </div> <div class="row"> <div class="form-group col-md-6"> <label>Tel&eacute;fono: (incluir c&oacute;digo de provincia ej: 02) </label> <input type="text" onkeypress="return ((event.which >= 48 && event.which <= 57) || (event.keyCode == 9 || event.keyCode == 8))" ng-model="vm.userIntegridad.phone" class="form-control" maxlength="9"> </div> <div class="form-group col-md-6"> <label>Tel&eacute;fono celular: </label> <input type="text" onkeypress="return ((event.which >= 48 && event.which <= 57) || (event.keyCode == 9 || event.keyCode == 8))" ng-model="vm.userIntegridad.celPhone" class="form-control" maxlength="10"> </div> </div> <div class="row"> <div class="form-group col-md-6"> <label>Fecha de Nacimiento</label> <div class="input-group date" id="pickerBirthday"> <input type="text" class="form-control input-group-addon"> <span class="input-group-addon"><span class="glyphicon glyphicon-calendar"></span> </div> <script>var defaultDate = new Date();\n            $(\'#pickerBirthday\').datetimepicker({\n              format: "DD/MM/YY",\n              defaultDate: defaultDate\n            });</script> </div> </div> <div class="row"> <div class="form-group col-md-6"> <label>Tipo de Identificacion: </label> <select ng-options="item for item in [\'Cedula\', \'Ruc\']" ng-model="vm.typeId" class="form-control"></select> </div> <div class="form-group col-md-6" ng-show="vm.typeId === \'Cedula\'"> <label>C&eacute;dula *: </label> <input type="text" onkeypress="return ((event.which >= 48 && event.which <= 57) || (event.keyCode == 9 || event.keyCode == 8))" ng-model="vm.userIntegridad.cedula" class="form-control" maxlength="10"> </div> <div class="form-group col-md-6" ng-show="vm.typeId === \'Ruc\'"> <label>Ruc *: </label> <input type="text" onkeypress="return ((event.which >= 48 && event.which <= 57) || (event.keyCode == 9 || event.keyCode == 8))" ng-model="vm.userIntegridad.ruc" class="form-control" maxlength="13"> </div> </div> <div class="row"> <div class="form-group col-md-12"> <label>Direcci&oacute;n: </label> <input type="text" ng-model="vm.userIntegridad.address1" class="form-control"> </div> </div> <!-- <div class="row">\n        <div class="form-group col-md-12">\n          <label>Intersecci&oacute;n: </label>\n          <input type="text" ng-model="vm.userIntegridad.address2" class="form-control">\n        </div>\n      </div> --> <div class="row"> <div class="form-group col-md-12"> <label>E-mail *: </label> <input type="text" ng-model="vm.userIntegridad.email" class="form-control"> </div> </div> </div> <div class="panel-footer"> <button type="button" class="btn btn-primary" ng-click="vm.register()" ng-disabled="vm.userIntegridad.email === undefined"> Guardar </button> <button type="button" class="btn btn-success" ng-click="vm.cancel()"> Cancelar </button> </div> </div> </div> <div id="modalEliminar" class="modal fade" role="dialog"> <div class="modal-dialog"> <div class="modal-content"> <div class="modal-header"> <button type="button" class="close" data-dismiss="modal" ng-click="vm.userEdit=undefined">&times;</button> <h4 class="modal-title">Advertencia</h4> </div> <div class="modal-body"> <div class="row"> <div class="col-md-12"> Esta seguro que desea Eliminar el Usuario {{vm.userIntegridad.firstName}} {{vm.userIntegridad.lastName}} con e-mail: {{vm.userIntegridad.email}} </div> </div> </div> <div class="modal-footer"> <button type="button" class="btn btn-primary" ng-click="vm.remove()" data-dismiss="modal"> Eliminar </button> </div> </div> </div> </div>')}]);