function routes(a){a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl",controllerAs:"vm"}).when("/activate/:idUSer/:validate",{templateUrl:"views/activate/activate.tpl.html",controller:"ActivateCtrl",controllerAs:"vm"}).when("/home",{templateUrl:"views/home/home.tpl.html",controller:"HomeCtrl",controllerAs:"vm"}).when("/users",{templateUrl:"views/users/users.tpl.html",controller:"UsersCtrl",controllerAs:"vm"}).when("/users/edit",{templateUrl:"views/users/edit.tpl.html",controller:"UserEditCtrl",controllerAs:"vm"}).when("/clients",{templateUrl:"views/clients/clients.tpl.html",controller:"ClientsCtrl",controllerAs:"vm"}).when("/clients/:create",{templateUrl:"views/clients/clients.tpl.html",controller:"ClientsCtrl",controllerAs:"vm"}).when("/bills/bill",{templateUrl:"views/bills/bill.tpl.html",controller:"BillCtrl",controllerAs:"vm"}).when("/projects/projects",{templateUrl:"views/projects/projects.tpl.html",controller:"ProjectsCtrl",controllerAs:"vm"}).when("/products/products",{templateUrl:"views/products/products.tpl.html",controller:"ProductsCtrl",controllerAs:"vm"}).when("/products/products/:subsidiaryId",{templateUrl:"views/products/products.tpl.html",controller:"ProductsCtrl",controllerAs:"vm"}).when("/provider/providers",{templateUrl:"views/providers/providers.tpl.html",controller:"ProvidersCtrl",controllerAs:"vm"}).otherwise({redirectTo:"/"})}var app=angular.module("integridadUiApp",["app.routes","app.core","app.directives"]);app.run(["$rootScope","$location","authorizationService","$localStorage",function(a,b,c,d){a.$on("$routeChangeStart",function(a){b.path().includes("/activate/")||c.isLoggedIn()||b.path("/")})}]),angular.module("app.routes",["ngRoute"]).config(routes),routes.$inject=["$routeProvider"],angular.module("app.services",["base64"]),angular.module("app.core",["app.services","ui.bootstrap","ngResource","toaster","ngAnimate","ngStorage","angularUtils.directives.dirPagination","xen3r0.underscorejs","AngularPrint"]),angular.module("app.directives",["ngPatternRestrict"]),angular.module("integridadUiApp").controller("MainCtrl",["$rootScope","$location","authService","utilStringService","permissionService","$localStorage",function(a,b,c,d,e,f){function g(){e.getPermissions(f.user.userType).then(function(c){f.permissions=c,a.updateMenu(),h.loading=!1,b.path("/home")})["catch"](function(a){h.loading=!1,h.error=a.data})}var h=this;h.error=void 0,h.success=void 0,h.loading=!1,h.init=!0,h.recover=!1,h.userIntegridad={},h.error=void 0,h.success=void 0,h.login=function(){h.loading=!0;var a={email:h.email,password:h.password};c.authUser(a).then(function(a){if(f.user=a,f.user.tempPass)h.loading=!1,h.passwordNotMatch=!1,h.userIntegridad=angular.copy(f.user),$("#modalChangePassword").modal("show");else{var b=new Date;f.timeloged=b.getTime(),g()}})["catch"](function(a){h.loading=!1,h.error=a.data})},h.update=function(){h.loading=!0,h.userIntegridad.password=h.newPass,h.userIntegridad.tempPass=!1,c.updateUser(h.userIntegridad).then(function(a){h.error=void 0,h.success="Perfil actualizado con exito",f.user=a;var b=new Date;f.timeloged=b.getTime(),g()})["catch"](function(a){h.loading=!1,h.error=a.data})},h.validatePassword=function(){h.passwordNotMatch=h.newPass!==h.passConfirmation},h.register=function(){h.userIntegridad.birthDay=$("#pickerBirthday").data("DateTimePicker").date().toDate().getTime(),h.userIntegridad.email=h.userIntegridad.email.trim(),h.userIntegridad.password=h.userIntegridad.password.trim();var a=d.isAnyInArrayStringEmpty([h.userIntegridad.email,h.userIntegridad.password,h.userIntegridad.firstName,h.userIntegridad.lastName]);a?h.error="Debe ingresar Nombres completos, email y password":(a=d.isStringEmpty(h.userIntegridad.cedula)&&d.isStringEmpty(h.userIntegridad.ruc),a&&(h.error="Debe ingresar un numero de cedula o ruc")),a||(h.loading=!0,c.registerUser(h.userIntegridad).then(function(a){h.loading=!1,h.error=void 0,h.init=!0,h.success="Registro realizado con exito. Se envio un email a la cuenta registrada para activar su cuenta"})["catch"](function(a){h.loading=!1,h.error=a.data}))},h.recoverPass=function(){h.loading=!0;var a={email:h.email};c.recoverUser(a).then(function(a){h.loading=!1,h.recover=!1,h.success="Se envio un email a la cuenta registrada con un nuevo Password para ingresar al sistema."})["catch"](function(a){h.loading=!1,h.error=a.data})}}]),angular.module("integridadUiApp").controller("MenuCtrl",["$rootScope","$scope","$localStorage","$location",function(a,b,c,d){if(b.permissions=[],a.updateMenu=function(){b.permissions=c.permissions,b.nameType=c.user.firstName+" - "+c.user.userType.name},b.logout=function(){b.permissions=[],b.nameType=void 0,c.permissions=void 0,c.user=void 0,c.timeloged=void 0,d.path("/")},b.$on("onBeforeUnload",function(a,c){b.logout()}),c.timeloged){var e=new Date,f=e.getTime(),g=f-c.timeloged;g>864e5&&b.logout()}c.permissions&&a.updateMenu()}]),angular.module("integridadUiApp").controller("ActivateCtrl",["$routeParams","$location","authService","permissionService","$rootScope","$localStorage",function(a,b,c,d,e,f){function g(){d.getPermissions(f.user.userType).then(function(a){f.permissions=a,e.updateMenu(),h.loading=!1,b.path("/home")})["catch"](function(a){h.loading=!1,h.error=a.data})}var h=this;h.error=void 0,h.success=void 0,h.errorActive=!1,c.activeUser(a.idUSer,a.validate).then(function(a){if(f.user=a,console.log(f.user.tempPass),f.user.tempPass)h.loading=!1,h.passwordNotMatch=!1,h.userIntegridad=angular.copy(f.user),$("#modalChangePassword").modal("show");else{var b=new Date;f.timeloged=b.getTime(),g()}})["catch"](function(a){h.errorActive=!0,h.error=a.data}),h.validatePassword=function(){h.passwordNotMatch=h.newPass!==h.passConfirmation},h.update=function(){h.loading=!0,h.userIntegridad.password=h.newPass,h.userIntegridad.tempPass=!1,c.updateUser(h.userIntegridad).then(function(a){h.error=void 0,h.success="Perfil actualizado con exito",f.user=a;var b=new Date;f.timeloged=b.getTime(),g()})["catch"](function(a){h.loading=!1,h.error=a.data})}}]),angular.module("integridadUiApp").controller("HomeCtrl",function(){var a=this;a.error=void 0,a.success=void 0}),angular.module("integridadUiApp").controller("UsersCtrl",["utilStringService","userTypeService","authService","projectService","subsidiaryService","validatorService","cashierService",function(a,b,c,d,e,f,g){function h(){l.loading=!0,c.getLazy().then(function(a){l.userList=a})["catch"](function(a){l.loading=!1,l.error=a.data}),i()}function i(){d.getLazy().then(function(a){l.projectList=a,l.loading=!1})["catch"](function(a){l.loading=!1,l.error=a.data})}function j(){l.loading=!0,c.registerUser(l.userIntegridad).then(function(a){l.loading=!1,l.error=void 0,l.success="Registro realizado con exito. Se envio un email a la cuenta registrada para activar su cuenta",l.userIntegridad=void 0,h()})["catch"](function(a){l.loading=!1,l.error=a.data})}function k(a){l.loading=!0,c.updateUser(l.userIntegridad).then(function(b){l.loading=!1,l.error=void 0,a?l.success="Registro eliminado con exito":l.success="Registro actualizado con exito",l.userIntegridad=void 0,h()})["catch"](function(a){l.loading=!1,l.error=a.data})}var l=this;l.error=void 0,l.success=void 0,l.loading=!1,l.userIntegridad=void 0,l.project=void 0,l.bosses=[],l.codeBosses={EMP:"ADM",ADM:"SAD",SAD:"SAD"},l.getSubsidiaries=function(){l.cashierList=void 0,e.getByProjectId(l.project.id).then(function(a){l.subsidiaryList=a,l.loading=!1})["catch"](function(a){l.loading=!1,l.error=a.data})},l.getBosses=function(){c.getBosses(l.codeBosses[l.userIntegridad.userType.code],l.userIntegridad.subsidiary.id).then(function(a){l.bosses=a})},l.getCashiers=function(){g.getBySubsidiaryId(l.userIntegridad.subsidiary.id).then(function(a){l.cashierList=a,l.loading=!1})["catch"](function(a){l.loading=!1,l.error=a.data})},l.userCreate=function(){l.success=void 0,l.error=void 0,l.userIntegridad={}},l.userEdit=function(a){l.success=void 0,l.error=void 0,l.userIntegridad=angular.copy(a),void 0!==l.userIntegridad.cedula&&null!==l.userIntegridad.cedula?l.typeId="Cedula":l.typeId="Ruc",i(),l.project=l.userIntegridad.subsidiary.userClient,l.getSubsidiaries(),l.getCashiers(),l.getBosses(),$("#pickerBirthday").data("DateTimePicker").date(new Date(l.userIntegridad.birthDay))},l.register=function(){l.userIntegridad.birthDay=$("#pickerBirthday").data("DateTimePicker").date().toDate().getTime(),l.userIntegridad.email=l.userIntegridad.email.trim(),l.userIntegridad.password=a.randomString();var b=a.isAnyInArrayStringEmpty([l.userIntegridad.email,l.userIntegridad.password,l.userIntegridad.firstName,l.userIntegridad.lastName]);b?l.error="Debe ingresar Nombres completos y un email":(b=a.isStringEmpty(l.userIntegridad.cedula)&&a.isStringEmpty(l.userIntegridad.ruc),b&&(l.error="Debe ingresar un numero de cedula o ruc"));var c=!0;"Cedula"===l.typeId?c=f.isCedulaValid(l.userIntegridad.cedula):"Ruc"===l.typeId&&(c=f.isRucValid(l.userIntegridad.ruc)),c?b||(void 0===l.userIntegridad.id?j():(l.userIntegridad.password="",k(!1))):l.error="Identificacion invalida"},l.remove=function(){l.userIntegridad.active=!1,k(!0)},l.cancel=function(){l.userIntegridad=void 0,l.success=void 0,l.error=void 0},l.userIntegridadResend=function(a){l.loading=!0,c.recoverUser(a).then(function(b){l.loading=!1,l.recover=!1,l.success="Se envio un email a "+a.email+" con un nuevo Password para ingresar al sistema."})["catch"](function(a){l.loading=!1,l.error=a.data})},function(){l.loading=!0,b.getUserTypes().then(function(a){l.userTypes=a,l.loading=!1})["catch"](function(a){l.loading=!1,l.error=a.data}),h()}()}]),angular.module("integridadUiApp").controller("UserEditCtrl",["$rootScope","utilStringService","userTypeService","authService","$localStorage",function(a,b,c,d,e){function f(){$("#pickerBirthdayEdit").data("DateTimePicker").date(new Date(g.userIntegridad.birthDay))}var g=this;g.error=void 0,g.success=void 0,g.loading=!1,g.userIntegridad=angular.copy(e.user),g.changePassword=!1,g.passwordNotMatch=!1,g.validatePassword=function(){g.passwordNotMatch=g.newPass!==g.passConfirmation},g.editUser=function(){g.changePassword&&!g.passwordNotMatch?g.userIntegridad.password=g.newPass:g.userIntegridad.password="",g.userIntegridad.birthDay=$("#pickerBirthdayEdit").data("DateTimePicker").date().toDate().getTime(),g.userIntegridad.email=g.userIntegridad.email.trim();var c=b.isAnyInArrayStringEmpty([g.userIntegridad.email,g.userIntegridad.firstName,g.userIntegridad.lastName]);c?g.error="Debe ingresar Nombres completos y un email":(c=b.isStringEmpty(g.userIntegridad.cedula)&&b.isStringEmpty(g.userIntegridad.ruc),c&&(g.error="Debe ingresar un numero de cedula o ruc")),c||(g.loading=!0,d.updateUser(g.userIntegridad).then(function(b){g.loading=!1,g.error=void 0,g.success="Perfil actualizado con exito",e.user=b,a.updateMenu()})["catch"](function(a){g.loading=!1,g.error=a.data}))},g.cancel=function(){g.userIntegridad=angular.copy(e.user),g.success=void 0,g.error=void 0,g.changePassword=!1,g.passwordNotMatch=!1},function(){f()}()}]),angular.module("integridadUiApp").controller("ClientsCtrl",["$routeParams","$location","projectService","utilStringService","countryListService","clientService","$localStorage","validatorService",function(a,b,c,d,e,f,g,h){function i(){a.create?l.clientCreate():(l.loading=!0,f.getLazyByProjectId(g.user.subsidiary.userClient.id).then(function(a){l.clientList=a,l.loading=!1})["catch"](function(a){l.loading=!1,l.error=a.data}))}function j(){f.create(l.client).then(function(c){l.client=void 0,i(),l.error=void 0,l.success="Registro realizado con exito",a.create&&b.path("/bills/bill")})["catch"](function(a){l.loading=!1,l.error=a.data})}function k(a){f.update(l.client).then(function(b){l.client=void 0,i(),l.error=void 0,a?l.success="Registro eliminado con exito":l.success="Registro actualizado con exito"})["catch"](function(a){l.loading=!1,l.error=a.data})}var l=this;l.error=void 0,l.success=void 0,l.loading=!1,l.client=void 0,l.countryList=e.getCountryList(),l.citiesList=e.getCitiesEcuador(),l.clientList=void 0,l.clientCreate=function(){c.getNumberOfProjects(g.user.subsidiary.userClient.id).then(function(a){l.success=void 0,l.error=void 0;var b=parseInt(a);l.client={country:"Ecuador",city:"Quito",codApp:b+1,userClient:g.user.subsidiary.userClient}})["catch"](function(a){l.loading=!1,l.error=a.data})},l.clientEdit=function(a){l.success=void 0,l.error=void 0,l.client=angular.copy(a)},l.validateEcuador=function(){"Ecuador"!==l.client.country&&(l.client.city=void 0)},l.save=function(){var a=d.isAnyInArrayStringEmpty([l.client.name,l.client.identification,l.client.codApp]),b=!0;"CED"===l.client.typeId?b=h.isCedulaValid(l.client.identification):"RUC"===l.client.typeId&&(b=h.isRucValid(l.client.identification)),a?l.error="Debe ingresar Nombres completos, una identificacion y el Codigo de Contabilidad":b?(l.loading=!0,void 0===l.client.id?j():k(!1)):l.error="Identificacion invalida"},l.remove=function(){l.client.active=!1,k(!0)},l.cancel=function(){l.client=void 0,l.success=void 0,l.error=void 0,a.create&&b.path("/bills/bill")},function(){i()}()}]),angular.module("integridadUiApp").controller("BillCtrl",["_","$rootScope","$location","utilStringService","$localStorage","clientService","productService","authService","billService","$window","cashierService","requirementService",function(a,b,c,d,e,f,g,h,i,j,k,l){function m(){s.newBill=!0,s.billed=!1,s.clientSelected=void 0,s.dateBill=void 0,s.seqNumber=void 0,s.productList=void 0,s.productToAdd=void 0,s.quantity=void 0,s.loading=!0,s.indexDetail=void 0,s.priceType=s.prices[0],s.seqChanged=!1,s.impuestosTotales=[],s.items=[],s.impuestoICE={base_imponible:0,valor:0,codigo:"3",codigo_porcentaje:2},s.impuestoIVA={base_imponible:0,valor:0,codigo:"2",codigo_porcentaje:2},s.medio={},s.pagos=[],f.getLazyByProjectId(e.user.subsidiary.userClient.id).then(function(a){s.clientList=a,s.loading=!1})["catch"](function(a){s.loading=!1,s.error=a.data})}function n(a,b){for(var c=""+a;c.length<b;)c="0"+c;return c}function o(){s.numberAddedOne=parseInt(e.user.cashier.billNumberSeq)+1,s.seqNumberFirstPart=e.user.subsidiary.userClient.threeCode+"-"+e.user.cashier.threeCode,s.seqNumberSecondPart=n(s.numberAddedOne,10),s.seqNumber=s.seqNumberFirstPart+"-"+s.seqNumberSecondPart}function p(){s.bill={client:s.clientSelected,userIntegridad:e.user,subsidiary:e.user.subsidiary,dateCreated:s.dateBill.getTime(),discount:0,total:0,subTotal:0,iva:0,ice:0,details:[],pagos:[]}}function q(){s.bill.subTotal=0,s.bill.iva=0,s.bill.ice=0,s.bill.baseTaxes=0,s.bill.baseNoTaxes=0;var b=0,c=0;a.each(s.bill.details,function(a){s.bill.subTotal=(parseFloat(s.bill.subTotal)+parseFloat(a.total)).toFixed(2);var d=a.total;s.bill.discountPercentage&&(d=(parseFloat(a.total)-parseInt(s.bill.discountPercentage)/100*parseFloat(a.total)).toFixed(2)),a.product.iva?(s.bill.baseTaxes+=parseFloat(a.total),s.bill.iva=(parseFloat(s.bill.iva)+.12*parseFloat(d)).toFixed(2),s.bill.discountPercentage&&(b=(parseFloat(b)+parseInt(s.bill.discountPercentage)/100*a.total).toFixed(2))):(s.bill.baseNoTaxes+=parseFloat(a.total),s.bill.discountPercentage&&(c=(parseFloat(c)+parseInt(s.bill.discountPercentage)/100*a.total).toFixed(2))),a.product.ice&&(s.bill.ice=(parseFloat(s.bill.ice)+.1*parseFloat(d)).toFixed(2))}),s.bill.discountPercentage?s.bill.discount=(parseInt(s.bill.discountPercentage)/100*s.bill.subTotal).toFixed(2):s.bill.discount=0,s.impuestoICE.base_imponible=s.bill.subTotal,s.impuestoIVA.base_imponible=s.bill.subTotal,s.impuestoICE.valor=s.bill.ice,s.impuestoIVA.valor=s.bill.iva,s.bill.baseTaxes=(s.bill.baseTaxes-b).toFixed(2),s.bill.baseNoTaxes=(s.bill.baseNoTaxes-c).toFixed(2),s.bill.total=(parseFloat(s.bill.baseTaxes)+parseFloat(s.bill.baseNoTaxes)+parseFloat(s.bill.iva)+parseFloat(s.bill.ice)).toFixed(2)}function r(a,b){var c=new Date(a);return c.setDate(c.getDate()+b),c.getTime()}var s=this;s.error=void 0,s.success=void 0,s.loading=!1,s.clientList=void 0,s.isEmp=!0,s.prices=[{name:"EFECTIVO",cod:"cashPercentage"},{name:"MAYORISTA",cod:"majorPercentage"},{name:"CREDITO",cod:"creditPercentage"},{name:"TARJETA",cod:"cardPercentage"}],s.medList=[{code:"efectivo",name:"Efectivo"},{code:"cheque",name:"Cheque"},{code:"cheque_posfechado",name:"Cheque posfechado"},{code:"tarjeta_credito",name:"Tarjeta de crédito"},{code:"tarjeta_debito",name:"Tarjeta de débito"},{code:"dinero_electronico_ec",name:"Dinero electrónico"},{code:"credito",name:"Crédito"}],s.formList=["01 - SIN UTILIZACION DEL SISTEMA FINANCIERO","15 - COMPENSACION DE DEUDAS","16 - TARJETAS DE DEBITO","17 - DINERO ELECTRONICO","18 - TARJETA PREPAGO","19 - TARJETA DE CREDITO","20 - OTROS CON UTILIZACION DEL SISTEMA FINANCIERO","21 - ENDOSO DE TITULOS"],s.creditCardList=["DINNERS CLUB","VISA","MASTERCARD","AMERICAN"],s.seqChanged=!1,s.acceptNewSeq=function(){s.seqErrorNumber=void 0,s.loading=!0;var a=s.seqNumberFirstPart+"-"+s.seqNumberSecondPart;i.getByStringSeq(a).then(function(b){0===b.length?(s.seqNumber=a,s.numberAddedOne=parseInt(s.seqNumberSecondPart),s.seqChanged=!0,$("#modalEditBillNumber").modal("hide")):s.seqErrorNumber="NUMERO DE FACTURA YA EXISTENTE",s.loading=!1})["catch"](function(a){s.loading=!1,s.error=a.data})},s.reCalculateTotal=function(){a.map(s.bill.details,function(a){s.bill.discountPercentage?a.discount=s.bill.discountPercentage:a.discount=0;var b=s.getCost("1."+a.product[s.priceType.cod],a.product.averageCost);a.costEach=b,a.total=(parseFloat(a.quantity)*parseFloat(a.costEach)).toFixed(2)}),q()},s.clientCreate=function(){c.path("/clients/create")},s.clientSelect=function(a){s.companyData=e.user.subsidiary,s.dateBill=new Date,s.clientSelected=a,s.pagos=[],o(),p();var b=new Date;$("#pickerBillDate").data("DateTimePicker").date(b),s.newBill=!0},s.clientConsult=function(a){s.loading=!0,i.getByClientId(a.id).then(function(a){s.billList=a,s.loading=!1})["catch"](function(a){s.loading=!1,s.error=a.data})},s.addProduct=function(){s.indexDetail=void 0,s.loading=!0,s.errorQuantity=void 0,g.getLazyBySusidiaryId(e.user.subsidiary.id).then(function(b){s.loading=!1,s.productList=[];for(var c=0;c<b.length;c++){var d=a.find(s.bill.details,function(a){return a.product.id===b[c].id});if(void 0===d){var f=a.find(b[c].productBySubsidiaries,function(a){return a.subsidiary.id===e.user.subsidiary.id&&a.active===!0});b[c].quantity=f.quantity,s.productList.push(b[c])}}})["catch"](function(a){s.loading=!1,s.error=a.data})},s.selectProductToAdd=function(a){"SER"===a.productType.code&&(a.quantity=1),s.productToAdd=angular.copy(a);var b=s.getCost("1."+a[s.priceType.cod],a.averageCost);s.productToAdd.costEachCalculated=b,s.quantity=1},s.acceptProduct=function(b){if("SER"!==s.productToAdd.productType.code&&parseInt(s.quantity)>parseInt(s.productToAdd.quantity))return void(s.errorQuantity="Cantidad disponible insuficiente");s.errorQuantity=void 0;var c={discount:s.bill.discountPercentage?s.bill.discountPercentage:0,product:angular.copy(s.productToAdd),quantity:s.quantity,costEach:s.productToAdd.costEachCalculated,total:(parseFloat(s.quantity)*parseFloat(s.productToAdd.costEachCalculated)).toFixed(2)};if(void 0!==s.indexDetail?s.bill.details[s.indexDetail]=c:s.bill.details.push(c),s.productToAdd=void 0,s.quantity=void 0,q(),b)$("#modalAddProduct").modal("hide");else{var d=a.filter(s.productList,function(a){return a.id!==c.product.id});s.productList=d}},s.getCost=function(a,b){var c=parseFloat(a),d=c*b;return d.toFixed(2)},s.editDetail=function(a,b){s.indexDetail=b,s.productToAdd=a.product,s.quantity=a.quantity},s.removeDetail=function(a){s.bill.details.splice(a,1)},s.validateAdm=function(){s.errorValidateAdm=void 0;var a=e.user.user;a.password=s.passwordAdm,h.authUser(a).then(function(a){s.loading=!1,s.isEmp=!1})["catch"](function(a){s.loading=!1,s.errorValidateAdm=a.data})},s.verifyUser=function(){s.isEmp="EMP"===e.user.userType.code},s.loadMedio=function(){var b=0;a.each(s.pagos,function(a){b+=parseFloat(a.total)}),s.pagos,("efectivo"===s.medio.medio||"dinero_electronico_ec"===s.medio.medio)&&(s.medio.payForm="01 - SIN UTILIZACION DEL SISTEMA FINANCIERO"),"credito"===s.medio.medio&&(s.medio.payForm="01 - SIN UTILIZACION DEL SISTEMA FINANCIERO",s.medio.total=(s.bill.total-b).toFixed(2)),("cheque"===s.medio.medio||"cheque_posfechado"===s.medio.medio)&&(s.medio.payForm="20 - OTROS CON UTILIZACION DEL SISTEMA FINANCIERO",s.medio.total=(s.bill.total-b).toFixed(2)),("tarjeta_credito"===s.medio.medio||"tarjeta_debito"===s.medio.medio)&&(s.medio.payForm="19 - TARJETA DE CREDITO",s.medio.total=(s.bill.total-b).toFixed(2))},s.loadCredit=function(){for(var a=[],b=parseInt(s.medio.creditoIntervalos),c=new Date,d=parseFloat(parseFloat(s.bill.total)/parseFloat(s.medio.creditoNumeroPagos)).toFixed(2),e=1;e<=parseInt(s.medio.creditoNumeroPagos);e++){var f={payNumber:e,diasPlazo:b,fecha:r(c,b),valor:d};b+=parseInt(s.medio.creditoIntervalos),a.push(f)}s.medio.credits=a},s.getFechaCobro=function(){var a=new Date;s.medio.fechaCobro=r(a,parseInt(s.medio.chequeDiasPlazo))},s.addPago=function(){s.pagos.push(angular.copy(s.medio)),s.medio={}},s.removePago=function(a){s.pagos.splice(a,1)},s.getTotalPago=function(){return s.varPago=0,s.bill&&(s.getCambio=0,a.each(s.pagos,function(a){s.varPago=parseFloat(parseFloat(s.varPago)+parseFloat(a.total)).toFixed(2)}),s.getCambio=(s.varPago-s.bill.total).toFixed(2)),s.varPago},s.billSelect=function(a){s.loading=!0,i.getById(a.id).then(function(a){s.billList=void 0,s.bill=a,s.companyData=e.user.subsidiary,s.clientSelected=a.client,s.pagos=a.pagos;var b=new Date(a.dateCreated);s.seqNumber=a.stringSeq,$("#pickerBillDate").data("DateTimePicker").date(b),s.newBill=!1,s.loading=!1})["catch"](function(a){s.loading=!1,s.error=a.data})},s.getClaveAcceso=function(){s.loading=!0,$("#modalAddPago").modal("hide"),s.impuestosTotales=[],s.impuestosTotales.push(s.impuestoIVA),s.bill.billSeq=s.numberAddedOne,void 0===s.bill.discountPercentage&&(s.bill.discountPercentage=0),a.each(s.bill.details,function(a){var b=(1.12*a.costEach).toFixed(2),c=(1.1*a.costEach).toFixed(2),d=[],e={};a.product.iva&&(e.base_imponible=(parseFloat(a.costEach)*parseFloat(a.quantity)).toFixed(2),e.valor=b,e.tarifa=12,e.codigo="2",e.codigo_porcentaje="2",d.push(e)),a.product.ice&&(e.base_imponible=a.costEach,e.valor=c,e.tarifa=10,e.codigo="3",e.codigo_porcentaje="2",d.push(e));var f={cantidad:a.quantity,codigo_principal:a.product.barCode,codigo_auxiliar:a.product.barCode,precio_unitario:a.costEach,descripcion:a.product.name,precio_total_sin_impuestos:(parseFloat(a.costEach)*parseFloat(a.quantity)).toFixed(2),impuestos:d,descuento:(parseFloat(a.costEach)*(parseInt(s.bill.discountPercentage)/100)).toFixed(2),unidad_medida:a.product.unitOfMeasurementFull};s.items.push(f)});var b=l.createRequirement(s.clientSelected,s.bill,e.user,s.impuestosTotales,s.items,s.pagos);i.getClaveDeAcceso(b,s.companyData.userClient.id).then(function(a){s.bill.pagos=s.pagos,void 0===s.bill.discountPercentage&&(s.bill.discountPercentage=0);var b=JSON.parse(a.data);void 0===b.errors?(s.bill.claveDeAcceso=b.clave_acceso,s.bill.idSri=b.id,s.bill.stringSeq=s.seqNumber,s.bill.priceType=s.priceType.name,i.create(s.bill).then(function(a){s.billed=!0,e.user.cashier.billNumberSeq=s.bill.billSeq,s.seqChanged&&k.update(e.user.cashier).then(function(a){})["catch"](function(a){s.loading=!1,s.error=a.data}),m(),s.loading=!1})["catch"](function(a){s.loading=!1,s.error=a.data})):(s.loading=!1,s.error="Error al obtener Clave de Acceso: "+JSON.stringify(b.errors))})["catch"](function(a){s.loading=!1,s.error=a.data})},function(){m()}()}]),angular.module("integridadUiApp").controller("ProjectsCtrl",["$localStorage","$location","projectService","utilStringService","validatorService",function(a,b,c,d,e){function f(){i.loading=!0,c.getLazy().then(function(a){i.projectList=a,i.loading=!1})["catch"](function(a){i.loading=!1,i.error=a.data})}function g(){c.create(i.project).then(function(a){i.project=void 0,f(),i.error=void 0,i.success="Registro realizado con exito"})["catch"](function(a){i.loading=!1,i.error=a.data})}function h(a){c.update(i.project).then(function(b){i.project=void 0,f(),i.error=void 0,a?i.success="Registro eliminado con exito":i.success="Registro actualizado con exito"})["catch"](function(a){i.loading=!1,i.error=a.data})}var i=this;i.error=void 0,i.success=void 0,i.loading=!1,i.project=void 0,i.projectList=void 0,i.subsidiary=void 0,i.cashier=void 0,i.warehouse=void 0,i.projectCreate=function(){i.success=void 0,i.error=void 0,i.project={subsidiaries:[]},i.project.initialActivityDate=$("#pickerInitialDate").data("DateTimePicker").date().toDate().getTime()},i.save=function(){i.project.initialActivityDate=$("#pickerInitialDate").data("DateTimePicker").date().toDate().getTime();var a=d.isAnyInArrayStringEmpty([i.project.name,i.project.threeCode,i.project.codeIntegridad,i.project.ruc]),b=e.isRucValid(i.project.ruc);a?i.error="Debe ingresar Nombres completos, ruc y sus Codigos":b?(i.loading=!0,void 0===i.project.id?g():h(!1)):i.error="RUC invalido"},i.remove=function(){i.project.active=!1,h(!0)},i.addSubsidiary=function(){i.subsidiary={cashiers:[],warehouses:[]}},i.removeWarehouse=function(){i.warehouse.active=!1},i.removeCashier=function(){i.cashier.active=!1},i.removeSubsidiary=function(){i.subsidiary.active=!1},i.addWarehouse=function(){var a={nameNumber:i.warehouseName,dateCreated:(new Date).getTime(),active:!0};i.subsidiary.warehouses.push(a),i.warehouseName=void 0},i.editProject=function(a){i.success=void 0,i.error=void 0,c.getById(a.id).then(function(a){i.project=a,$("#pickerInitialDate").data("DateTimePicker").date(new Date(i.project.initialActivityDate))})["catch"](function(a){i.loading=!1,i.error=a.data})},i.saveSubsidiary=function(){void 0===i.subsidiary.id&&void 0!==i.subsidiary.name&&(i.subsidiary.active=!0,i.subsidiary.dateCreated=(new Date).getTime(),i.project.subsidiaries.push(i.subsidiary)),i.subsidiary=void 0,i.updSubsi=!1},i.saveCashier=function(){i.cashier.active=!0,i.cashier.dateCreated=(new Date).getTime(),i.subsidiary.cashiers.push(i.cashier)},i.saveWarehouse=function(){i.warehouse.active=!0,i.warehouse.dateCreated=(new Date).getTime(),i.subsidiary.warehouses.push(i.warehouse)},i.cancel=function(){i.updSubsi=!1,i.project=void 0,i.success=void 0,i.error=void 0},i.cancelSubisdiary=function(){i.updSubsi=!1,i.subsidiary=void 0,i.success=void 0,i.error=void 0},i.products=function(a){b.path("/products/products/"+a.id)},function(){f()}()}]),angular.module("integridadUiApp").controller("ProductsCtrl",["_","$localStorage","$location","productService","utilStringService","projectService","subsidiaryService","productTypeService","messurementListService","brandService","lineService","groupService","subgroupService","$routeParams",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){function o(){v.productList=[],v.loading=!0,v.messurements=i.getMessurementList(),h.getproductTypesLazy().then(function(a){v.productTypes=a})["catch"](function(a){v.loading=!1,v.error=a.data}),n.subsidiaryId?d.getLazyBySusidiaryId(n.subsidiaryId).then(function(a){p(a),v.loading=!1})["catch"](function(a){v.loading=!1,v.error=a.data}):d.getLazyBySusidiaryId(b.user.subsidiary.id).then(function(a){p(a),v.loading=!1})["catch"](function(a){v.loading=!1,v.error=a.data})}function p(c){for(var d=0;d<c.length;d++){var e=a.find(c[d].productBySubsidiaries,function(a){return a.subsidiary.id===b.user.subsidiary.id&&a.active===!0});c[d].quantity=e.quantity,v.productList.push(c[d])}}function q(c){g.getByProjectId(b.user.subsidiary.userClient.id).then(function(b){v.subsidiaries=b,c&&a.each(v.subsidiaries,function(b){a.each(v.product.productBySubsidiaries,function(a){b.id===a.subsidiary.id&&a.active&&(b.cantidad=a.quantity,b.selected=!0)})})})["catch"](function(a){v.loading=!1,v.error=a.data})}function r(){j.getBrandsLazy(b.user.subsidiary.userClient.id).then(function(a){v.brands=a})["catch"](function(a){v.loading=!1,v.error=a.data})}function s(){k.getLinesLazy(b.user.subsidiary.userClient.id).then(function(a){v.lineas=a})["catch"](function(a){v.loading=!1,v.error=a.data})}function t(){v.product.productBySubsidiaries=v.productBySubsidiaries,d.create(v.product).then(function(a){v.product=void 0,v.selectedGroup=void 0,v.selectedLine=void 0,v.wizard=0,o(),v.error=void 0,v.success="Registro realizado con exito"})["catch"](function(a){v.loading=!1,v.error=a.data})}function u(b){a.each(v.product.productBySubsidiaries,function(a){a.active=!1}),a.each(v.productBySubsidiaries,function(a){v.product.productBySubsidiaries.push(a)}),d.update(v.product).then(function(a){v.product=void 0,v.selectedGroup=void 0,v.selectedLine=void 0,v.wizard=0,o(),v.error=void 0,b?v.success="Registro eliminado con exito":v.success="Registro actualizado con exito"})["catch"](function(a){v.loading=!1,v.error=a.data})}var v=this;v.error=void 0,v.success=void 0,v.loading=!1,v.product=void 0,v.productList=[],v.subsidiaryId=void 0,v.productTypes=void 0,v.messurements=void 0,v.subsidiaries=void 0,v.brands=void 0,v.lineas=void 0,v.groups=void 0,v.subGroups=void 0,v.productBySubsidiaries=[],v.wizard=0,v.getCost=function(a,b){var c=parseFloat(a),d=c*b;return d.toFixed(2)},v.editProduct=function(b){v.selectedGroup=b.subgroup.groupLine,v.selectedLine=b.subgroup.groupLine.line,v.messurements=i.getMessurementList(),a.each(v.messurements,function(a){b.unitOfMeasurementAbbr===a.shortName&&(v.messurementSelected=a)}),v.getGroups(),v.getSubGroups(),q(!0),v.wizard=1,v.product=b},v.productCreate=function(){q(!1),v.success=void 0,v.error=void 0,v.productBySubsidiaries=[],v.wizard=1,v.product={userClient:b.user.subsidiary.userClient,productBySubsidiaries:[],codeIntegridad:v.productList.length+1}},v.changeSub=function(a){"SER"!==v.product.productType.code&&(a.selected?a.cantidad=0:a.cantidad=void 0)},v.getGroups=function(){null!==v.selectedLine&&void 0!==v.selectedLine&&l.getGroupsByLineLazy(v.selectedLine.id).then(function(a){v.groups=a})["catch"](function(a){v.loading=!1,v.error=a.data})},v.getSubGroups=function(){null!==v.selectedGroup&&void 0!==v.selectedGroup&&m.getSubGroupsByGroupLazy(v.selectedGroup.id).then(function(a){v.subGroups=a})["catch"](function(a){v.loading=!1,v.error=a.data})},v.createBrand=function(){v.newBrand={userClient:b.user.subsidiary.userClient,code:v.brands.length+1,active:!0}},v.createLine=function(){v.newLine={userClient:b.user.subsidiary.userClient,code:v.lineas.length+1,active:!0,groupLines:[]}},v.createGroup=function(){v.newGroup={line:v.selectedLine,code:v.groups.length+1,active:!0,products:[]}},v.createSubGroup=function(){v.newSubGroup={groupLine:v.selectedGroup,code:v.subGroups.length+1,active:!0,subGroups:[]}},v.saveNewBrand=function(){j.create(v.newBrand).then(function(a){v.brands.push(a),v.product.brand=a,v.newBrand=void 0})["catch"](function(a){v.loading=!1,v.error=a.data})},v.saveNewLine=function(){k.create(v.newLine).then(function(a){v.lineas.push(a),v.selectedLine=a,v.newLine=void 0,v.groups=[]})["catch"](function(a){v.loading=!1,v.error=a.data})},v.saveNewGroup=function(){l.create(v.newGroup).then(function(a){v.groups.push(a),v.selectedGroup=a,v.newGroup=void 0,v.subGroups=[]})["catch"](function(a){v.loading=!1,v.error=a.data})},v.saveNewSubGroup=function(){m.create(v.newSubGroup).then(function(a){v.subGroups.push(a),v.product.subgroup=a,v.newSubGroup=void 0})["catch"](function(a){v.loading=!1,v.error=a.data})},v.wiz2=function(){v.productBySubsidiaries=[],"SER"!==v.product.productType.code&&(v.product.unitOfMeasurementAbbr=v.messurementSelected.shortName,v.product.unitOfMeasurementFull=v.messurementSelected.name),a.each(v.subsidiaries,function(a){if(a.selected){var b={dateCreated:(new Date).getTime(),quantity:a.cantidad,subsidiary:a,active:!0};v.productBySubsidiaries.push(b)}}),r(),s(),v.wizard=2},v.wiz3=function(){v.wizard=3},v.deleteBrand=function(a){v.loading=!0,a.active=!1,j.update(a).then(function(a){v.loading=!1,r()})["catch"](function(a){v.loading=!1,v.error=a.data})},v.deleteLine=function(a){v.loading=!0,a.active=!1,k.update(a).then(function(a){v.loading=!1,s()})["catch"](function(a){
v.loading=!1,v.error=a.data})},v.deleteGroup=function(a){v.loading=!0,a.active=!1,l.update(a).then(function(a){v.loading=!1,v.getGroups()})["catch"](function(a){v.loading=!1,v.error=a.data})},v.deleteSubGroup=function(a){v.loading=!0,a.active=!1,m.update(a).then(function(a){v.getSubGroups(),v.loading=!1})["catch"](function(a){v.loading=!1,v.error=a.data})},v.save=function(){var a=e.isAnyInArrayStringEmpty([v.product.name]);a?v.error="Debe ingresar Nombre del producto":(v.loading=!0,void 0===v.product.id?t():u(!1))},v.remove=function(){v.product.active=!1,u(!0)},v.cancel=function(){v.wizard=0,v.product=void 0,v.selectedGroup=void 0,v.selectedLine=void 0,v.success=void 0,v.error=void 0},function(){o()}()}]),angular.module("integridadUiApp").controller("ProvidersCtrl",["_","$localStorage","$location","providerService","utilStringService",function(a,b,c,d,e){function f(){i.provider=void 0,i.providerList=[],d.getLazyByUserClientId(i.userData.subsidiary.userClient.id).then(function(a){i.providerList=a,i.loading=!1})["catch"](function(a){i.loading=!1,i.error=a.data})}function g(){d.create(i.provider).then(function(a){f(),i.error=void 0,i.success="Registro realizado con exito"})["catch"](function(a){i.loading=!1,i.error=a.data})}function h(){d.update(i.provider).then(function(a){i.provider.active?i.success="Registro actualizado con exito":i.success="Registro eliminado con exito",f(),i.error=void 0})["catch"](function(a){i.loading=!1,i.error=a.data})}var i=this;i.error=void 0,i.success=void 0,i.loading=!1,i.userData=b.user,i.provider=void 0,i.providerList=void 0,i.providerType=["PROVEEDOR TIPO 1","PROVEEDOR TIPO 2","PROVEEDOR TIPO 3","PROVEEDOR TIPO 4"],i.providerCreate=function(){i.error=void 0,i.success=void 0,i.provider={codeIntegridad:i.providerList.length+1,active:!0,userClient:i.userData.subsidiary.userClient}},i.editProvider=function(a){i.error=void 0,i.success=void 0,i.provider=a},i.disableSave=function(){return i.provider?e.isAnyInArrayStringEmpty([i.provider.codeIntegridad,i.provider.ruc,i.provider.name,i.provider.razonSocial,i.provider.country,i.provider.city,i.provider.address1,i.provider.contact,i.provider.providerType]):void 0},i.cancel=function(){i.provider=void 0},i.register=function(){i.provider.id?h():g()},i.remove=function(){i.provider.active=!1,h()},function(){f()}()}]),angular.module("app.services").factory("beforeunload",["$rootScope","$window",function(a,b){return b.onbeforeunload=function(b){var c={};a.$broadcast("onBeforeUnload",c)},b.onunload=function(){a.$broadcast("onUnload")},{}}]).run(["beforeunload",function(a){}]),angular.module("app.services").factory("authorizationService",["$localStorage",function(a){return{isLoggedIn:function(){return a.user?a.user:!1}}}]),angular.module("app.services").service("securityService",["$http","$base64",function(a,b){var c="https://integridad.herokuapp.com/integridad/v1",d={},e=b.encode("dan:12345");d.headers={"Content-Type":"application/json",Authorization:"Basic "+e},this.get=function(b){return a.get(c+b)},this["delete"]=function(b){return a["delete"](c+b)},this.post=function(b,e){var f=c+b;return a.post(f,e,d)},this.put=function(b,e){var f=c+b;return a.put(f,e,d)}}]),angular.module("app.services").service("ebillService",["$http",function(a){var b="https://link.datil.co/invoices/issue",c={};c.headers={"Content-Type":"application/json","X-Key":"734de6ccec5c4e688a84f7ab06620baf","X-Password":"12345"},this.post=function(d,e){var f=b+d;return a.post(f,e,c)}}]),angular.module("app.services").service("utilStringService",function(){this.isStringEmpty=function(a){return a?!1:!0},this.isAnyInArrayStringEmpty=function(a){for(var b,c=0;c<a.length;c++){if(!a[c]){b=!0;break}b=!1}return b},this.randomString=function(){for(var a="",b="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",c=0;5>c;c++)a+=b.charAt(Math.floor(Math.random()*b.length));return a}}),angular.module("app.services").service("validatorService",function(){this.isCedulaValid=function(a){if("string"==typeof a&&10==a.length&&/^\d+$/.test(a)){var b=a.split("").map(Number),c=10*b[0]+b[1];if(c>=1&&(24>=c||30==c)){var d=b.pop(),e=b.reduce(function(a,b,c){return a-b*(2-c%2)%9-9*(9==b)},1e3)%10;return e===d}return!1}},this.isRucValid=function(a){for(var b,c=a.length,d=0,e=0;c>e;e++)b=a.substring(e,e+1),(0==b||1==b||2==b||3==b||4==b||5==b||6==b||7==b||8==b||9==b)&&(d+=1);if(d==c){for(;1!=a.substring(10,13);)return!1;for(;a.substring(0,2)>24;)return!1;return!0}return!1}}),angular.module("app.services").service("countryListService",function(){this.getCountryList=function(){var a=["Afghanistan","Albania","Algeria","Andorra","Angola","Anguilla","Antigua &amp; Barbuda","Argentina","Armenia","Aruba","Australia","Austria","Azerbaijan","Bahamas","Bahrain","Bangladesh","Barbados","Belarus","Belgium","Belize","Benin","Bermuda","Bhutan","Bolivia","Bosnia &amp; Herzegovina","Botswana","Brazil","British Virgin Islands","Brunei","Bulgaria","Burkina Faso","Burundi","Cambodia","Cameroon","Canada","Cape Verde","Cayman Islands","Chad","Chile","China","Colombia","Congo","Cook Islands","Costa Rica","Cote D Ivoire","Croatia","Cruise Ship","Cuba","Cyprus","Czech Republic","Denmark","Djibouti","Dominica","Dominican Republic","Ecuador","Egypt","El Salvador","Equatorial Guinea","Estonia","Ethiopia","Falkland Islands","Faroe Islands","Fiji","Finland","France","French Polynesia","French West Indies","Gabon","Gambia","Georgia","Germany","Ghana","Gibraltar","Greece","Greenland","Grenada","Guam","Guatemala","Guernsey","Guinea","Guinea Bissau","Guyana","Haiti","Honduras","Hong Kong","Hungary","Iceland","India","Indonesia","Iran","Iraq","Ireland","Isle of Man","Israel","Italy","Jamaica","Japan","Jersey","Jordan","Kazakhstan","Kenya","Kuwait","Kyrgyz Republic","Laos","Latvia","Lebanon","Lesotho","Liberia","Libya","Liechtenstein","Lithuania","Luxembourg","Macau","Macedonia","Madagascar","Malawi","Malaysia","Maldives","Mali","Malta","Mauritania","Mauritius","Mexico","Moldova","Monaco","Mongolia","Montenegro","Montserrat","Morocco","Mozambique","Namibia","Nepal","Netherlands","Netherlands Antilles","New Caledonia","New Zealand","Nicaragua","Niger","Nigeria","Norway","Oman","Pakistan","Palestine","Panama","Papua New Guinea","Paraguay","Peru","Philippines","Poland","Portugal","Puerto Rico","Qatar","Reunion","Romania","Russia","Rwanda","Saint Pierre &amp; Miquelon","Samoa","San Marino","Satellite","Saudi Arabia","Senegal","Serbia","Seychelles","Sierra Leone","Singapore","Slovakia","Slovenia","South Africa","South Korea","Spain","Sri Lanka","St Kitts &amp; Nevis","St Lucia","St Vincent","St. Lucia","Sudan","Suriname","Swaziland","Sweden","Switzerland","Syria","Taiwan","Tajikistan","Tanzania","Thailand","Timor L'Este","Togo","Tonga","Trinidad &amp; Tobago","Tunisia","Turkey","Turkmenistan","Turks &amp; Caicos","Uganda","Ukraine","United Arab Emirates","United Kingdom","United States","United States Minor Outlying Islands","Uruguay","Uzbekistan","Venezuela","Vietnam","Virgin Islands (US)","Yemen","Zambia","Zimbabwe"];return a},this.getCitiesEcuador=function(){var a=["Ambato","Arajuno","Babahoyo","Bahía de Caráquez","Baños de Agua Santa","Cuenca","Coca","Durán","Esmeraldas","Guaranda","Guayaquil","Ibarra","La Libertad","Lago Agrio","Latacunga","Loja","Macas","Machala","Manta","Milagro","Nueva Loja","Portoviejo","Piñas","Pintag","Quevedo","Quito","Riobamba","Santo Domingo de los Colorados","Salinas","Shell Mera","Tulcán"];return a}}),angular.module("app.services").service("authService",["securityService",function(a){this.authUser=function(b){return a.post("/user/auth",b).then(function(a){return a.data})},this.registerUser=function(b){return a.post("/user",b).then(function(a){return a.data})},this.activeUser=function(b,c){return a.put("/user/"+b+"/"+c).then(function(a){return a.data})},this.updateUser=function(b){return a.put("/user",b).then(function(a){return a.data})},this.recoverUser=function(b){return a.post("/user/recover",b).then(function(a){return a.data})},this.getLazy=function(){return a.get("/user/lazy").then(function(a){return a.data})},this.getBosses=function(b,c){return a.get("/user/lazy/bosses/"+c+"/"+b).then(function(a){return a.data})}}]),angular.module("app.services").service("clientService",["securityService",function(a){this.create=function(b){return a.post("/client",b).then(function(a){return a.data})},this.update=function(b){return a.put("/client",b).then(function(a){return a.data})},this.getLazy=function(){return a.get("/client/lazy").then(function(a){return a.data})},this.getLazyByProjectId=function(b){return a.get("/client/lazy/"+b).then(function(a){return a.data})}}]),angular.module("app.services").service("permissionService",["securityService",function(a){this.getPermissions=function(b){return a.post("/user_type_permission/user_type",b).then(function(a){return a.data})}}]),angular.module("app.services").service("userTypeService",["securityService",function(a){this.getUserTypes=function(){return a.get("/user_type/lazy").then(function(a){return a.data})}}]),angular.module("app.services").service("subsidiaryService",["securityService",function(a){this.getByProjectId=function(b){return a.get("/subsidiary/user_client/"+b).then(function(a){return a.data})},this.getById=function(b){return a.get("/subsidiary/"+b).then(function(a){return a.data})}}]),angular.module("app.services").service("projectService",["securityService",function(a){this.create=function(b){return a.post("/project",b).then(function(a){return a.data})},this.update=function(b){return a.put("/project",b).then(function(a){return a.data})},this.getLazy=function(){return a.get("/project/lazy").then(function(a){return a.data})},this.getById=function(b){return a.get("/project/"+b).then(function(a){return a.data})},this.getNumberOfProjects=function(b){return a.get("/project//clients_number/"+b).then(function(a){return a.data})}}]),angular.module("app.services").service("productService",["securityService",function(a){this.create=function(b){return a.post("/product",b).then(function(a){return a.data})},this.update=function(b){return a.put("/product",b).then(function(a){return a.data})},this["delete"]=function(b){return a["delete"]("/product/"+b).then(function(a){return a.data})},this.getById=function(b){return a.get("/product/"+b).then(function(a){return a.data})},this.getLazy=function(){return a.get("/product/actives").then(function(a){return a.data})},this.getLazyByProjectId=function(b){return a.get("/product/actives/user_client/"+b).then(function(a){return a.data})},this.getLazyBySusidiaryId=function(b){return a.get("/product/actives/subsidiary/"+b).then(function(a){return a.data})}}]),angular.module("app.services").service("productTypeService",["securityService",function(a){this.getproductTypesLazy=function(){return a.get("/product_type/actives_lazy").then(function(a){return a.data})}}]),angular.module("app.services").service("messurementListService",function(){this.getMessurementList=function(){var a=[{shortName:"UND",name:"UNIDAD"},{shortName:"LT",name:"LITRO"},{shortName:"KL",name:"KILO"},{shortName:"LB",name:"LIBRA"},{shortName:"MT",name:"METRO"},{shortName:"GR",name:"GRAMO"},{shortName:"CJ",name:"CAJA"},{shortName:"PQ",name:"PAQUETE"}];return a}}),angular.module("app.services").service("brandService",["securityService",function(a){this.getBrandsLazy=function(b){return a.get("/brand/actives_lazy/"+b).then(function(a){return a.data})},this.create=function(b){return a.post("/brand",b).then(function(a){return a.data})},this.update=function(b){return a.put("/brand",b).then(function(a){return a.data})}}]),angular.module("app.services").service("lineService",["securityService",function(a){this.getLinesLazy=function(b){return a.get("/line/actives_lazy/"+b).then(function(a){return a.data})},this.create=function(b){return a.post("/line",b).then(function(a){return a.data})},this.update=function(b){return a.put("/line",b).then(function(a){return a.data})}}]),angular.module("app.services").service("groupService",["securityService",function(a){this.getGroupsByLineLazy=function(b){return a.get("/group_line/actives_lazy/"+b).then(function(a){return a.data})},this.create=function(b){return a.post("/group_line",b).then(function(a){return a.data})},this.update=function(b){return a.put("/group_line",b).then(function(a){return a.data})}}]),angular.module("app.services").service("subgroupService",["securityService",function(a){this.getSubGroupsByGroupLazy=function(b){return a.get("/sub_group/actives_lazy/"+b).then(function(a){return a.data})},this.create=function(b){return a.post("/sub_group",b).then(function(a){return a.data})},this.update=function(b){return a.put("/sub_group",b).then(function(a){return a.data})}}]),angular.module("app.services").service("cashierService",["securityService",function(a){this.getBySubsidiaryId=function(b){return a.get("/cashier/subsidiary/"+b).then(function(a){return a.data})},this.update=function(b){return a.put("/cashier",b).then(function(a){return a.data})}}]),angular.module("app.services").service("billService",["securityService",function(a){this.getClaveDeAcceso=function(b,c){return a.post("/bill/clave_acceso/"+c,b).then(function(a){return a})},this.create=function(b){return a.post("/bill",b).then(function(a){return a.data})},this.getByClientId=function(b){return a.get("/bill/client/"+b).then(function(a){return a.data})},this.getById=function(b){return a.get("/bill/"+b).then(function(a){return a.data})},this.getByStringSeq=function(b){return a.get("/bill/seq/"+b).then(function(a){return a.data})}}]),angular.module("app.services").service("providerService",["securityService",function(a){this.create=function(b){return a.post("/provider",b).then(function(a){return a.data})},this.update=function(b){return a.put("/provider",b).then(function(a){return a.data})},this.getById=function(b){return a.get("/provider/"+b).then(function(a){return a.data})},this.getLazy=function(){return a.get("/provider/lazy").then(function(a){return a.data})},this.getLazyByUserClientId=function(b){return a.get("/provider/lazy/client/"+b).then(function(a){return a.data})}}]),angular.module("app.services").service("requirementService",function(){function a(a){var b=new Date(a.getTime()-18e6);return b.toISOString().toString()}function b(a){return tipyIdCode={RUC:"04",CED:"05"},tipyIdCode[a]}this.createRequirement=function(c,d,e,f,g,h){var i=[],j=void 0;_.each(h,function(a){if("credito"!==a.medio)i.push(a);else{void 0===j&&(j={});var b=_.max(a.credits,function(a){return a.fecha});j.monto=a.total;var c=new Date(b.fecha),d=c.getFullYear().toString(),e=(c.getMonth()+1).toString(),f=c.getDate().toString(),g=e.split(""),h=f.split("");j.fecha_vencimiento=d+"-"+(g[1]?e:"0"+g[0])+"-"+(h[1]?f:"0"+h[0])}});var k={ambiente:1,tipo_emision:1,secuencial:d.billSeq,fecha_emision:a($("#pickerBillDate").data("DateTimePicker").date().toDate()),emisor:{ruc:e.cashier.subsidiary.userClient.ruc,obligado_contabilidad:!0,contribuyente_especial:"",nombre_comercial:e.cashier.subsidiary.userClient.name,razon_social:e.cashier.subsidiary.userClient.name,direccion:e.cashier.subsidiary.userClient.address1,establecimiento:{punto_emision:e.cashier.threeCode,codigo:e.cashier.subsidiary.threeCode,direccion:e.cashier.subsidiary.address1}},moneda:"USD",totales:{total_sin_impuestos:d.subTotal,impuestos:f,importe_total:d.total,propina:0,descuento:d.discount},comprador:{email:c.email,identificacion:c.identification,tipo_identificacion:b(c.typeId),razon_social:c.name,direccion:c.address,telefono:c.phone},items:g,valor_retenido_iva:0,valor_retenido_renta:0};return void 0!==j&&(k.credito=j),_.isEmpty(i)||(k.pagos=i),k}}),angular.module("integridadUiApp").run(["$templateCache",function(a){"use strict";a.put("views/activate/activate.tpl.html",'<div class="panel panel-default"> <div class="panel-body"> <div class="row" ng-show="vm.errorActive"> <div class="form-group col-md-12"> <div class="alert alert-danger">{{vm.error}}</div> </div> </div> </div> </div> <div id="modalChangePassword" class="modal fade" role="dialog"> <div class="modal-dialog"> <div class="modal-content"> <div class="modal-header"> <h4 class="modal-title">Cambie su clave Temporal</h4> </div> <div class="modal-body"> <div class="row"> <div class="form-group col-md-6"> <label>Nuevo Password</label> <input type="password" class="form-control" id="password" ng-model="vm.newPass"> </div> <div class="form-group col-md-6"> <label>Confirmar nuevo Password</label> <input type="password" class="form-control" id="passwordConfirmation" ng-model="vm.passConfirmation" ng-change="vm.validatePassword()"> </div> </div> <div class="row" ng-show="vm.passwordNotMatch"> <div class="form-group col-md-12"> <div class="alert alert-danger">El nuevo password no coincide con la confirmacion</div> </div> </div> </div> <div class="modal-footer"> <div ng-if="vm.passConfirmation"> <button class="btn btn-primary" ng-click="vm.update()" data-dismiss="modal" ng-disabled="vm.passwordNotMatch">Cambiar e Ingresar</button> </div> </div> </div> </div> </div>'),a.put("views/bills/bill.tpl.html",'<div style="width: 100%;height: 100%;top: 0px;left: 0px;position: fixed;display: block; z-index: 99; background: rgba(255, 255, 255, 0.3)" ng-show="vm.loading"> <div style="position: absolute;top: 15%;z-index: 100; width: 100%; text-align: center"> <div class="sk-circle"> <div class="sk-circle1 sk-child"></div> <div class="sk-circle2 sk-child"></div> <div class="sk-circle3 sk-child"></div> <div class="sk-circle4 sk-child"></div> <div class="sk-circle5 sk-child"></div> <div class="sk-circle6 sk-child"></div> <div class="sk-circle7 sk-child"></div> <div class="sk-circle8 sk-child"></div> <div class="sk-circle9 sk-child"></div> <div class="sk-circle10 sk-child"></div> <div class="sk-circle11 sk-child"></div> <div class="sk-circle12 sk-child"></div> </div> </div> </div> <div class="header"> <h4> Factura </h4> </div> <div class="row" ng-show="vm.error !== undefined"> <div class="form-group col-md-12"> <div class="alert alert-danger">{{vm.error}}</div> </div> </div> <div class="row" ng-show="vm.success !== undefined"> <div class="form-group col-md-12"> <div class="alert alert-success">{{vm.success}}</div> </div> </div> <div ng-show="vm.clientSelected === undefined && vm.billList === undefined"> <input ng-model="searchText" class="form-control" placeholder="Buscar"> <table class="table table-striped"> <thead> <tr> <th> C&oacute;digo </th> <th> Nombre </th> <th> Ruc / C&eacute;dula </th> <th> <button type="button" class="btn btn-primary" ng-click="vm.clientCreate()"> Crear Cliente </button> </th> </tr> </thead> <tbody> <tr ng-show="vm.clientList == 0"> <td colspan="4"> No hay clientes ingresados </td> </tr> <tr ng-repeat="clientPreSelect in vm.clientList | orderBy:\'name\' | filter:searchText"> <td>{{ clientPreSelect.codApp }}</td> <td>{{ clientPreSelect.name }}</td> <td>{{ clientPreSelect.identification }}</td> <td> <button type="button" class="btn btn-primary" ng-click="vm.clientSelect(clientPreSelect)"> Facturar </button> <button type="button" class="btn btn-primary" ng-click="vm.clientConsult(clientPreSelect)"> Consultar </button> </td> </tr> </tbody> </table> </div> <div ng-show="vm.billList !== undefined"> <input ng-model="searchText" class="form-control" placeholder="Buscar"> <table class="table table-striped"> <thead> <tr> <th> N&uacute;mero </th> <th> Fecha </th> <th> Cliente </th> <th> Total </th> <th> </th> </tr> </thead> <tbody> <tr ng-show="vm.billList == 0"> <td colspan="4"> No hay facturas ingresados </td> </tr> <tr ng-repeat="bill in vm.billList | orderBy:\'dateCreated\':true | filter:searchText"> <td>{{ bill.stringSeq }}</td> <td>{{ bill.dateCreated | date : "dd/MM/yyyy"}}</td> <td>{{ bill.client.name }}</td> <td>{{ bill.total }}</td> <td> <button type="button" class="btn btn-primary" ng-click="vm.billSelect(bill)"> Ver </button> <!-- <button type="button" class="btn btn-primary" ng-click="vm.clientConsult(clientPreSelect)">\n            Consultar\n          </button> --> </td> </tr> </tbody> </table> <div class="row"> <div class="form-group col-md-12"> <button type="button" class="btn btn-primary" ng-click="vm.billList = undefined"> Cancelar </button> </div> </div> </div> <div ng-show="vm.clientSelected !== undefined" id="printArea" print-section> <div class="panel panel-default"> <div class="panel-heading"> <b>Datos del Cliente</b> </div> <div class="panel-body"> <div class="row"> <div class="form-group col-md-12"> <table width="100%"> <tr> <td width="30%" align="center"><img src="images/{{vm.companyData.userClient.logo}}"><br></td> <td width="70%"> <b>{{vm.companyData.userClient.name}}</b><br> <b>Matriz: {{vm.companyData.userClient.address1}}</b><br> <b>Establecimiento: {{vm.companyData.address1}}</b><br><br> <b>RUC: {{vm.companyData.userClient.ruc}}</b><br> </td> </tr> </table> </div> </div> <div class="row"> <div class="form-group col-md-12"> <table width="100%"> <tr> <td width="30%"> <label>FECHA: </label> <div class="input-group date" id="pickerBillDate"> <input type="text" class="form-control input-group-addon" ng-disabled="!vm.newBill"> <span class="input-group-addon"><span class="glyphicon glyphicon-calendar"></span> </div> <script>var defaultDate = new Date();\n                  $(\'#pickerBillDate\').datetimepicker({\n                    format: "DD/MM/YY HH:mm",\n                  });</script> </td> <td width="70%"> <div style="padding-left: 10px" ng-show="!vm.newBill" print-if="!vm.newBill"> <label>CLAVE DE ACCESO: </label><br> {{vm.bill.claveDeAcceso}} </div> </td> </tr> </table> </div> </div> <div class="row"> <div class="form-group col-md-12"> <table width="100%"> <tr> <td> <b>NOMBRE: </b>{{vm.clientSelected.name}} </td> <td> <b ng-if="vm.clientSelected.typeId === \'CED\'">CEDULA: </b> <b ng-if="vm.clientSelected.typeId === \'RUC\'">RUC: </b> {{vm.clientSelected.identification}} </td> <td> <b>TELEFONO: </b>{{vm.clientSelected.phone}} </td> </tr> </table> </div> </div> <div class="row"> <div class="form-group col-md-12"> <table width="100%"> <tr><td><b>DIRECCION: </b>{{vm.clientSelected.address}}</td></tr> <tr><td><b>E-MAIL: </b>{{vm.clientSelected.email}}</td></tr> <tr> <td> <b>NUMERO DE FACTURA: </b> {{vm.seqNumber}} &nbsp;&nbsp;&nbsp; <a data-toggle="modal" data-target="#modalEditBillNumber" ng-click="vm.verifyUser()" ng-if="vm.newBill" print-remove> Editar </a> </td> </tr> <tr print-remove> <td> <b>PRECIO CONVENIDO: </b> <select ng-options="price as price.name for price in vm.prices" ng-if="vm.newBill" ng-model="vm.priceType" class="form-control" ng-change="vm.reCalculateTotal()" ng-disabled="vm.bill.details.length > 0"></select> <span ng-if="!vm.newBill">{{vm.bill.priceType}}</span> </td> </tr> </table> </div> </div> <div class="row" ng-if="vm.companyData.userClient.espTemp" print-if="vm.companyData.userClient.espTemp"> <div class="form-group col-md-12"> <table width="100%" style="border-collapse: separate; border-spacing: 6px"> <tr> <td width="50%"> <b>ORDEN DE COMPRA: </b> <input type="text" ng-disabled="!vm.newBill" ng-model="vm.bill.ordenDecompra" class="form-control"> </td> <td width="50%"> <b>SERVICES RECEIPTS REGISTER: </b> <input type="text" ng-disabled="!vm.newBill" ng-model="vm.bill.srr" class="form-control"> </td> </tr> <tr> <td width="50%"> <b>LUGAR: </b> <input type="text" ng-disabled="!vm.newBill" ng-model="vm.bill.lugar" class="form-control"> </td> <td width="50%"> <b>OTI/OTIR: </b> <input type="text" ng-disabled="!vm.newBill" ng-model="vm.bill.otir" class="form-control"> </td> </tr> </table> </div> </div> <div class="row" print-remove> <div class="form-group col-md-6"> <b>DESCUENTO &#37;: </b> <input type="text" ng-change="vm.reCalculateTotal()" onkeypress="return ((event.which >= 48 && event.which <= 57) || (event.keyCode == 9 || event.keyCode == 8))" ng-model="vm.bill.discountPercentage" class="form-control" maxlength="9" ng-change="vm.getFechaCobro()" ng-disabled="!vm.newBill"> </div> </div> </div> </div> <div class="panel panel-default"> <div class="panel-heading"> <b>Detalle</b> </div> <div class="panel-body"> <div class="row"> <div class="form-group col-md-12"> <table class="table table-striped"> <thead> <tr> <th> Item </th> <th> C&oacute;digo </th> <th> Descripci&oacute;n </th> <th> Cant. </th> <th> U. Med. </th> <th> V. Unit. </th> <th> Desc. </th> <th> V. Total. </th> <th ng-if="vm.newBill"> <button type="button" class="btn btn-primary" ng-click="vm.addProduct()" data-toggle="modal" data-target="#modalAddProduct" print-remove> <span class="glyphicon glyphicon-plus" aria-hidden="true"></span> </button> </th> </tr> </thead> <tbody> <tr ng-show="vm.clientList == 0"> <td colspan="4"> No hay detalles ingresados </td> </tr> <tr ng-repeat="detail in vm.bill.details"> <td>{{$index + 1}}</td> <td>{{detail.product.codeIntegridad}}</td> <td><span print-only>{{detail.product.subgroup.groupLine.line.name}} - {{detail.product.subgroup.groupLine.name}} - {{detail.product.subgroup.name}} - <br></span>{{detail.product.name}}</td> <td>{{detail.quantity}}</td> <td>{{detail.product.unitOfMeasurementFull}}</td> <td>{{detail.costEach}}</td> <td>{{detail.discount}}</td> <td>{{detail.total}}</td> <td ng-if="vm.newBill"> <button type="button" class="btn btn-primary" ng-click="vm.editDetail(detail, $index)" data-toggle="modal" data-target="#modalAddProduct" print-remove> <span class="glyphicon glyphicon-pencil" aria-hidden="true"></span> </button> <button type="button" class="btn btn-primary" ng-click="vm.removeDetail($index)" print-remove> <span class="glyphicon glyphicon-trash" aria-hidden="true"></span> </button> </td> </tr> <tr> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td><b>SUBTOTAL: </b></td> <td>{{vm.bill.subTotal}}</td> <td> </td> </tr> <tr> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td><b>DESCUENTO: </b></td> <td>{{vm.bill.discount}}</td> <td> </td> </tr> <tr> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td><b>BASE 0%: </b></td> <td>{{vm.bill.baseNoTaxes}}</td> <td> </td> </tr> <tr> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td><b>BASE 12%: </b></td> <td>{{vm.bill.baseTaxes}}</td> <td> </td> </tr> <!-- <tr ng-if="!vm.companyData.userClient.espTemp">\n                <td></td>\n                <td></td>\n                <td></td>\n                <td></td>\n                <td></td>\n                <td></td>\n                <td><b>ICE: </b></td>\n                <td>{{vm.bill.ice}}</td>\n                <td></td>\n              </tr> --> <tr> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td><b>IVA: </b></td> <td>{{vm.bill.iva}}</td> <td></td> </tr> <tr> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td><b>TOTAL: </b></td> <td>{{vm.bill.total}}</td> <td></td> </tr> </tbody> </table> </div> </div> <div class="row" print-remove> <div class="form-group col-md-12"> <button type="button" class="btn btn-primary" ng-if="vm.newBill" data-toggle="modal" data-target="#modalAddPago" ng-disabled="vm.bill.total <= 0 || vm.billed"> Forma de Pago </button> <!-- <button print-btn type="button" class="btn btn-primary" ng-click="vm.getClaveAcceso()"\n          ng-disabled="(vm.pagos.length === 0 || vm.getCambio < 0) || vm.billed" print-remove>\n            Facturar\n          </button> --> <button type="button" class="btn btn-primary" ng-if="vm.newBill" ng-click="vm.clientSelected = undefined"> Cancelar </button> </div> </div> </div> </div> <div class="panel panel-default" ng-if="!vm.newBill" print-remove> <div class="panel-heading"> <b>Forma de Pago</b> </div> <div class="panel-body"> <div class="row"> <div class="col-md-12"> <table class="table table-striped"> <thead> <tr> <th> Medio </th> <th> Valor</th> <th> </th> </tr> </thead> <tbody> <tr ng-repeat="pago in vm.pagos"> <td> {{ pago.medio }}<br> <span ng-if="pago.medio === \'cheque\'"> {{ pago.chequeBank }} - {{ pago.chequeAccount }} - {{pago.chequeNumber}}<br> </span> <span ng-if="pago.medio === \'credito\'"> NUMER DE PAGOS: {{ pago.creditoNumeroPagos }} - INTERVALOS: {{ pago.creditoIntervalos }}<br> </span> <span ng-if="pago.medio === \'cheque_posfechado\'"> {{ pago.chequeBank }} - {{ pago.chequeAccount }} - {{pago.chequeNumber}} - {{pago.fechaCobro | date : "dd/MM/yyyy"}}<br> </span> <span ng-if="pago.medio === \'tarjeta_credito\' || pago.medio === \'tarjeta_debito\'"> {{ pago.cardBrand }}<br> </span> {{ pago.payForm }} </td> <td>{{ pago.total }}</td> <td> </td> </tr> <tr> <td><b>TOTAL</b></td> <td>{{vm.getTotalPago()}}</td> <td> Vuelto: {{vm.getCambio}} </td> </tr> </tbody> </table> </div> </div> <div class="row" print-remove> <div class="form-group col-md-12"> <button type="button" class="btn btn-primary" ng-click="vm.clientSelected = undefined"> Cancelar </button> <button print-btn type="button" class="btn btn-primary" ng-if="!vm.newBill" print-remove> Imprimir </button> </div> </div> </div> </div> <div class="panel panel-default" print-only> <div class="panel-heading"> <b>Forma de Pago</b> </div> <div class="panel-body"> <div class="row"> <div class="col-md-12"> <table class="table table-striped"> <thead> <tr> <th> Medio </th> <th> Valor</th> <th> </th> </tr> </thead> <tbody> <tr ng-repeat="pago in vm.pagos"> <td> {{ pago.medio }}<br> <span ng-if="pago.medio === \'cheque\'"> {{ pago.chequeBank }} - {{ pago.chequeAccount }} - {{pago.chequeNumber}}<br> </span> <span ng-if="pago.medio === \'credito\'"> NUMER DE PAGOS: {{ pago.creditoNumeroPagos }} - INTERVALOS: {{ pago.creditoIntervalos }}<br> </span> <span ng-if="pago.medio === \'cheque_posfechado\'"> {{ pago.chequeBank }} - {{ pago.chequeAccount }} - {{pago.chequeNumber}} - {{pago.fechaCobro | date : "dd/MM/yyyy"}}<br> </span> <span ng-if="pago.medio === \'tarjeta_credito\' || pago.medio === \'tarjeta_debito\'"> {{ pago.cardBrand }}<br> </span> {{ pago.payForm }} </td> <td>{{ pago.total }}</td> <td> </td> </tr> <tr> <td><b>TOTAL</b></td> <td>{{vm.getTotalPago()}}</td> <td> Vuelto: {{vm.getCambio}} </td> </tr> </tbody> </table> </div> </div> </div> </div> <div class="row" print-only print-if="vm.companyData.userClient.espTemp"> <div class="panel panel-default" print-only> <div class="panel-body"> <div class="row"> <div class="col-md-12"> <table width="100%"> <tr> <td align="center" colspan="2"> Debo y pagaré incondicionalmente a la orden de Petroleum & Power Engineers S.A. el valor total de esta factura sin protesto. </td> </tr> <tr> <td width="50%" align="center"> <br><br><br> ________________<br> FIRMA AUTORIZADA </td> <td width="50%" align="center"> <br><br><br> ________________<br> RECIBI CONFORME </td> </tr> </table> </div> </div> </div> </div> </div> </div> <div id="modalAddPago" class="modal fade" role="dialog"> <div class="modal-dialog"> <div class="modal-content"> <div class="modal-header"> <button type="button" class="close" data-dismiss="modal" ng-click="vm.medio={}">&times;</button> <h4 class="modal-title">Agregar Pago</h4> TOTAL: {{vm.bill.total}} </div> <div class="modal-body"> <div class="row"> <div class="form-group col-md-6"> <b>TIPO DE PAGO: </b> <select ng-options="med.code as med.name for med in vm.medList  | orderBy:\'name\'  track by med.code" ng-model="vm.medio.medio" class="form-control" ng-change="vm.loadMedio()"> </select> </div> <div class="form-group col-md-6"> <b>FORMA DE PAGO: </b><br> {{vm.medio.payForm}}  </div> </div> <div class="row" ng-show="vm.medio.medio === \'cheque\' || vm.medio.medio === \'cheque_posfechado\'"> <div class="form-group col-md-4"> <b>BANCO: </b> <input type="text" ng-model="vm.medio.chequeBank" class="form-control" maxlength="9"> </div> <div class="form-group col-md-4"> <b>CUENTA: </b> <input type="text" ng-model="vm.medio.chequeAccount" class="form-control" maxlength="9"> </div> <div class="form-group col-md-4"> <b>NUMERO DE CHEQUE: </b> <input type="text" ng-model="vm.medio.chequeNumber" class="form-control" maxlength="9"> </div> </div> <div class="row" ng-show="vm.medio.medio === \'cheque_posfechado\'"> <div class="form-group col-md-6"> <b>DIAS PLAZO: </b> <input type="text" onkeypress="return ((event.which >= 48 && event.which <= 57) || (event.keyCode == 9 || event.keyCode == 8))" ng-model="vm.medio.chequeDiasPlazo" class="form-control" maxlength="9" ng-change="vm.getFechaCobro()"> </div> <div class="form-group col-md-6"> <b>FECHA COBRO: </b><br> {{vm.medio.fechaCobro | date : "dd/MM/yyyy"}} </div> </div> <div class="row" ng-show="vm.medio.medio === \'credito\'"> <div class="form-group col-md-4"> <b>NUMERO DE PAGOS: </b> <input type="text" onkeypress="return ((event.which >= 48 && event.which <= 57) || (event.keyCode == 9 || event.keyCode == 8))" ng-model="vm.medio.creditoNumeroPagos" class="form-control" maxlength="2"> </div> <div class="form-group col-md-4"> <b>INTERVALOS DE DIAS: </b><br> <input type="text" onkeypress="return ((event.which >= 48 && event.which <= 57) || (event.keyCode == 9 || event.keyCode == 8))" ng-model="vm.medio.creditoIntervalos" class="form-control" maxlength="2"> </div> <div class="form-group col-md-4"> <br> <button type="button" class="btn btn-primary" ng-click="vm.loadCredit()" ng-disabled="vm.medio.creditoIntervalos === undefinded || vm.medio.creditoNumeroPagos === undefined"> Calcular </button> </div> </div> <div class="row" ng-show="vm.medio.medio === \'credito\'"> <div class="form-group col-md-12"> <table class="table table-striped"> <thead> <tr> <th> PAGO </th> <th> DIAS PLAZO </th> <th> FECHAS </th> <th> VALOR </th> </tr> </thead> <tbody> <tr ng-repeat="cred in vm.medio.credits"> <td>{{ cred.payNumber }}</td> <td>{{ cred.diasPlazo }}</td> <td>{{ cred.fecha | date:\'dd/MM/yyyy\'}}</td> <td>{{ cred.valor }}</td> </tr> </tbody> </table> </div> </div> <div class="row" ng-show="vm.medio.medio === \'tarjeta_credito\' || vm.medio.medio === \'tarjeta_debito\'"> <div class="form-group col-md-6"> <b>TARJETA: </b> <select ng-options="card as card for card in vm.creditCardList" ng-model="vm.medio.cardBrand" class="form-control"> </select> </div> </div> <div class="row"> <div class="form-group col-md-6" ng-if="vm.medio.medio === \'efectivo\' || vm.medio.medio === \'dinero_electronico_ec\'"> <b>VALOR: </b> <input type="text" onkeypress="return ((event.which >= 46 && event.which <= 57) || (event.keyCode == 9 || event.keyCode == 8))" ng-model="vm.medio.total" class="form-control" maxlength="9"> </div> <div class="form-group col-md-6" ng-if="vm.medio.medio !== \'efectivo\' && vm.medio.medio !== \'dinero_electronico_ec\'"> <b>VALOR: </b><br> $ {{vm.medio.total}} </div> <div class="form-group col-md-4"> <br> <button type="button" class="btn btn-primary" ng-click="vm.addPago()" ng-disabled="vm.medio.medio === undefinded || vm.medio.total === undefined"> Agregar </button> </div> </div> <div class="row"> <div class="col-md-12"> <table class="table table-striped"> <thead> <tr> <th> Medio </th> <th> Valor</th> <th> </th> </tr> </thead> <tbody> <tr ng-show="vm.pagos == 0"> <td colspan="4"> No hay pagos ingresados </td> </tr> <tr ng-repeat="pago in vm.pagos"> <td>{{ pago.medio }}</td> <td>{{ pago.total }}</td> <td> <button type="button" class="btn btn-primary" ng-click="vm.removePago($index)"> Eliminar </button> </td> </tr> <tr> <td><b>TOTAL</b></td> <td>{{vm.getTotalPago()}}</td> <td> Vuelto: {{vm.getCambio}} </td> </tr> </tbody> </table> </div> </div> </div> <div class="modal-footer"> <button type="button" class="btn btn-primary" data-dismiss="modal" ng-disabled="vm.pagos.length === 0 || vm.getCambio < 0"> Cerrar </button> <button print-btn type="button" class="btn btn-primary" ng-click="vm.getClaveAcceso()" ng-disabled="(vm.pagos.length === 0 || vm.getCambio < 0) || vm.billed" print-remove> Facturar </button> </div> </div> </div> </div> <div id="modalAddProduct" class="modal fade" role="dialog"> <div class="modal-dialog"> <div class="modal-content"> <div class="modal-header"> <button type="button" class="close" data-dismiss="modal" ng-click="vm.productToAdd=undefined">&times;</button> <h4 class="modal-title">Agregar Producto</h4> </div> <div class="modal-body"> <div class="row"> <div class="col-md-12" ng-if="vm.productToAdd === undefined"> <input ng-model="searchTextProd" class="form-control" placeholder="Buscar"> <table class="table table-striped"> <thead> <tr> <th> Nombre </th> <th> Cantidad Disponible</th> <th> Precio Unitario $</th> <th> </th> </tr> </thead> <tbody> <tr ng-show="vm.productList == 0"> <td colspan="4"> No hay proyectos ingresados </td> </tr> <tr ng-repeat="productSelect in vm.productList | orderBy:\'name\' | filter:searchTextProd"> <td>{{ productSelect.name }}</td> <td>{{ productSelect.quantity }}</td> <td>{{ vm.getCost(\'1.\'+ productSelect[vm.priceType.cod], productSelect.averageCost) }}</td> <td> <button type="button" class="btn btn-primary" ng-click="vm.selectProductToAdd(productSelect)"> Seleccionar </button> </td> </tr> </tbody> </table> </div> <div class="col-md-12" ng-if="vm.productToAdd !== undefined"> <div class="panel panel-default"> <div class="panel-heading"> <b>{{vm.productToAdd.name}}</b> </div> <div class="panel-body"> <div class="row" ng-show="vm.errorQuantity"> <div class="form-group col-md-12"> <div class="alert alert-danger">{{vm.errorQuantity}}</div> </div> </div> <div class="row"> <div class="form-group col-md-6"> <b>CANTIDAD DISPONIBLE: </b><h4>{{vm.productToAdd.quantity}}</h4> </div> <div class="form-group col-md-6"> <b>CANTIDAD A VENDER: </b> <input type="text" onkeypress="return ((event.which >= 48 && event.which <= 57) || (event.keyCode == 9 || event.keyCode == 8))" ng-model="vm.quantity" class="form-control" maxlength="9"> </div> </div> <div class="row"> <div class="form-group col-md-6"> <b>PRECIO UNITARIO: </b> <input type="text" ng-model="vm.productToAdd.costEachCalculated" class="form-control"> </div> </div> </div> <div class="panel-footer"> <button type="button" class="btn btn-primary" ng-click="vm.productToAdd = undefined; vm.quantity = undefined"> Cancelar </button> </div> </div> </div> </div> </div> <div class="modal-footer"> <button type="button" class="btn btn-primary" ng-click="vm.acceptProduct(true)" ng-disabled="vm.productToAdd === undefined"> Aceptar y Cerrar </button> <button type="button" class="btn btn-primary" ng-click="vm.acceptProduct(false)" ng-disabled="vm.productToAdd === undefined"> Aceptar y Agregar Mas productos </button> </div> </div> </div> </div> <div id="modalEditBillNumber" class="modal fade" role="dialog"> <div class="modal-dialog"> <div class="modal-content" ng-show="vm.isEmp"> <div class="modal-header"> <button type="button" class="close" data-dismiss="modal">&times;</button> <h4 class="modal-title">Editar N&uacute;mero de Factura</h4> </div> <div class="modal-body"> <div class="row" ng-show="vm.errorValidateAdm !== undefined"> <div class="form-group col-md-12"> <div class="alert alert-danger">{{vm.errorValidateAdm}}</div> </div> </div> <div class="row"> <div class="form-group col-md-12"> <b>CLAVE ADMINISTRADOR: </b> <input type="password" ng-model="vm.passwordAdm" class="form-control"> </div> </div> <div class="row"> <div class="form-group col-md-12"> <button type="button" class="btn btn-primary" ng-click="vm.validateAdm()" ng-disabled="vm.passwordAdm === undefined"> Validar </button> </div> </div> </div> </div> <div class="modal-content" ng-show="!vm.isEmp"> <div class="modal-header"> <button type="button" class="close" data-dismiss="modal" ng-click="vm.productToAdd=undefined">&times;</button> <h4 class="modal-title">Editar N&uacute;mero de Factura</h4> </div> <div class="modal-body"> <div class="row"> <div class="form-group col-md-12"> <b>NUEVO NUMERO DE FACTURA: </b> </div> </div> <div class="row"> <div class="form-group col-md-2"> {{vm.seqNumberFirstPart}}- </div> <div class="form-group col-md-10"> <input type="text" onkeypress="return ((event.which >= 48 && event.which <= 57) || (event.keyCode == 9 || event.keyCode == 8))" ng-model="vm.seqNumberSecondPart" class="form-control" maxlength="10"> </div> </div> <div class="row" ng-show="vm.seqErrorNumber !== undefined"> <div class="form-group col-md-12"> <div class="alert alert-danger">{{vm.seqErrorNumber}}</div> </div> </div> </div> <div class="modal-footer"> <button type="button" class="btn btn-primary" ng-click="vm.acceptNewSeq()"> Aceptar </button> <button type="button" class="btn btn-primary" data-dismiss="modal"> Cancelar </button> </div> </div> </div> </div>'),
a.put("views/clients/clients.tpl.html",'<div style="width: 100%;height: 100%;top: 0px;left: 0px;position: fixed;display: block; z-index: 99; background: rgba(255, 255, 255, 0.3)" ng-show="vm.loading"> <div style="position: absolute;top: 15%;z-index: 100; width: 100%; text-align: center"> <div class="sk-circle"> <div class="sk-circle1 sk-child"></div> <div class="sk-circle2 sk-child"></div> <div class="sk-circle3 sk-child"></div> <div class="sk-circle4 sk-child"></div> <div class="sk-circle5 sk-child"></div> <div class="sk-circle6 sk-child"></div> <div class="sk-circle7 sk-child"></div> <div class="sk-circle8 sk-child"></div> <div class="sk-circle9 sk-child"></div> <div class="sk-circle10 sk-child"></div> <div class="sk-circle11 sk-child"></div> <div class="sk-circle12 sk-child"></div> </div> </div> </div> <div class="header"> <h4> Clientes </h4> </div> <div class="row" ng-show="vm.error !== undefined"> <div class="form-group col-md-12"> <div class="alert alert-danger">{{vm.error}}</div> </div> </div> <div class="row" ng-show="vm.success !== undefined"> <div class="form-group col-md-12"> <div class="alert alert-success">{{vm.success}}</div> </div> </div> <div ng-show="vm.client === undefined"> <input ng-model="searchText" class="form-control" placeholder="Buscar"> <table class="table table-striped"> <thead> <tr> <th> C&oacute;digo </th> <th> Nombre </th> <th> Ruc / C&eacute;dula </th> <th> <button type="button" class="btn btn-primary" ng-click="vm.clientCreate()"> Crear </button> </th> </tr> </thead> <tbody> <tr ng-show="vm.clientList == 0"> <td colspan="4"> No hay clientes ingresados </td> </tr> <tr ng-repeat="clientEdit in vm.clientList | orderBy:\'name\' | filter:searchText"> <td>{{ clientEdit.codApp }}</td> <td>{{ clientEdit.name }}</td> <td>{{ clientEdit.identification }}</td> <td> <button type="button" class="btn btn-primary" ng-click="vm.clientEdit(clientEdit)"> Editar </button> <button type="button" class="btn btn-primary" ng-click="vm.client=clientEdit" data-toggle="modal" data-target="#modalEliminar"> Eliminar </button> </td> </tr> </tbody> </table> </div> <div class="panel panel-default" ng-show="vm.client"> <div class="panel-body"> <div class="row"> <div class="form-group col-md-12"> <label>Nombre *: </label> <input type="text" ng-model="vm.client.name" class="form-control"> </div> </div> <div class="row"> <div class="form-group col-md-6"> <label>Tel&eacute;fono: (incluir c&oacute;digo de provincia ej: 02) </label> <input type="text" onkeypress="return ((event.which >= 48 && event.which <= 57) || (event.keyCode == 9 || event.keyCode == 8))" ng-model="vm.client.phone" class="form-control" maxlength="9"> </div> <div class="form-group col-md-6"> <label>Tel&eacute;fono celular: </label> <input type="text" onkeypress="return ((event.which >= 48 && event.which <= 57) || (event.keyCode == 9 || event.keyCode == 8))" ng-model="vm.client.celPhone" class="form-control" maxlength="10"> </div> </div> <div class="row"> <div class="form-group col-md-6"> <label>Pa&iacute;s: </label> <select ng-options="country for country in vm.countryList" ng-model="vm.client.country" class="form-control" ng-change="vm.validateEcuador()"></select> </div> <div class="form-group col-md-6" ng-show="vm.client.country === \'Ecuador\'"> <label>Ciudad: </label> <select ng-options="city for city in vm.citiesList" ng-model="vm.client.city" class="form-control"></select> </div> <div class="form-group col-md-6" ng-show="vm.client.country !== \'Ecuador\'"> <label>Ciudad: </label> <input type="text" ng-model="vm.client.city" class="form-control"> </div> </div> <div class="row"> <div class="form-group col-md-6"> <label>Tipo de Identificacion: </label> <select ng-options="item.code as item.name for item in [{code:\'CED\', name:\'CEDULA\'}, {code:\'RUC\', name:\'RUC\'}]" ng-model="vm.client.typeId" class="form-control"></select> </div> <div class="form-group col-md-6" ng-show="vm.client.typeId === \'CED\'"> <label>C&eacute;dula *: </label> <input type="text" onkeypress="return ((event.which >= 48 && event.which <= 57) || (event.keyCode == 9 || event.keyCode == 8))" ng-model="vm.client.identification" class="form-control" maxlength="10"> </div> <div class="form-group col-md-6" ng-show="vm.client.typeId === \'RUC\'"> <label>Ruc *: </label> <input type="text" onkeypress="return ((event.which >= 48 && event.which <= 57) || (event.keyCode == 9 || event.keyCode == 8))" ng-model="vm.client.identification" class="form-control" maxlength="13"> </div> </div> <div class="row"> <div class="form-group col-md-12"> <label>E-mail: </label> <input type="text" ng-model="vm.client.email" class="form-control"> </div> </div> <div class="row"> <div class="form-group col-md-12"> <label>Direcci&oacute;n: </label> <input type="text" ng-model="vm.client.address" class="form-control"> </div> </div> <!-- <div class="row">\n      <div class="form-group col-md-12">\n        <label>Intersecci&oacute;n: </label>\n        <input type="text" ng-model="vm.client.address2" class="form-control">\n      </div>\n    </div> --> <div class="row"> <div class="form-group col-md-6"> <label>C&oacute;digo Contabilidad: </label> <input type="text" ng-model="vm.client.codConta" class="form-control"> </div> <div class="form-group col-md-6"> <label>Contacto: </label> <input type="text" ng-model="vm.client.contact" class="form-control"> </div> </div> <div class="row"> <div class="form-group col-md-6"> <label>C&oacute;digo : </label> <input type="text" ng-model="vm.client.codApp" class="form-control"> </div> </div> </div> <div class="panel-footer"> <button type="button" class="btn btn-primary" ng-click="vm.save()" ng-disabled="vm.client.name === undefined || vm.client.identification === undefined ||\n      vm.client.codApp === undefined"> Guardar </button> <button type="button" class="btn btn-success" ng-click="vm.cancel()"> Cancelar </button> </div> </div> <div id="modalEliminar" class="modal fade" role="dialog"> <div class="modal-dialog"> <div class="modal-content"> <div class="modal-header"> <button type="button" class="close" data-dismiss="modal" ng-click="vm.client=undefined">&times;</button> <h4 class="modal-title">Advertencia</h4> </div> <div class="modal-body"> <div class="row"> <div class="col-md-12"> Esta seguro que desea Eliminar el cliente {{vm.client.name}} con identificacion: {{vm.client.identification}} </div> </div> </div> <div class="modal-footer"> <button type="button" class="btn btn-primary" ng-click="vm.remove()" data-dismiss="modal"> Eliminar </button> </div> </div> </div> </div>'),a.put("views/home/home.tpl.html",'<div class="panel panel-default"> <div class="panel-body"> <div class="row"> <div class="col-md-8 col-md-offset-2"> <img src="images/imagen1.8283985a.jpg" style="width: 100%"><br> </div> </div> <div class="row"> <div class="form-group col-md-12 text-center"> <span> <h3>BIENVENIDO AL SISTEMA CONTABLE INTEGRIDAD.<br>Un programa inteligente, hecho para servir.</h3> <span> </span></span></div> </div> </div> </div>'),a.put("views/main.html",'<div style="width: 100%;height: 100%;top: 0px;left: 0px;position: fixed;display: block; z-index: 99; background: rgba(255, 255, 255, 0.3)" ng-show="vm.loading"> <div style="position: absolute;top: 15%;z-index: 100; width: 100%; text-align: center"> <div class="sk-circle"> <div class="sk-circle1 sk-child"></div> <div class="sk-circle2 sk-child"></div> <div class="sk-circle3 sk-child"></div> <div class="sk-circle4 sk-child"></div> <div class="sk-circle5 sk-child"></div> <div class="sk-circle6 sk-child"></div> <div class="sk-circle7 sk-child"></div> <div class="sk-circle8 sk-child"></div> <div class="sk-circle9 sk-child"></div> <div class="sk-circle10 sk-child"></div> <div class="sk-circle11 sk-child"></div> <div class="sk-circle12 sk-child"></div> </div> </div> </div> <div class="row" ng-show="vm.init"> <div class="col-md-8 col-md-offset-2"> <img src="images/zolutions1.36c9be71.jpg"><br> </div> </div> <div class="panel panel-default" ng-show="vm.init && !vm.recover"> <form> <div class="panel-body"> <div class="row" ng-show="vm.error !== undefined"> <div class="form-group col-md-12"> <div class="alert alert-danger">{{vm.error}}</div> </div> </div> <div class="row" ng-show="vm.success !== undefined"> <div class="form-group col-md-12"> <div class="alert alert-success">{{vm.success}}</div> </div> </div> <div class="row"> <div class="form-group col-md-6"> <label>E-mail: </label> <input type="text" ng-model="vm.email" name="email" id="email" class="form-control"> </div> <div class="form-group col-md-6"> <label>Password: </label> <input type="password" ng-model="vm.password" class="form-control"> </div> </div> </div> <div class="panel-footer"> <button class="btn btn-primary" ng-click="vm.login()" ng-disabled="vm.email === undefined || vm.password === undefined"> Ingresar </button> <!-- <button type="button" class="btn btn-success"\n      ng-click="vm.init = false; vm.userIntegridad = {}; vm.success=undefined; vm.error=undefined">\n        Registrarse\n      </button> --> <button type="button" class="btn btn-warning" ng-click="vm.recover = true; vm.success=undefined; vm.error=undefined"> Olvid&eacute; mi Password </button> </div> </form> </div> <div class="panel panel-default" ng-show="vm.recover"> <div class="panel-body"> <div class="row" ng-show="vm.error !== undefined"> <div class="form-group col-md-12"> <div class="alert alert-danger">{{vm.error}}</div> </div> </div> <div class="row" ng-show="vm.success !== undefined"> <div class="form-group col-md-12"> <div class="alert alert-success">{{vm.success}}</div> </div> </div> <div class="row"> <div class="form-group col-md-12"> <label>Ingrese E-mail de la cuenta a recuperar: </label> <input type="text" ng-model="vm.email" class="form-control"> </div> </div> </div> <div class="panel-footer"> <button type="button" class="btn btn-primary" ng-click="vm.recoverPass()" ng-disabled="vm.email === undefined"> Recuperar </button> <button type="button" class="btn btn-success" ng-click="vm.recover = false; vm.userIntegridad = {}; vm.success=undefined; vm.error=undefined"> Cancelar </button> </div> </div> <div class="panel panel-default" ng-show="!vm.init"> <div class="panel-body"> <div class="row" ng-show="vm.error !== undefined"> <div class="form-group col-md-12"> <div class="alert alert-danger">{{vm.error}}</div> </div> </div> <div class="row" ng-show="vm.success !== undefined"> <div class="form-group col-md-12"> <div class="alert alert-success">{{vm.success}}</div> </div> </div> <div class="row"> <div class="form-group col-md-6"> <label>Nombre *: </label> <input type="text" ng-model="vm.userIntegridad.firstName" class="form-control"> </div> <div class="form-group col-md-6"> <label>Apellido *: </label> <input type="text" ng-model="vm.userIntegridad.lastName" class="form-control"> </div> </div> <div class="row"> <div class="form-group col-md-6"> <label>Tel&eacute;fono: (incluir c&oacute;digo de provincia ej: 02) </label> <input type="text" onkeypress="return ((event.which >= 48 && event.which <= 57) || (event.keyCode == 9 || event.keyCode == 8))" ng-model="vm.userIntegridad.phone" class="form-control" maxlength="9"> </div> <div class="form-group col-md-6"> <label>Tel&eacute;fono celular: </label> <input type="text" onkeypress="return ((event.which >= 48 && event.which <= 57) || (event.keyCode == 9 || event.keyCode == 8))" ng-model="vm.userIntegridad.celPhone" class="form-control" maxlength="10"> </div> </div> <div class="row"> <div class="form-group col-md-6"> <label>Fecha de Nacimiento</label> <div class="input-group date" id="pickerBirthday"> <input type="text" class="form-control input-group-addon"> <span class="input-group-addon"><span class="glyphicon glyphicon-calendar"></span> </div> <script>var defaultDate = new Date();\n          $(\'#pickerBirthday\').datetimepicker({\n            format: "DD/MM/YY",\n            defaultDate: defaultDate\n          });</script> </div> </div> <div class="row"> <div class="form-group col-md-6"> <label>Tipo de Identificacion: </label> <select ng-options="item for item in [\'Cedula\', \'Ruc\']" ng-model="vm.typeId" class="form-control"></select> </div> <div class="form-group col-md-6" ng-show="vm.typeId === \'Cedula\'"> <label>C&eacute;dula *: </label> <input type="text" onkeypress="return ((event.which >= 48 && event.which <= 57) || (event.keyCode == 9 || event.keyCode == 8))" ng-model="vm.userIntegridad.cedula" class="form-control" maxlength="10"> </div> <div class="form-group col-md-6" ng-show="vm.typeId === \'Ruc\'"> <label>Ruc *: </label> <input type="text" onkeypress="return ((event.which >= 48 && event.which <= 57) || (event.keyCode == 9 || event.keyCode == 8))" ng-model="vm.userIntegridad.ruc" class="form-control" maxlength="13"> </div> </div> <div class="row"> <div class="form-group col-md-12"> <label>Direcci&oacute;n: </label> <input type="text" ng-model="vm.userIntegridad.address1" class="form-control"> </div> </div> <!-- <div class="row">\n      <div class="form-group col-md-12">\n        <label>Intersecci&oacute;n: </label>\n        <input type="text" ng-model="vm.userIntegridad.address2" class="form-control">\n      </div>\n    </div> --> <div class="row"> <div class="form-group col-md-6"> <label>E-mail *: </label> <input type="text" ng-model="vm.userIntegridad.email" class="form-control"> </div> <div class="form-group col-md-6"> <label>Password *: </label> <input type="password" ng-model="vm.userIntegridad.password" class="form-control"> </div> </div> </div> <div class="panel-footer"> <button type="button" class="btn btn-primary" ng-click="vm.register()" ng-disabled="vm.userIntegridad.email === undefined || vm.userIntegridad.password === undefined"> Registrar </button> <button type="button" class="btn btn-success" ng-click="vm.init = true; vm.userIntegridad = {}; vm.success=undefined; vm.error=undefined"> Cancelar </button> </div> </div> <div id="modalChangePassword" class="modal fade" role="dialog"> <div class="modal-dialog"> <div class="modal-content"> <div class="modal-header"> <h4 class="modal-title">Cambie su clave Temporal</h4> </div> <div class="modal-body"> <div class="row"> <div class="form-group col-md-6"> <label>Nuevo Password</label> <input type="password" class="form-control" id="password" ng-model="vm.newPass"> </div> <div class="form-group col-md-6"> <label>Confirmar nuevo Password</label> <input type="password" class="form-control" id="passwordConfirmation" ng-model="vm.passConfirmation" ng-change="vm.validatePassword()"> </div> </div> <div class="row" ng-show="vm.passwordNotMatch"> <div class="form-group col-md-12"> <div class="alert alert-danger">El nuevo password no coincide con la confirmacion</div> </div> </div> </div> <div class="modal-footer"> <div ng-if="vm.passConfirmation"> <button class="btn btn-primary" ng-click="vm.update()" data-dismiss="modal" ng-disabled="vm.passwordNotMatch">Cambiar e Ingresar</button> </div> </div> </div> </div> </div>'),a.put("views/products/products.tpl.html",'<div style="width: 100%;height: 100%;top: 0px;left: 0px;position: fixed;display: block; z-index: 99; background: rgba(255, 255, 255, 0.3)" ng-show="vm.loading"> <div style="position: absolute;top: 15%;z-index: 100; width: 100%; text-align: center"> <div class="sk-circle"> <div class="sk-circle1 sk-child"></div> <div class="sk-circle2 sk-child"></div> <div class="sk-circle3 sk-child"></div> <div class="sk-circle4 sk-child"></div> <div class="sk-circle5 sk-child"></div> <div class="sk-circle6 sk-child"></div> <div class="sk-circle7 sk-child"></div> <div class="sk-circle8 sk-child"></div> <div class="sk-circle9 sk-child"></div> <div class="sk-circle10 sk-child"></div> <div class="sk-circle11 sk-child"></div> <div class="sk-circle12 sk-child"></div> </div> </div> </div> <div class="header"> <h4> Productos </h4> </div> <div class="row" ng-show="vm.error !== undefined"> <div class="form-group col-md-12"> <div class="alert alert-danger">{{vm.error}}</div> </div> </div> <div class="row" ng-show="vm.success !== undefined"> <div class="form-group col-md-12"> <div class="alert alert-success">{{vm.success}}</div> </div> </div> <div ng-show="vm.wizard === 0"> <input ng-model="searchText" class="form-control" placeholder="Buscar"> <table class="table table-striped"> <thead> <tr> <th> Nombre </th> <th> Cantidad Disponible</th> <th> Precio Unitario $</th> <th> <button type="button" class="btn btn-primary" ng-click="vm.productCreate()"> Crear </button> </th> </tr> </thead> <tbody> <tr ng-show="vm.productList == 0"> <td colspan="4"> No hay proyectos ingresados </td> </tr> <tr ng-repeat="productEdit in vm.productList | orderBy:\'name\' | filter:searchText"> <td>{{ productEdit.name }}</td> <td>{{ productEdit.quantity }}</td> <td>{{ vm.getCost(\'1.\'+ productEdit[\'cashPercentage\'], productEdit.averageCost) }}</td> <td> <button type="button" class="btn btn-primary" ng-click="vm.editProduct(productEdit)"> Editar </button> <button type="button" class="btn btn-primary" ng-click="vm.product=productEdit" data-toggle="modal" data-target="#modalEliminar"> Eliminar </button> </td> </tr> </tbody> </table> </div> <div class="panel panel-default" ng-show="vm.wizard === 1"> <div class="panel-body"> <div class="row"> <div class="form-group col-md-12"> <label>Nombre *: </label> <input type="text" ng-model="vm.product.name" class="form-control"> </div> </div> <div class="row"> <div class="form-group col-md-4"> <label>C&oacute;digo: </label> <input type="text" ng-model="vm.product.codeIntegridad" class="form-control"> </div> <div class="form-group col-md-4"> <label>Tipo de Producto: </label> <select ng-options="type as type.name for type in vm.productTypes  | orderBy:\'name\'  track by type.id" ng-model="vm.product.productType" class="form-control"> </select> </div> <div class="form-group col-md-4"> <label>Medida: </label> <select ng-options="mess as mess.name for mess in vm.messurements  | orderBy:\'name\'  track by mess.shortName" ng-model="vm.messurementSelected" ng-change="vm.setUnitOfMeasurementFull()" class="form-control" ng-disabled="vm.product.productType.code === \'SER\'"> </select> </div> </div> <div class="row"> <div class="form-group col-md-10"> <label>Sucursales: </label> <span ng-repeat="sub in vm.subsidiaries" class="list-group-item"> <div class="row"> <div class="form-group col-sm-7"> <input class="pull-right" ng-model="sub.selected" type="checkbox" ng-change="vm.changeSub(sub)"> {{ sub.name }} </div> <div class="form-group col-sm-2"> Cantidad: </div> <div class="form-group col-sm-3"> <input type="text" onkeypress="return ((event.which >= 46 && event.which <= 57) || (event.keyCode == 9 || event.keyCode == 8))" ng-model="sub.cantidad" class="form-control" ng-disabled="!sub.selected || vm.product.productType.code === \'SER\'"> </div> </div> </span> </div> </div> <div class="row"> <div class="form-group col-md-12"> <label>Caracter&iacute;sticas: </label> <textarea class="form-control" rows="3" id="comment" ng-model="vm.product.characteristics"></textarea> </div> </div> <div class="row"> <div class="form-group col-md-6"> <label>C&oacute;digo de Barras: </label> <input type="text" onkeypress="return ((event.which >= 46 && event.which <= 57) || (event.keyCode == 9 || event.keyCode == 8))" ng-model="vm.product.barCode" class="form-control" maxlength="9"> </div> </div> </div> <div class="panel-footer"> <button type="button" class="btn btn-primary" ng-click="vm.wiz2()" ng-disabled="vm.product.name === undefined"> Siguiente </button> <button type="button" class="btn btn-success" ng-click="vm.cancel()"> Cancelar </button> </div> </div> <div class="panel panel-default" ng-show="vm.wizard === 2"> <div class="panel-body"> <div class="row"> <div class="form-group col-md-6"> <label>Marca: </label> <select ng-options="brand as brand.name for brand in vm.brands  | orderBy:\'name\'  track by brand.id" ng-model="vm.product.brand" class="form-control"> </select> </div> <div class="form-group col-md-3"> <label>&nbsp;</label> <button type="button" class="form-control btn btn-primary" ng-click="vm.createBrand()" data-toggle="modal" data-target="#modalCreateBrand"> Crear Marca </button> </div> <div class="form-group col-md-3"> <label>&nbsp;</label> <button type="button" class="form-control btn btn-primary" data-toggle="modal" data-target="#modalEditBrand"> Editar Marcas </button> </div> </div> <div class="row"> <div class="form-group col-md-6"> <label>L&iacute;nea: </label> <select ng-options="lin as lin.name for lin in vm.lineas  | orderBy:\'name\'  track by lin.id" ng-model="vm.selectedLine" class="form-control" ng-change="vm.getGroups()"> </select> </div> <div class="form-group col-md-3"> <label>&nbsp;</label> <button type="button" class="form-control btn btn-primary" ng-click="vm.createLine()" data-toggle="modal" data-target="#modalCreateLine" ng-disabled="vm.product.brand === undefined"> Crear L&iacute;nea </button> </div> <div class="form-group col-md-3"> <label>&nbsp;</label> <button type="button" class="form-control btn btn-primary" data-toggle="modal" data-target="#modalEditLine" ng-disabled="vm.product.brand === undefined"> Editar L&iacute;neas </button> </div> </div> <div class="row"> <div class="form-group col-md-6"> <label>Grupo: </label> <select ng-options="group as group.name for group in vm.groups  | orderBy:\'name\'  track by group.id" ng-model="vm.selectedGroup" class="form-control" ng-change="vm.getSubGroups()"> </select> </div> <div class="form-group col-md-3"> <label>&nbsp;</label> <button type="button" class="form-control btn btn-primary" ng-click="vm.createGroup()" data-toggle="modal" data-target="#modalCreateGroup" ng-disabled="vm.selectedLine === undefined"> Crear Grupo </button> </div> <div class="form-group col-md-3"> <label>&nbsp;</label> <button type="button" class="form-control btn btn-primary" data-toggle="modal" data-target="#modalEditGroup" ng-disabled="vm.selectedLine === undefined"> Editar Grupos </button> </div> </div> <div class="row"> <div class="form-group col-md-6"> <label>Subgrupo: </label> <select ng-options="subgroup as subgroup.name for subgroup in vm.subGroups  | orderBy:\'name\'  track by subgroup.id" ng-model="vm.product.subgroup" class="form-control"> </select> </div> <div class="form-group col-md-3"> <label>&nbsp;</label> <button type="button" class="form-control btn btn-primary" ng-click="vm.createSubGroup()" data-toggle="modal" data-target="#modalCreateSubGroup" ng-disabled="vm.selectedGroup === undefined"> Crear Subgrupo </button> </div> <div class="form-group col-md-3"> <label>&nbsp;</label> <button type="button" class="form-control btn btn-primary" data-toggle="modal" data-target="#modalEditSubGroup" ng-disabled="vm.selectedGroup === undefined"> Editar Subgrupos </button> </div> </div> </div> <div class="panel-footer"> <button type="button" class="btn btn-primary" ng-click="vm.wiz3()"> Siguiente </button> <button type="button" class="btn btn-primary" ng-click="vm.wizard = 1"> Atr&aacute;s </button> <button type="button" class="btn btn-success" ng-click="vm.cancel()"> Cancelar </button> </div> </div> <div class="panel panel-default" ng-show="vm.wizard === 3"> <div class="panel-body"> <div class="row"> <div class="form-group col-md-6"> <label>M&aacute;ximo / M&iacute;nimo: </label> <input type="text" onkeypress="return ((event.which >= 46 && event.which <= 57) || (event.keyCode == 9 || event.keyCode == 8))" ng-model="vm.product.maxMinimun" class="form-control" maxlength="9" ng-disabled="vm.product.productType.code === \'SER\'"> </div> <div class="form-group col-md-6"> <label>Costo (promedio): </label> <input type="text" onkeypress="return ((event.which >= 46 && event.which <= 57) || (event.keyCode == 9 || event.keyCode == 8))" ng-model="vm.product.averageCost" class="form-control" maxlength="9"> </div> </div> <div class="row"> <div class="form-group col-md-6"> <label>Ganancia % efectivo: </label> <input type="text" onkeypress="return ((event.which >= 46 && event.which <= 57) || (event.keyCode == 9 || event.keyCode == 8))" ng-model="vm.product.cashPercentage" class="form-control" maxlength="9"> </div> <div class="form-group col-md-6"> <label>Ganancia % cr&eacute;dito: </label> <input type="text" onkeypress="return ((event.which >= 46 && event.which <= 57) || (event.keyCode == 9 || event.keyCode == 8))" ng-model="vm.product.creditPercentage" class="form-control" maxlength="9"> </div> </div> <div class="row"> <div class="form-group col-md-6"> <label>Ganancia % tarjeta: </label> <input type="text" onkeypress="return ((event.which >= 46 && event.which <= 57) || (event.keyCode == 9 || event.keyCode == 8))" ng-model="vm.product.cardPercentage" class="form-control" maxlength="9"> </div> <div class="form-group col-md-6"> <label>Ganancia % mayorista: </label> <input type="text" onkeypress="return ((event.which >= 46 && event.which <= 57) || (event.keyCode == 9 || event.keyCode == 8))" ng-model="vm.product.majorPercentage" class="form-control" maxlength="9"> </div> </div> <div class="row"> <div class="form-group col-md-6"> <label>IVA: </label> <input class="pull-right" ng-model="vm.product.iva" type="checkbox"> </div> <div class="form-group col-md-6"> <label>ICE: </label> <input class="pull-right" ng-model="vm.product.ice" type="checkbox"> </div> </div> </div> <div class="panel-footer"> <button type="button" class="btn btn-primary" ng-click="vm.save()"> Guardar </button> <button type="button" class="btn btn-primary" ng-click="vm.wizard = 2"> Atr&aacute;s </button> <button type="button" class="btn btn-success" ng-click="vm.cancel()"> Cancelar </button> </div> </div> <div id="modalEliminar" class="modal fade" role="dialog"> <div class="modal-dialog"> <div class="modal-content"> <div class="modal-header"> <button type="button" class="close" data-dismiss="modal" ng-click="vm.product=undefined">&times;</button> <h4 class="modal-title">Advertencia</h4> </div> <div class="modal-body"> <div class="row"> <div class="col-md-12"> Esta seguro que desea Eliminar el Producto {{vm.product.name}} </div> </div> </div> <div class="modal-footer"> <button type="button" class="btn btn-primary" ng-click="vm.remove()" data-dismiss="modal"> Eliminar </button> </div> </div> </div> </div> <div id="modalCreateBrand" class="modal fade" role="dialog"> <div class="modal-dialog"> <div class="modal-content"> <div class="modal-header"> <button type="button" class="close" data-dismiss="modal" ng-click="vm.newBrand=undefined">&times;</button> <h4 class="modal-title">Crear Marca</h4> </div> <div class="modal-body"> <div class="row"> <div class="form-group col-md-12"> <label>Nombre : </label> <input type="text" ng-model="vm.newBrand.name" class="form-control"> </div> </div> <div class="row"> <div class="form-group col-md-6"> <label>C&oacute;digo: </label> <input type="text" ng-model="vm.newBrand.code" class="form-control"> </div> </div> </div> <div class="modal-footer"> <button type="button" class="btn btn-primary" ng-click="vm.saveNewBrand()" data-dismiss="modal"> Aceptar </button> <button type="button" class="btn btn-success" ng-click="vm.newBrand = undefined" data-dismiss="modal"> Cancelar </button> </div> </div> </div> </div> <div id="modalEditBrand" class="modal fade" role="dialog"> <div class="modal-dialog"> <div class="modal-content"> <div class="modal-header"> <button type="button" class="close" data-dismiss="modal">&times;</button> <h4 class="modal-title">Marcas</h4> </div> <div class="modal-body"> <div class="row"> <div class="form-group col-md-12"> <table class="table table-striped"> <thead> <tr> <th> Marca </th> <th> C&oacute;digo</th> <th> </th> </tr> </thead> <tbody> <tr ng-repeat="brand in vm.brands"> <td> {{ brand.name }} </td> <td>{{ brand.code }}</td> <td> <button type="button" class="btn btn-primary" ng-click="vm.deleteBrand(brand)"> Eliminar </button> </td> </tr> </tbody> </table> </div> </div> </div> <div class="modal-footer"> <button type="button" class="btn btn-success" data-dismiss="modal"> Cancelar </button> </div> </div> </div> </div> <div id="modalCreateLine" class="modal fade" role="dialog"> <div class="modal-dialog"> <div class="modal-content"> <div class="modal-header"> <button type="button" class="close" data-dismiss="modal" ng-click="vm.newLine=undefined">&times;</button> <h4 class="modal-title">Crear L&iacute;nea</h4> </div> <div class="modal-body"> <div class="row"> <div class="form-group col-md-12"> <label>Nombre : </label> <input type="text" ng-model="vm.newLine.name" class="form-control"> </div> </div> <div class="row"> <div class="form-group col-md-6"> <label>C&oacute;digo: </label> <input type="text" ng-model="vm.newLine.code" class="form-control"> </div> </div> </div> <div class="modal-footer"> <button type="button" class="btn btn-primary" ng-click="vm.saveNewLine()" data-dismiss="modal"> Aceptar </button> <button type="button" class="btn btn-success" ng-click="vm.newLine = undefined" data-dismiss="modal"> Cancelar </button> </div> </div> </div> </div> <div id="modalEditLine" class="modal fade" role="dialog"> <div class="modal-dialog"> <div class="modal-content"> <div class="modal-header"> <button type="button" class="close" data-dismiss="modal">&times;</button> <h4 class="modal-title">L&iacute;neas</h4> </div> <div class="modal-body"> <div class="row"> <div class="form-group col-md-12"> <table class="table table-striped"> <thead> <tr> <th> L&iacute;nea </th> <th> C&oacute;digo</th> <th> </th> </tr> </thead> <tbody> <tr ng-repeat="line in vm.lineas"> <td> {{ line.name }} </td> <td>{{ line.code }}</td> <td> <button type="button" class="btn btn-primary" ng-click="vm.deleteLine(line)"> Eliminar </button> </td> </tr> </tbody> </table> </div> </div> </div> <div class="modal-footer"> <button type="button" class="btn btn-success" data-dismiss="modal"> Cancelar </button> </div> </div> </div> </div> <div id="modalCreateGroup" class="modal fade" role="dialog"> <div class="modal-dialog"> <div class="modal-content"> <div class="modal-header"> <button type="button" class="close" data-dismiss="modal" ng-click="vm.newGroup=undefined">&times;</button> <h4 class="modal-title">Crear Grupo</h4> </div> <div class="modal-body"> <div class="row"> <div class="form-group col-md-12"> <label>Nombre : </label> <input type="text" ng-model="vm.newGroup.name" class="form-control"> </div> </div> <div class="row"> <div class="form-group col-md-6"> <label>C&oacute;digo: </label> <input type="text" ng-model="vm.newGroup.code" class="form-control"> </div> </div> </div> <div class="modal-footer"> <button type="button" class="btn btn-primary" ng-click="vm.saveNewGroup()" data-dismiss="modal"> Aceptar </button> <button type="button" class="btn btn-success" ng-click="vm.newGroup = undefined" data-dismiss="modal"> Cancelar </button> </div> </div> </div> </div> <div id="modalEditGroup" class="modal fade" role="dialog"> <div class="modal-dialog"> <div class="modal-content"> <div class="modal-header"> <button type="button" class="close" data-dismiss="modal">&times;</button> <h4 class="modal-title">Grupos</h4> </div> <div class="modal-body"> <div class="row"> <div class="form-group col-md-12"> <table class="table table-striped"> <thead> <tr> <th> Grupo </th> <th> C&oacute;digo</th> <th> </th> </tr> </thead> <tbody> <tr ng-repeat="group in vm.groups"> <td> {{ group.name }} </td> <td>{{ group.code }}</td> <td> <button type="button" class="btn btn-primary" ng-click="vm.deleteGroup(group)"> Eliminar </button> </td> </tr> </tbody> </table> </div> </div> </div> <div class="modal-footer"> <button type="button" class="btn btn-success" data-dismiss="modal"> Cancelar </button> </div> </div> </div> </div> <div id="modalCreateSubGroup" class="modal fade" role="dialog"> <div class="modal-dialog"> <div class="modal-content"> <div class="modal-header"> <button type="button" class="close" data-dismiss="modal" ng-click="vm.newSubGroup=undefined">&times;</button> <h4 class="modal-title">Crear Subgrupo</h4> </div> <div class="modal-body"> <div class="row"> <div class="form-group col-md-12"> <label>Nombre : </label> <input type="text" ng-model="vm.newSubGroup.name" class="form-control"> </div> </div> <div class="row"> <div class="form-group col-md-6"> <label>C&oacute;digo: </label> <input type="text" ng-model="vm.newSubGroup.code" class="form-control"> </div> </div> </div> <div class="modal-footer"> <button type="button" class="btn btn-primary" ng-click="vm.saveNewSubGroup()" data-dismiss="modal"> Aceptar </button> <button type="button" class="btn btn-success" ng-click="vm.newSubGroup = undefined" data-dismiss="modal"> Cancelar </button> </div> </div> </div> </div> <div id="modalEditSubGroup" class="modal fade" role="dialog"> <div class="modal-dialog"> <div class="modal-content"> <div class="modal-header"> <button type="button" class="close" data-dismiss="modal">&times;</button> <h4 class="modal-title">Editar Subgrupos</h4> </div> <div class="modal-body"> <div class="row"> <div class="form-group col-md-12"> <table class="table table-striped"> <thead> <tr> <th> Subgrupo </th> <th> C&oacute;digo</th> <th> </th> </tr> </thead> <tbody> <tr ng-repeat="subgroup in vm.subGroups"> <td> {{ subgroup.name }} </td> <td>{{ subgroup.code }}</td> <td> <button type="button" class="btn btn-primary" ng-click="vm.deleteSubGroup(subgroup)"> Eliminar </button> </td> </tr> </tbody> </table> </div> </div> </div> <div class="modal-footer"> <button type="button" class="btn btn-success" data-dismiss="modal"> Cancelar </button> </div> </div> </div> </div>'),
a.put("views/projects/projects.tpl.html",'<div style="width: 100%;height: 100%;top: 0px;left: 0px;position: fixed;display: block; z-index: 99; background: rgba(255, 255, 255, 0.3)" ng-show="vm.loading"> <div style="position: absolute;top: 15%;z-index: 100; width: 100%; text-align: center"> <div class="sk-circle"> <div class="sk-circle1 sk-child"></div> <div class="sk-circle2 sk-child"></div> <div class="sk-circle3 sk-child"></div> <div class="sk-circle4 sk-child"></div> <div class="sk-circle5 sk-child"></div> <div class="sk-circle6 sk-child"></div> <div class="sk-circle7 sk-child"></div> <div class="sk-circle8 sk-child"></div> <div class="sk-circle9 sk-child"></div> <div class="sk-circle10 sk-child"></div> <div class="sk-circle11 sk-child"></div> <div class="sk-circle12 sk-child"></div> </div> </div> </div> <div class="header"> <h4> Proyectos </h4> </div> <div class="row" ng-show="vm.error !== undefined"> <div class="form-group col-md-12"> <div class="alert alert-danger">{{vm.error}}</div> </div> </div> <div class="row" ng-show="vm.success !== undefined"> <div class="form-group col-md-12"> <div class="alert alert-success">{{vm.success}}</div> </div> </div> <div ng-show="vm.project === undefined"> <input ng-model="searchText" class="form-control" placeholder="Buscar"> <table class="table table-striped"> <thead> <tr> <th> Codigo </th> <th> Nombre </th> <th> Ruc </th> <th> <button type="button" class="btn btn-primary" ng-click="vm.projectCreate()"> Crear </button> </th> </tr> </thead> <tbody> <tr ng-show="vm.projectList == 0"> <td colspan="4"> No hay proyectos ingresados </td> </tr> <tr ng-repeat="projectEdit in vm.projectList | orderBy:\'name\' | filter:searchText"> <td>{{ projectEdit.codeIntegridad }}</td> <td>{{ projectEdit.name }}</td> <td>{{ projectEdit.ruc }}</td> <td> <button type="button" class="btn btn-primary" ng-click="vm.editProject(projectEdit)"> Editar </button> <button type="button" class="btn btn-primary" ng-click="vm.project=projectEdit" data-toggle="modal" data-target="#modalEliminar"> Eliminar </button> </td> </tr> </tbody> </table> </div> <div class="panel panel-default" ng-show="!vm.updSubsi && vm.project"> <div class="panel-body"> <div class="row"> <div class="form-group col-md-12"> <label>Nombre *: </label> <input type="text" ng-model="vm.project.name" class="form-control"> </div> </div> <div class="row"> <div class="form-group col-md-6"> <label>Tel&eacute;fono: (incluir c&oacute;digo de provincia ej: 02) </label> <input type="text" onkeypress="return ((event.which >= 48 && event.which <= 57) || (event.keyCode == 9 || event.keyCode == 8))" ng-model="vm.project.phone" class="form-control" maxlength="9"> </div> <div class="form-group col-md-6"> <label>Tel&eacute;fono celular: </label> <input type="text" onkeypress="return ((event.which >= 48 && event.which <= 57) || (event.keyCode == 9 || event.keyCode == 8))" ng-model="vm.project.celPhone" class="form-control" maxlength="10"> </div> </div> <div class="row"> <div class="form-group col-md-6"> <label>Ciudad: </label> <input type="text" ng-model="vm.project.city" class="form-control"> </div> </div> <div class="row"> <div class="form-group col-md-12"> <label>Direcci&oacute;n: </label> <input type="text" ng-model="vm.project.address1" class="form-control"> </div> </div> <div class="row"> <div class="form-group col-md-6"> <label>C&eacute;dula: </label> <input type="text" onkeypress="return ((event.which >= 48 && event.which <= 57) || (event.keyCode == 9 || event.keyCode == 8))" ng-model="vm.project.cedula" class="form-control" maxlength="10"> </div> <div class="form-group col-md-6"> <label>Ruc *: </label> <input type="text" onkeypress="return ((event.which >= 48 && event.which <= 57) || (event.keyCode == 9 || event.keyCode == 8))" ng-model="vm.project.ruc" class="form-control" maxlength="13"> </div> </div> <div class="row"> <div class="form-group col-md-6"> <label>C&oacute;digo Facturaci&oacute;n (Ejemplo: 001): </label> <input type="text" ng-model="vm.project.threeCode" class="form-control"> </div> <div class="form-group col-md-6"> <label>C&oacute;digo Integridad(Ejemplo: COD01-01): </label> <input type="text" ng-model="vm.project.codeIntegridad" class="form-control"> </div> </div> <div class="row"> <div class="form-group col-md-6"> <label>Fecha de Inicio de Actividades</label> <div class="input-group date" id="pickerInitialDate"> <input type="text" class="form-control input-group-addon"> <span class="input-group-addon"><span class="glyphicon glyphicon-calendar"></span> </div> <script>var defaultDate = new Date();\n          $(\'#pickerInitialDate\').datetimepicker({\n            format: "DD/MM/YY",\n            defaultDate: defaultDate\n          });</script> </div> </div> <div class="row"> <div class="form-group col-md-12"> <div class="panel panel-default"> <div class="panel-heading"> Sucursales </div> <div class="panel-body"> <table class="table table-striped"> <thead> <tr> <th> C&oacute;digo Facturaci&oacute;n </th> <th> Nombre </th> <th> Ciudad </th> <th> Direcci&oacute;n </th> <th> <button type="button" class="btn btn-primary" ng-click="vm.addSubsidiary(); vm.updSubsi = true" data-toggle="modal" data-target="#modalSubsidiary"> Agregar </button> </th> </tr> </thead> <tbody> <tr ng-show="vm.project.subsidiaries == 0"> <td colspan="4"> No hay sucursales ingresados </td> </tr> <tr ng-repeat="subsi in vm.project.subsidiaries | orderBy:\'name\' | filter:{active: true}"> <td>{{ subsi.threeCode }}</td> <td>{{ subsi.name }}</td> <td>{{ subsi.city }}</td> <td>{{ subsi.address1 }}</td> <td> <button type="button" class="btn btn-primary" ng-click="vm.subsidiary=subsi; vm.updSubsi = true" data-toggle="modal" data-target="#modalSubsidiary"> Editar </button> <button type="button" class="btn btn-primary" ng-click="vm.subsidiary=subsi; vm.updSubsi = false" data-toggle="modal" data-target="#modalEliminarSubsidiary"> Eliminar </button> <button type="button" class="btn btn-primary" ng-click="vm.products(subsi)"> Productos </button> </td> </tr> </tbody> </table> </div> </div> </div> </div> </div> <div class="panel-footer"> <button type="button" class="btn btn-primary" ng-click="vm.save()" ng-disabled="vm.project.name === undefined"> Guardar </button> <button type="button" class="btn btn-success" ng-click="vm.cancel()"> Cancelar </button> </div> </div> <div ng-show="vm.subsidiary !== undefined && vm.updSubsi"> <div class="panel panel-default"> <div class="panel-heading"> Sucursal </div> <div class="panel-body"> <div class="row"> <div class="form-group col-md-12"> <label>Nombre *: </label> <input type="text" ng-model="vm.subsidiary.name" class="form-control"> </div> </div> <div class="row"> <div class="form-group col-md-6"> <label>Tel&eacute;fono: (incluir c&oacute;digo de provincia ej: 02) </label> <input type="text" onkeypress="return ((event.which >= 48 && event.which <= 57) || (event.keyCode == 9 || event.keyCode == 8))" ng-model="vm.subsidiary.phone" class="form-control" maxlength="9"> </div> <div class="form-group col-md-6"> <label>Tel&eacute;fono celular: </label> <input type="text" onkeypress="return ((event.which >= 48 && event.which <= 57) || (event.keyCode == 9 || event.keyCode == 8))" ng-model="vm.subsidiary.celPhone" class="form-control" maxlength="10"> </div> </div> <div class="row"> <div class="form-group col-md-6"> <label>Ciudad: </label> <input type="text" ng-model="vm.subsidiary.city" class="form-control"> </div> </div> <div class="row"> <div class="form-group col-md-12"> <label>Direcci&oacute;n: </label> <input type="text" ng-model="vm.subsidiary.address1" class="form-control"> </div> </div> <div class="row"> <div class="form-group col-md-6"> <label>C&oacute;digo Facturaci&oacute;n (Ejemplo: 001): </label> <input type="text" ng-model="vm.subsidiary.threeCode" class="form-control"> </div> <div class="form-group col-md-6"> <div class="panel panel-default"> <div class="panel-heading"> Bodegas </div> <div class="panel-body"> <table class="table table-striped"> <thead> <tr> <th> <!-- N&uacute;mero / Nombre de Bodega  --> <input type="text" ng-model="vm.warehouseName" class="form-control" placeholder="Ingrese un Nombre"> </th> <th> <button type="button" class="btn btn-primary" ng-click="vm.addWarehouse()"> Agregar </button> </th> </tr> </thead> <tbody> <tr ng-show="vm.subsidiary.warehouses == 0"> <td colspan="2"> No hay bodegas ingresados </td> </tr> <tr ng-repeat="warehouse in vm.subsidiary.warehouses | filter:{active: true}"> <td>{{ warehouse.nameNumber }}</td> <td> <button type="button" class="btn btn-primary" ng-click="vm.warehouse=warehouse" data-toggle="modal" data-target="#modalEliminarWarehouse"> Eliminar </button> </td> </tr> </tbody> </table> </div> </div> </div> </div> <div class="row"> </div> <div class="row"> <div class="form-group col-md-12"> <div class="panel panel-default"> <div class="panel-heading"> Cajas </div> <div class="panel-body"> <table class="table table-striped"> <thead> <tr> <th> N&uacute;mero / Nombre de caja </th> <th> <button type="button" class="btn btn-primary" ng-click="vm.cashier={}" data-toggle="modal" data-target="#modalCashier"> Agregar </button> </th> </tr> </thead> <tbody> <tr ng-show="vm.subsidiary.cashiers == 0"> <td colspan="2"> No hay cajas ingresados </td> </tr> <tr ng-repeat="cashier in vm.subsidiary.cashiers | filter:{active: true}"> <td>{{ cashier.nameNumber }}</td> <td> <button type="button" class="btn btn-primary" ng-click="vm.cashier=cashier" data-toggle="modal" data-target="#modalEliminarCashier"> Eliminar </button> </td> </tr> </tbody> </table> </div> </div> </div> </div> </div> <div class="panel-footer"> <button type="button" class="btn btn-primary" ng-click="vm.saveSubsidiary()" data-dismiss="modal"> Guardar </button> <button type="button" class="btn btn-success" ng-click="vm.cancelSubisdiary()"> Cancelar </button> </div> </div> </div> <div id="modalCashier" class="modal fade" role="dialog"> <div class="modal-dialog"> <div class="modal-content"> <div class="modal-header"> <button type="button" class="close" data-dismiss="modal" ng-click="vm.subsidiary=undefined">&times;</button> <h4 class="modal-title">Caja</h4> </div> <div class="modal-body"> <div class="row"> <div class="form-group col-md-12"> <label>Nombre o N&uacute;mero *: </label> <input type="text" ng-model="vm.cashier.nameNumber" class="form-control"> </div> </div> <div class="row"> <div class="form-group col-md-6"> <label>C&oacute;digo de facturaci&oacute;n </label> <input type="text" onkeypress="return ((event.which >= 48 && event.which <= 57) || (event.keyCode == 9 || event.keyCode == 8))" ng-model="vm.cashier.threeCode" class="form-control" maxlength="9"> </div> <div class="form-group col-md-6"> <label>Secuencial: </label> <input type="text" onkeypress="return ((event.which >= 48 && event.which <= 57) || (event.keyCode == 9 || event.keyCode == 8))" ng-model="vm.cashier.billNumberSeq" class="form-control" maxlength="10"> </div> </div> </div> <div class="modal-footer"> <button type="button" class="btn btn-primary" ng-click="vm.saveCashier()" data-dismiss="modal"> Guardar </button> <button type="button" class="btn btn-success" ng-click="vm.cancelCashier()" data-dismiss="modal"> Cancelar </button> </div> </div> </div> </div> <div id="modalEliminar" class="modal fade" role="dialog"> <div class="modal-dialog"> <div class="modal-content"> <div class="modal-header"> <button type="button" class="close" data-dismiss="modal" ng-click="vm.project=undefined">&times;</button> <h4 class="modal-title">Advertencia</h4> </div> <div class="modal-body"> <div class="row"> <div class="col-md-12"> Esta seguro que desea Eliminar el Proyecto {{vm.project.name}} con identificacion: {{vm.project.cedula}} / {{vm.project.ruc}} </div> </div> </div> <div class="modal-footer"> <button type="button" class="btn btn-primary" ng-click="vm.remove()" data-dismiss="modal"> Eliminar </button> </div> </div> </div> </div> <div id="modalEliminarSubsidiary" class="modal fade" role="dialog"> <div class="modal-dialog"> <div class="modal-content"> <div class="modal-header"> <button type="button" class="close" data-dismiss="modal" ng-click="vm.subsidiary=undefined">&times;</button> <h4 class="modal-title">Advertencia</h4> </div> <div class="modal-body"> <div class="row"> <div class="col-md-12"> Esta seguro que desea Eliminar la Sucursal {{vm.subsidiary.name}} con c&oacute;digo: {{vm.subsidiary.threeCode}} </div> </div> </div> <div class="modal-footer"> <button type="button" class="btn btn-primary" ng-click="vm.removeSubsidiary()" data-dismiss="modal"> Eliminar </button> </div> </div> </div> </div> <div id="modalEliminarCashier" class="modal fade" role="dialog"> <div class="modal-dialog"> <div class="modal-content"> <div class="modal-header"> <button type="button" class="close" data-dismiss="modal" ng-click="vm.cashier=undefined">&times;</button> <h4 class="modal-title">Advertencia</h4> </div> <div class="modal-body"> <div class="row"> <div class="col-md-12"> Esta seguro que desea Eliminar La caja {{vm.cashier.nameNumber}} </div> </div> </div> <div class="modal-footer"> <button type="button" class="btn btn-primary" ng-click="vm.removeCashier()" data-dismiss="modal"> Eliminar </button> </div> </div> </div> </div> <div id="modalEliminarWarehouse" class="modal fade" role="dialog"> <div class="modal-dialog"> <div class="modal-content"> <div class="modal-header"> <button type="button" class="close" data-dismiss="modal" ng-click="vm.warehouse=undefined">&times;</button> <h4 class="modal-title">Advertencia</h4> </div> <div class="modal-body"> <div class="row"> <div class="col-md-12"> Esta seguro que desea Eliminar La Bodega {{vm.warehouse.nameNumber}} </div> </div> </div> <div class="modal-footer"> <button type="button" class="btn btn-primary" ng-click="vm.removeWarehouse()" data-dismiss="modal"> Eliminar </button> </div> </div> </div> </div>'),a.put("views/providers/providers.tpl.html",'<div style="width: 100%;height: 100%;top: 0px;left: 0px;position: fixed;display: block; z-index: 99; background: rgba(255, 255, 255, 0.3)" ng-show="vm.loading"> <div style="position: absolute;top: 15%;z-index: 100; width: 100%; text-align: center"> <div class="sk-circle"> <div class="sk-circle1 sk-child"></div> <div class="sk-circle2 sk-child"></div> <div class="sk-circle3 sk-child"></div> <div class="sk-circle4 sk-child"></div> <div class="sk-circle5 sk-child"></div> <div class="sk-circle6 sk-child"></div> <div class="sk-circle7 sk-child"></div> <div class="sk-circle8 sk-child"></div> <div class="sk-circle9 sk-child"></div> <div class="sk-circle10 sk-child"></div> <div class="sk-circle11 sk-child"></div> <div class="sk-circle12 sk-child"></div> </div> </div> </div> <div class="header"> <h4> Proveedores </h4> </div> <div class="row" ng-show="vm.error !== undefined"> <div class="form-group col-md-12"> <div class="alert alert-danger">{{vm.error}}</div> </div> </div> <div class="row" ng-show="vm.success !== undefined"> <div class="form-group col-md-12"> <div class="alert alert-success">{{vm.success}}</div> </div> </div> <div ng-show="vm.provider === undefined"> <input ng-model="searchText" class="form-control" placeholder="Buscar"> <table class="table table-striped"> <thead> <tr> <th> C&oacute;digo </th> <th> Nombre </th> <th> Tipo </th> <th> <button type="button" class="btn btn-primary" ng-click="vm.providerCreate()"> Crear </button> </th> </tr> </thead> <tbody> <tr ng-show="vm.providerList == 0"> <td colspan="4"> No hay proveedores ingresados </td> </tr> <tr ng-repeat="providerEdit in vm.providerList | orderBy:\'name\' | filter:searchText"> <td>{{ providerEdit.codeIntegridad }}</td> <td>{{ providerEdit.name }}</td> <td>{{ providerEdit.providerType }}</td> <td> <button type="button" class="btn btn-primary" ng-click="vm.editProvider(providerEdit)"> Editar </button> <button type="button" class="btn btn-primary" ng-click="vm.provider=providerEdit" data-toggle="modal" data-target="#modalEliminar"> Eliminar </button> </td> </tr> </tbody> </table> </div> <div ng-show="vm.provider !== undefined"> <div class="panel panel-default"> <div class="panel-heading"> <b>Datos del Proveedor</b> </div> <div class="panel-body"> <div class="row"> <div class="form-group col-md-4"> <label>C&oacute;digo: </label> <input type="text" ng-model="vm.provider.codeIntegridad" class="form-control"> </div> <div class="form-group col-md-4"> <label>Tipo de proveedor: </label> <select ng-options="tipo as tipo for tipo in vm.providerType" ng-model="vm.provider.providerType" class="form-control"></select> </div> <div class="form-group col-md-4"> <label>RUC: </label> <input type="text" onkeypress="return ((event.which >= 48 && event.which <= 57) || (event.keyCode == 9 || event.keyCode == 8))" ng-model="vm.provider.ruc" class="form-control" maxlength="13"> </div> </div> <div class="row"> <div class="form-group col-md-12"> <label>Nombre Comercial: </label> <input type="text" ng-model="vm.provider.name" class="form-control"> </div> </div> <div class="row"> <div class="form-group col-md-12"> <label>Raz&oacute;n Social: </label> <input type="text" ng-model="vm.provider.razonSocial" class="form-control"> </div> </div> <div class="row"> <div class="form-group col-md-12"> <label>Direcci&oacute;n: </label> <input type="text" ng-model="vm.provider.address1" class="form-control"> </div> </div> <div class="row"> <div class="form-group col-md-6"> <label>Pa&iacute;s: </label> <input type="text" ng-model="vm.provider.country" class="form-control"> </div> <div class="form-group col-md-6"> <label>Ciudad: </label> <input type="text" ng-model="vm.provider.city" class="form-control"> </div> </div> <div class="row"> <div class="form-group col-md-6"> <label>Tel&eacute;fono: (incluir c&oacute;digo de provincia ej: 02) </label> <input type="text" onkeypress="return ((event.which >= 48 && event.which <= 57) || (event.keyCode == 9 || event.keyCode == 8))" ng-model="vm.provider.phone" class="form-control" maxlength="9"> </div> <div class="form-group col-md-6"> <label>Tel&eacute;fono celular: </label> <input type="text" onkeypress="return ((event.which >= 48 && event.which <= 57) || (event.keyCode == 9 || event.keyCode == 8))" ng-model="vm.provider.celPhone" class="form-control" maxlength="10"> </div> </div> <div class="row"> <div class="form-group col-md-6"> <label>Email: </label> <input type="text" ng-model="vm.provider.email" class="form-control"> </div> <div class="form-group col-md-6"> <label>Contacto: </label> <input type="text" ng-model="vm.provider.contact" class="form-control"> </div> </div> </div> <div class="panel-footer"> <button type="button" class="btn btn-primary" ng-click="vm.register()" ng-disabled="vm.disableSave()"> Guardar </button> <button type="button" class="btn btn-success" ng-click="vm.cancel()"> Cancelar </button> </div> </div> </div> <div id="modalEliminar" class="modal fade" role="dialog"> <div class="modal-dialog"> <div class="modal-content"> <div class="modal-header"> <button type="button" class="close" data-dismiss="modal" ng-click="vm.provider=undefined">&times;</button> <h4 class="modal-title">Advertencia</h4> </div> <div class="modal-body"> <div class="row"> <div class="col-md-12"> Esta seguro que desea Eliminar el Proveedor: {{vm.provider.name}} </div> </div> </div> <div class="modal-footer"> <button type="button" class="btn btn-primary" ng-click="vm.remove()" data-dismiss="modal"> Eliminar </button> </div> </div> </div> </div>'),a.put("views/users/edit.tpl.html",'<div style="width: 100%;height: 100%;top: 0px;left: 0px;position: fixed;display: block; z-index: 99; background: rgba(255, 255, 255, 0.3)" ng-show="vm.loading"> <div style="position: absolute;top: 15%;z-index: 100; width: 100%; text-align: center"> <div class="sk-circle"> <div class="sk-circle1 sk-child"></div> <div class="sk-circle2 sk-child"></div> <div class="sk-circle3 sk-child"></div> <div class="sk-circle4 sk-child"></div> <div class="sk-circle5 sk-child"></div> <div class="sk-circle6 sk-child"></div> <div class="sk-circle7 sk-child"></div> <div class="sk-circle8 sk-child"></div> <div class="sk-circle9 sk-child"></div> <div class="sk-circle10 sk-child"></div> <div class="sk-circle11 sk-child"></div> <div class="sk-circle12 sk-child"></div> </div> </div> </div> <div class="panel panel-default"> <div class="panel-body"> <div class="row" ng-show="vm.error !== undefined"> <div class="form-group col-md-12"> <div class="alert alert-danger">{{vm.error}}</div> </div> </div> <div class="row" ng-show="vm.success !== undefined"> <div class="form-group col-md-12"> <div class="alert alert-success">{{vm.success}}</div> </div> </div> <div class="row"> <div class="form-group col-md-6"> <label>Nombres *: </label> <input type="text" ng-model="vm.userIntegridad.firstName" class="form-control"> </div> <div class="form-group col-md-6"> <label>Apellidos *: </label> <input type="text" ng-model="vm.userIntegridad.lastName" class="form-control"> </div> </div> <div class="row"> <div class="form-group col-md-6"> <label>Tel&eacute;fono: (incluir c&oacute;digo de provincia ej: 02) </label> <input type="text" onkeypress="return ((event.which >= 48 && event.which <= 57) || (event.keyCode == 9 || event.keyCode == 8))" ng-model="vm.userIntegridad.phone" class="form-control" maxlength="9"> </div> <div class="form-group col-md-6"> <label>Tel&eacute;fono celular: </label> <input type="text" onkeypress="return ((event.which >= 48 && event.which <= 57) || (event.keyCode == 9 || event.keyCode == 8))" ng-model="vm.userIntegridad.celPhone" class="form-control" maxlength="10"> </div> </div> <div class="row"> <div class="form-group col-md-6"> <label>Fecha de Nacimiento</label> <div class="input-group date" id="pickerBirthdayEdit"> <input type="text" class="form-control input-group-addon"> <span class="input-group-addon"><span class="glyphicon glyphicon-calendar"></span> </div> <script>var defaultDate = new Date();\n          $(\'#pickerBirthdayEdit\').datetimepicker({\n            format: "DD/MM/YY",\n            defaultDate: defaultDate\n          });</script> </div> </div> <div class="row"> <div class="form-group col-md-6"> <label>C&eacute;dula *: </label> <input type="text" onkeypress="return ((event.which >= 48 && event.which <= 57) || (event.keyCode == 9 || event.keyCode == 8))" ng-model="vm.userIntegridad.cedula" class="form-control" maxlength="10"> </div> <div class="form-group col-md-6"> <label>Ruc *: </label> <input type="text" onkeypress="return ((event.which >= 48 && event.which <= 57) || (event.keyCode == 9 || event.keyCode == 8))" ng-model="vm.userIntegridad.ruc" class="form-control" maxlength="13"> </div> </div> <div class="row"> <div class="form-group col-md-12"> <label>Direcci&oacute;n: </label> <input type="text" ng-model="vm.userIntegridad.address1" class="form-control"> </div> </div> <!-- <div class="row">\n      <div class="form-group col-md-12">\n        <label>Intersecci&oacute;n: </label>\n        <input type="text" ng-model="vm.userIntegridad.address2" class="form-control">\n      </div>\n    </div> --> <div class="row"> <div class="form-group col-md-12"> <label>E-mail *: </label> <input type="text" ng-model="vm.userIntegridad.email" class="form-control"> </div> </div> <div class="row"> <div class="form-group col-md-12"> <label for="password">Cambiar Password&nbsp;</label> <input type="checkbox" id="changePassword" ng-model="vm.changePassword"> </div> </div> <div class="row" ng-show="vm.changePassword"> <div class="form-group col-md-6"> <label>Nuevo Password</label> <input type="password" class="form-control" id="password" ng-model="vm.newPass" ng-required="vm.changePassword"> </div> <div class="form-group col-md-6"> <label>Confirmar nuevo Password</label> <input type="password" class="form-control" id="passwordConfirmation" ng-model="vm.passConfirmation" ng-change="vm.validatePassword()" ng-required="vm.changePassword"> </div> </div> <div class="row" ng-show="vm.passwordNotMatch"> <div class="form-group col-md-12"> <div class="alert alert-danger">El nuevo password no coincide con la confirmacion</div> </div> </div> </div> <div class="panel-footer"> <button type="button" class="btn btn-primary" ng-click="vm.editUser()" ng-disabled="vm.userIntegridad.email === undefined || vm.passwordNotMatch"> Guardar </button> <button type="button" class="btn btn-success" ng-click="vm.cancel()"> Cancelar </button> </div> </div>'),a.put("views/users/users.tpl.html",'<div style="width: 100%;height: 100%;top: 0px;left: 0px;position: fixed;display: block; z-index: 99; background: rgba(255, 255, 255, 0.3)" ng-show="vm.loading"> <div style="position: absolute;top: 15%;z-index: 100; width: 100%; text-align: center"> <div class="sk-circle"> <div class="sk-circle1 sk-child"></div> <div class="sk-circle2 sk-child"></div> <div class="sk-circle3 sk-child"></div> <div class="sk-circle4 sk-child"></div> <div class="sk-circle5 sk-child"></div> <div class="sk-circle6 sk-child"></div> <div class="sk-circle7 sk-child"></div> <div class="sk-circle8 sk-child"></div> <div class="sk-circle9 sk-child"></div> <div class="sk-circle10 sk-child"></div> <div class="sk-circle11 sk-child"></div> <div class="sk-circle12 sk-child"></div> </div> </div> </div> <div class="header"> <h4> Usuarios </h4> </div> <div class="row" ng-show="vm.error !== undefined"> <div class="form-group col-md-12"> <div class="alert alert-danger">{{vm.error}}</div> </div> </div> <div class="row" ng-show="vm.success !== undefined"> <div class="form-group col-md-12"> <div class="alert alert-success">{{vm.success}}</div> </div> </div> <div ng-show="vm.userIntegridad === undefined"> <input ng-model="searchText" class="form-control" placeholder="Buscar"> <table class="table table-striped"> <thead> <tr> <th> Nombre </th> <th> Apellido </th> <th> Ruc </th> <th> C&eacute;dula </th> <th> Tipo </th> <th> <button type="button" class="btn btn-primary" ng-click="vm.userCreate()"> Crear </button> </th> </tr> </thead> <tbody> <tr ng-show="vm.clientList == 0"> <td colspan="4"> No hay usuarios ingresados </td> </tr> <tr ng-repeat="userEdit in vm.userList | orderBy:firstName | filter:searchText"> <td>{{ userEdit.firstName }}</td> <td>{{ userEdit.lastName }}</td> <td>{{ userEdit.ruc }}</td> <td>{{ userEdit.cedula }}</td> <td>{{ userEdit.userType.name }}</td> <td> <button type="button" class="btn btn-primary" ng-click="vm.userEdit(userEdit)"> Editar </button> <button type="button" class="btn btn-primary" ng-click="vm.userIntegridad=userEdit" data-toggle="modal" data-target="#modalEliminar"> Eliminar </button> <button type="button" class="btn btn-primary" ng-click="vm.userIntegridadResend(userEdit)"> Resetear Password </button> </td> </tr> </tbody> </table> </div> <div ng-show="vm.userIntegridad"> <div class="panel panel-default"> <div class="panel-body"> <div class="row"> <div class="form-group col-md-6"> <label>Proyecto *: </label> <select ng-options="project as project.name for project in vm.projectList  | orderBy:\'name\'  track by project.id" ng-change="vm.getSubsidiaries()" ng-model="vm.project" class="form-control"> </select> </div> <div class="form-group col-md-6"> <label>Surcursal *: </label> <select ng-options="sub as sub.name for sub in vm.subsidiaryList  | orderBy:\'name\' track by sub.id" ng-model="vm.userIntegridad.subsidiary" class="form-control" ng-change="vm.getCashiers()"> </select> </div> </div> <div class="row"> <div class="form-group col-md-6"> <label>Caja*: </label> <select ng-options="cas as cas.nameNumber for cas in vm.cashierList  | orderBy:\'nameNumber\' track by cas.id" ng-model="vm.userIntegridad.cashier" class="form-control"> </select> <!-- <input type="text" onkeypress="return ((event.which >= 48 && event.which <= 57) || (event.keyCode == 9 || event.keyCode == 8))"\n          ng-model="vm.userIntegridad.cashier" class="form-control" maxlength="9"> -->  </div> <div class="form-group col-md-6"> <label>Tipo de Usuario *: </label> <select ng-options="userType as userType.name for userType in vm.userTypes  | orderBy:\'name\' track by userType.id" ng-model="vm.userIntegridad.userType" class="form-control" ng-change="vm.getBosses()"> </select> </div> </div> <div class="row"> <div class="form-group col-md-12"> <label>Supervisor *: </label> <select ng-options="boss as (boss.firstName + \' \' + boss.lastName) for boss in vm.bosses  track by boss.id" ng-model="vm.userIntegridad.user" class="form-control"> </select> </div> </div> <div class="row"> <div class="form-group col-md-6"> <label>Nombres *: </label> <input type="text" ng-model="vm.userIntegridad.firstName" class="form-control"> </div> <div class="form-group col-md-6"> <label>Apellidos *: </label> <input type="text" ng-model="vm.userIntegridad.lastName" class="form-control"> </div> </div> <div class="row"> <div class="form-group col-md-6"> <label>Tel&eacute;fono: (incluir c&oacute;digo de provincia ej: 02) </label> <input type="text" onkeypress="return ((event.which >= 48 && event.which <= 57) || (event.keyCode == 9 || event.keyCode == 8))" ng-model="vm.userIntegridad.phone" class="form-control" maxlength="9"> </div> <div class="form-group col-md-6"> <label>Tel&eacute;fono celular: </label> <input type="text" onkeypress="return ((event.which >= 48 && event.which <= 57) || (event.keyCode == 9 || event.keyCode == 8))" ng-model="vm.userIntegridad.celPhone" class="form-control" maxlength="10"> </div> </div> <div class="row"> <div class="form-group col-md-6"> <label>Fecha de Nacimiento</label> <div class="input-group date" id="pickerBirthday"> <input type="text" class="form-control input-group-addon"> <span class="input-group-addon"><span class="glyphicon glyphicon-calendar"></span> </div> <script>var defaultDate = new Date();\n            $(\'#pickerBirthday\').datetimepicker({\n              format: "DD/MM/YY",\n              defaultDate: defaultDate\n            });</script> </div> </div> <div class="row"> <div class="form-group col-md-6"> <label>Tipo de Identificacion: </label> <select ng-options="item for item in [\'Cedula\', \'Ruc\']" ng-model="vm.typeId" class="form-control"></select> </div> <div class="form-group col-md-6" ng-show="vm.typeId === \'Cedula\'"> <label>C&eacute;dula *: </label> <input type="text" onkeypress="return ((event.which >= 48 && event.which <= 57) || (event.keyCode == 9 || event.keyCode == 8))" ng-model="vm.userIntegridad.cedula" class="form-control" maxlength="10"> </div> <div class="form-group col-md-6" ng-show="vm.typeId === \'Ruc\'"> <label>Ruc *: </label> <input type="text" onkeypress="return ((event.which >= 48 && event.which <= 57) || (event.keyCode == 9 || event.keyCode == 8))" ng-model="vm.userIntegridad.ruc" class="form-control" maxlength="13"> </div> </div> <div class="row"> <div class="form-group col-md-12"> <label>Direcci&oacute;n: </label> <input type="text" ng-model="vm.userIntegridad.address1" class="form-control"> </div> </div> <!-- <div class="row">\n        <div class="form-group col-md-12">\n          <label>Intersecci&oacute;n: </label>\n          <input type="text" ng-model="vm.userIntegridad.address2" class="form-control">\n        </div>\n      </div> --> <div class="row"> <div class="form-group col-md-12"> <label>E-mail *: </label> <input type="text" ng-model="vm.userIntegridad.email" class="form-control"> </div> </div> </div> <div class="panel-footer"> <button type="button" class="btn btn-primary" ng-click="vm.register()" ng-disabled="vm.userIntegridad.email === undefined"> Guardar </button> <button type="button" class="btn btn-success" ng-click="vm.cancel()"> Cancelar </button> </div> </div> </div> <div id="modalEliminar" class="modal fade" role="dialog"> <div class="modal-dialog"> <div class="modal-content"> <div class="modal-header"> <button type="button" class="close" data-dismiss="modal" ng-click="vm.userEdit=undefined">&times;</button> <h4 class="modal-title">Advertencia</h4> </div> <div class="modal-body"> <div class="row"> <div class="col-md-12"> Esta seguro que desea Eliminar el Usuario {{vm.userIntegridad.firstName}} {{vm.userIntegridad.lastName}} con e-mail: {{vm.userIntegridad.email}} </div> </div> </div> <div class="modal-footer"> <button type="button" class="btn btn-primary" ng-click="vm.remove()" data-dismiss="modal"> Eliminar </button> </div> </div> </div> </div>');
}]);