function routes(a){a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl",controllerAs:"vm"}).when("/activate/:idUSer/:validate",{templateUrl:"views/activate/activate.tpl.html",controller:"ActivateCtrl",controllerAs:"vm"}).when("/home",{templateUrl:"views/home/home.tpl.html",controller:"HomeCtrl",controllerAs:"vm"}).when("/users",{templateUrl:"views/users/users.tpl.html",controller:"UsersCtrl",controllerAs:"vm"}).when("/users/edit",{templateUrl:"views/users/edit.tpl.html",controller:"UserEditCtrl",controllerAs:"vm"}).when("/clients",{templateUrl:"views/clients/clients.tpl.html",controller:"ClientsCtrl",controllerAs:"vm"}).when("/bills/bill",{templateUrl:"views/bills/bill.tpl.html",controller:"BillCtrl",controllerAs:"vm"}).when("/projects/projects",{templateUrl:"views/projects/projects.tpl.html",controller:"ProjectsCtrl",controllerAs:"vm"}).otherwise({redirectTo:"/"})}var app=angular.module("integridadUiApp",["app.routes","app.core","app.directives"]);app.run(["$rootScope","$location","authorizationService","$localStorage",function(a,b,c,d){a.$on("$routeChangeStart",function(a){b.path().includes("/activate/")||c.isLoggedIn()||b.path("/")})}]),angular.module("app.routes",["ngRoute"]).config(routes),routes.$inject=["$routeProvider"],angular.module("app.services",["base64"]),angular.module("app.core",["app.services","ui.bootstrap","ngResource","toaster","ngAnimate","ngStorage","angularUtils.directives.dirPagination"]),angular.module("app.directives",["ngPatternRestrict"]),angular.module("integridadUiApp").controller("MainCtrl",["$rootScope","$location","authService","utilStringService","permissionService","$localStorage",function(a,b,c,d,e,f){function g(){e.getPermissions(f.user.userType).then(function(c){f.permissions=c,a.updateMenu(),h.loading=!1,b.path("/home")})["catch"](function(a){h.loading=!1,h.error=a.data})}var h=this;h.loading=!1,h.init=!0,h.recover=!1,h.userIntegridad={},h.error=void 0,h.success=void 0,h.login=function(){h.loading=!0;var a={email:h.email,password:h.password};c.authUser(a).then(function(a){if(f.user=a,f.user.tempPass)h.loading=!1,h.passwordNotMatch=!1,h.userIntegridad=angular.copy(f.user),$("#modalChangePassword").modal("show");else{var b=new Date;f.timeloged=b.getTime(),g()}})["catch"](function(a){h.loading=!1,h.error=a.data})},h.update=function(){h.loading=!0,h.userIntegridad.password=h.newPass,h.userIntegridad.tempPass=!1,c.updateUser(h.userIntegridad).then(function(a){h.error=void 0,h.success="Perfil actualizado con exito",f.user=a;var b=new Date;f.timeloged=b.getTime(),g()})["catch"](function(a){h.loading=!1,h.error=a.data})},h.validatePassword=function(){h.passwordNotMatch=h.newPass!==h.passConfirmation},h.register=function(){h.userIntegridad.birthDay=$("#pickerBirthday").data("DateTimePicker").date().toDate().getTime(),h.userIntegridad.email=h.userIntegridad.email.trim(),h.userIntegridad.password=h.userIntegridad.password.trim();var a=d.isAnyInArrayStringEmpty([h.userIntegridad.email,h.userIntegridad.password,h.userIntegridad.firstName,h.userIntegridad.lastName]);a?h.error="Debe ingresar Nombres completos, email y password":(a=d.isStringEmpty(h.userIntegridad.cedula)&&d.isStringEmpty(h.userIntegridad.ruc),a&&(h.error="Debe ingresar un numero de cedula o ruc")),a||(h.loading=!0,c.registerUser(h.userIntegridad).then(function(a){h.loading=!1,h.error=void 0,h.init=!0,h.success="Resgistro realizado con exito. Se envio un email a la cuenta registrada para activar su cuenta"})["catch"](function(a){h.loading=!1,h.error=a.data}))},h.recoverPass=function(){h.loading=!0;var a={email:h.email};c.recoverUser(a).then(function(a){h.loading=!1,h.recover=!1,h.success="Se envio un email a la cuenta registrada con un nuevo Password para ingresar al sistema."})["catch"](function(a){h.loading=!1,h.error=a.data})}}]),angular.module("integridadUiApp").controller("MenuCtrl",["$rootScope","$scope","$localStorage","$location",function(a,b,c,d){if(b.permissions=[],a.updateMenu=function(){b.permissions=c.permissions,b.nameType=c.user.firstName+" - "+c.user.userType.name},b.logout=function(){b.permissions=[],b.nameType=void 0,c.permissions=void 0,c.user=void 0,c.timeloged=void 0,d.path("/")},b.$on("onBeforeUnload",function(a,c){b.logout()}),c.timeloged){var e=new Date,f=e.getTime(),g=f-c.timeloged;g>864e5&&b.logout()}c.permissions&&a.updateMenu()}]),angular.module("integridadUiApp").controller("ActivateCtrl",["$routeParams","$location","authService","permissionService","$rootScope","$localStorage",function(a,b,c,d,e,f){var g=this;g.errorActive=!1,c.activeUser(a.idUSer,a.validate).then(function(a){f.user=a;var c=new Date;f.timeloged=c.getTime(),d.getPermissions(f.user.userType).then(function(a){f.permissions=a,e.updateMenu(),g.loading=!1,b.path("/home")})["catch"](function(a){g.loading=!1,g.error=a.data})})["catch"](function(a){g.errorActive=!0,g.error=a.data})}]),angular.module("integridadUiApp").controller("HomeCtrl",function(){}),angular.module("integridadUiApp").controller("UsersCtrl",["utilStringService","userTypeService","authService","projectService","subsidiaryService",function(a,b,c,d,e){function f(){j.loading=!0,c.getLazy().then(function(a){j.userList=a})["catch"](function(a){j.loading=!1,j.error=a.data}),g()}function g(){d.getLazy().then(function(a){j.projectList=a,j.loading=!1})["catch"](function(a){j.loading=!1,j.error=a.data})}function h(){j.loading=!0,c.registerUser(j.userIntegridad).then(function(a){j.loading=!1,j.error=void 0,j.success="Resgistro realizado con exito. Se envio un email a la cuenta registrada para activar su cuenta",j.userIntegridad=void 0,f()})["catch"](function(a){j.loading=!1,j.error=a.data})}function i(){j.loading=!0,c.updateUser(j.userIntegridad).then(function(a){j.loading=!1,j.error=void 0,j.success="Resgistro actualizado con exito",j.userIntegridad=void 0,f()})["catch"](function(a){j.loading=!1,j.error=a.data})}var j=this;j.loading=!1,j.userIntegridad=void 0,j.project=void 0,j.getSubsidiaries=function(){e.getByProjectId(j.project.id).then(function(a){j.subsidiaryList=a,j.loading=!1})["catch"](function(a){j.loading=!1,j.error=a.data})},j.userCreate=function(){j.success=void 0,j.error=void 0,j.userIntegridad={}},j.userEdit=function(a){j.success=void 0,j.error=void 0,j.userIntegridad=angular.copy(a),void 0!==j.userIntegridad.cedula&&null!==j.userIntegridad.cedula?j.typeId="Cedula":j.typeId="Ruc",g(),j.project=j.userIntegridad.subsidiary.userClient,j.getSubsidiaries(),$("#pickerBirthday").data("DateTimePicker").date(new Date(j.userIntegridad.birthDay))},j.register=function(){j.userIntegridad.birthDay=$("#pickerBirthday").data("DateTimePicker").date().toDate().getTime(),j.userIntegridad.email=j.userIntegridad.email.trim(),j.userIntegridad.password=a.randomString();var b=a.isAnyInArrayStringEmpty([j.userIntegridad.email,j.userIntegridad.password,j.userIntegridad.firstName,j.userIntegridad.lastName]);b?j.error="Debe ingresar Nombres completos y un email":(b=a.isStringEmpty(j.userIntegridad.cedula)&&a.isStringEmpty(j.userIntegridad.ruc),b&&(j.error="Debe ingresar un numero de cedula o ruc")),b||(void 0===j.userIntegridad.id?h():(j.userIntegridad.password="",i(!1)))},j.cancel=function(){j.userIntegridad=void 0,j.success=void 0,j.error=void 0},function(){j.loading=!0,b.getUserTypes().then(function(a){j.userTypes=a,j.loading=!1})["catch"](function(a){j.loading=!1,j.error=a.data}),f()}()}]),angular.module("integridadUiApp").controller("UserEditCtrl",["$rootScope","utilStringService","userTypeService","authService","$localStorage",function(a,b,c,d,e){function f(){$("#pickerBirthday").data("DateTimePicker").date(new Date(g.userIntegridad.birthDay))}var g=this;g.loading=!1,g.userIntegridad=angular.copy(e.user),g.changePassword=!1,g.passwordNotMatch=!1,g.validatePassword=function(){g.passwordNotMatch=g.newPass!==g.passConfirmation},g.editUser=function(){g.changePassword&&!g.passwordNotMatch?g.userIntegridad.password=g.newPass:g.userIntegridad.password="",g.userIntegridad.birthDay=$("#pickerBirthday").data("DateTimePicker").date().toDate().getTime(),g.userIntegridad.email=g.userIntegridad.email.trim();var c=b.isAnyInArrayStringEmpty([g.userIntegridad.email,g.userIntegridad.firstName,g.userIntegridad.lastName]);c?g.error="Debe ingresar Nombres completos y un email":(c=b.isStringEmpty(g.userIntegridad.cedula)&&b.isStringEmpty(g.userIntegridad.ruc),c&&(g.error="Debe ingresar un numero de cedula o ruc")),c||(g.loading=!0,d.updateUser(g.userIntegridad).then(function(b){g.loading=!1,g.error=void 0,g.success="Perfil actualizado con exito",e.user=b,a.updateMenu()})["catch"](function(a){g.loading=!1,g.error=a.data}))},g.cancel=function(){g.userIntegridad=angular.copy(e.user),g.success=void 0,g.error=void 0,g.changePassword=!1,g.passwordNotMatch=!1},function(){f()}()}]),angular.module("integridadUiApp").controller("ClientsCtrl",["utilStringService","countryListService","clientService",function(a,b,c){function d(){g.loading=!0,c.getLazy().then(function(a){g.clientList=a,g.loading=!1})["catch"](function(a){g.loading=!1,g.error=a.data})}function e(){c.create(g.client).then(function(a){g.client=void 0,d(),g.error=void 0,g.success="Resgistro realizado con exito"})["catch"](function(a){g.loading=!1,g.error=a.data})}function f(a){c.update(g.client).then(function(b){g.client=void 0,d(),g.error=void 0,a?g.success="Resgistro eliminado con exito":g.success="Resgistro actualizado con exito"})["catch"](function(a){g.loading=!1,g.error=a.data})}var g=this;g.loading=!1,g.client=void 0,g.countryList=b.getCountryList(),g.citiesList=b.getCitiesEcuador(),g.clientList=void 0,g.clientCreate=function(){g.success=void 0,g.error=void 0,g.client={country:"Ecuador",city:"Quito"}},g.clientEdit=function(a){g.success=void 0,g.error=void 0,g.client=angular.copy(a)},g.validateEcuador=function(){"Ecuador"!==g.client.country&&(g.client.city=void 0)},g.save=function(){var b=a.isAnyInArrayStringEmpty([g.client.name,g.client.identification,g.client.codConta]);b?g.error="Debe ingresar Nombres completos, una identificacion y el Codigo de Contabilidad":(g.loading=!0,void 0===g.client.id?e():f(!1))},g.remove=function(){g.client.active=!1,f(!0)},g.cancel=function(){g.client=void 0,g.success=void 0,g.error=void 0},function(){d()}()}]),angular.module("integridadUiApp").controller("BillCtrl",["$rootScope","utilStringService","userTypeService","authService","$localStorage",function(a,b,c,d,e){}]),angular.module("integridadUiApp").controller("ProjectsCtrl",["$localStorage","$location","projectService","utilStringService",function(a,b,c,d){function e(){h.loading=!0,c.getLazy().then(function(a){h.projectList=a,h.loading=!1})["catch"](function(a){h.loading=!1,h.error=a.data})}function f(){c.create(h.project).then(function(a){h.project=void 0,e(),h.error=void 0,h.success="Resgistro realizado con exito"})["catch"](function(a){h.loading=!1,h.error=a.data})}function g(a){c.update(h.project).then(function(b){h.project=void 0,e(),h.error=void 0,a?h.success="Resgistro eliminado con exito":h.success="Resgistro actualizado con exito"})["catch"](function(a){h.loading=!1,h.error=a.data})}var h=this;h.loading=!1,h.project=void 0,h.projectList=void 0,h.subsidiary=void 0,h.projectCreate=function(){h.success=void 0,h.error=void 0,h.project={subsidiaries:[]}},h.save=function(){var a=d.isAnyInArrayStringEmpty([h.project.name,h.project.threeCode,h.project.codeIntegridad,h.project.ruc]);a?h.error="Debe ingresar Nombres completos, ruc y sus Codigos":(h.loading=!0,void 0===h.project.id?f():g(!1))},h.remove=function(){h.project.active=!1,g(!0)},h.removeSubsidiary=function(){h.subsidiary.active=!1,g(!0)},h.editProject=function(a){c.getById(a.id).then(function(a){h.project=a})["catch"](function(a){h.loading=!1,h.error=a.data})},h.saveSubsidiary=function(){void 0===h.subsidiary.id&&void 0!==h.subsidiary.name&&(h.subsidiary.active=!0,h.subsidiary.dateCreated=(new Date).getTime(),h.project.subsidiaries.push(h.subsidiary))},h.cancel=function(){h.project=void 0,h.success=void 0,h.error=void 0},h.cancelSubisdiary=function(){h.subsidiary=void 0,h.success=void 0,h.error=void 0},function(){e()}()}]),angular.module("app.services").factory("beforeunload",["$rootScope","$window",function(a,b){return b.onbeforeunload=function(b){var c={};a.$broadcast("onBeforeUnload",c)},b.onunload=function(){a.$broadcast("onUnload")},{}}]).run(["beforeunload",function(a){}]),angular.module("app.services").factory("authorizationService",["$localStorage",function(a){return{isLoggedIn:function(){return a.user?a.user:!1}}}]),angular.module("app.services").service("securityService",["$http","$base64",function(a,b){var c="https://integridad.herokuapp.com/integridad/v1",d={},e=b.encode("dan:12345");d.headers={"Content-Type":"application/json",Authorization:"Basic "+e},this.get=function(b){return a.get(c+b)},this["delete"]=function(b){return a["delete"](c+b)},this.post=function(b,e){var f=c+b;return a.post(f,e,d)},this.put=function(b,e){var f=c+b;return a.put(f,e,d)}}]),angular.module("app.services").service("utilStringService",function(){this.isStringEmpty=function(a){return a?!1:!0},this.isAnyInArrayStringEmpty=function(a){for(var b,c=0;c<a.length;c++){if(!a[c]){b=!0;break}b=!1}return b},this.randomString=function(){for(var a="",b="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",c=0;5>c;c++)a+=b.charAt(Math.floor(Math.random()*b.length));return a}}),angular.module("app.services").service("countryListService",function(){this.getCountryList=function(){var a=["Afghanistan","Albania","Algeria","Andorra","Angola","Anguilla","Antigua &amp; Barbuda","Argentina","Armenia","Aruba","Australia","Austria","Azerbaijan","Bahamas","Bahrain","Bangladesh","Barbados","Belarus","Belgium","Belize","Benin","Bermuda","Bhutan","Bolivia","Bosnia &amp; Herzegovina","Botswana","Brazil","British Virgin Islands","Brunei","Bulgaria","Burkina Faso","Burundi","Cambodia","Cameroon","Canada","Cape Verde","Cayman Islands","Chad","Chile","China","Colombia","Congo","Cook Islands","Costa Rica","Cote D Ivoire","Croatia","Cruise Ship","Cuba","Cyprus","Czech Republic","Denmark","Djibouti","Dominica","Dominican Republic","Ecuador","Egypt","El Salvador","Equatorial Guinea","Estonia","Ethiopia","Falkland Islands","Faroe Islands","Fiji","Finland","France","French Polynesia","French West Indies","Gabon","Gambia","Georgia","Germany","Ghana","Gibraltar","Greece","Greenland","Grenada","Guam","Guatemala","Guernsey","Guinea","Guinea Bissau","Guyana","Haiti","Honduras","Hong Kong","Hungary","Iceland","India","Indonesia","Iran","Iraq","Ireland","Isle of Man","Israel","Italy","Jamaica","Japan","Jersey","Jordan","Kazakhstan","Kenya","Kuwait","Kyrgyz Republic","Laos","Latvia","Lebanon","Lesotho","Liberia","Libya","Liechtenstein","Lithuania","Luxembourg","Macau","Macedonia","Madagascar","Malawi","Malaysia","Maldives","Mali","Malta","Mauritania","Mauritius","Mexico","Moldova","Monaco","Mongolia","Montenegro","Montserrat","Morocco","Mozambique","Namibia","Nepal","Netherlands","Netherlands Antilles","New Caledonia","New Zealand","Nicaragua","Niger","Nigeria","Norway","Oman","Pakistan","Palestine","Panama","Papua New Guinea","Paraguay","Peru","Philippines","Poland","Portugal","Puerto Rico","Qatar","Reunion","Romania","Russia","Rwanda","Saint Pierre &amp; Miquelon","Samoa","San Marino","Satellite","Saudi Arabia","Senegal","Serbia","Seychelles","Sierra Leone","Singapore","Slovakia","Slovenia","South Africa","South Korea","Spain","Sri Lanka","St Kitts &amp; Nevis","St Lucia","St Vincent","St. Lucia","Sudan","Suriname","Swaziland","Sweden","Switzerland","Syria","Taiwan","Tajikistan","Tanzania","Thailand","Timor L'Este","Togo","Tonga","Trinidad &amp; Tobago","Tunisia","Turkey","Turkmenistan","Turks &amp; Caicos","Uganda","Ukraine","United Arab Emirates","United Kingdom","United States","United States Minor Outlying Islands","Uruguay","Uzbekistan","Venezuela","Vietnam","Virgin Islands (US)","Yemen","Zambia","Zimbabwe"];return a},this.getCitiesEcuador=function(){var a=["Ambato","Arajuno","Babahoyo","Bahía de Caráquez","Baños de Agua Santa","Cuenca","Coca","Durán","Esmeraldas","Guaranda","Guayaquil","Ibarra","La Libertad","Lago Agrio","Latacunga","Loja","Macas","Machala","Manta","Milagro","Nueva Loja","Portoviejo","Piñas","Pintag","Quevedo","Quito","Riobamba","Santo Domingo de los Colorados","Salinas","Shell Mera","Tulcán"];return a}}),angular.module("app.services").service("authService",["securityService",function(a){this.authUser=function(b){return a.post("/user/auth",b).then(function(a){return a.data})},this.registerUser=function(b){return a.post("/user",b).then(function(a){return a.data})},this.activeUser=function(b,c){return a.put("/user/"+b+"/"+c).then(function(a){return a.data})},this.updateUser=function(b){return a.put("/user",b).then(function(a){return a.data})},this.recoverUser=function(b){return a.post("/user/recover",b).then(function(a){return a.data})},this.getLazy=function(){return a.get("/user/lazy").then(function(a){return a.data})}}]),angular.module("app.services").service("clientService",["securityService",function(a){this.create=function(b){return a.post("/client",b).then(function(a){return a.data})},this.update=function(b){return a.put("/client",b).then(function(a){return a.data})},this.getLazy=function(){return a.get("/client/lazy").then(function(a){return a.data})}}]),angular.module("app.services").service("permissionService",["securityService",function(a){this.getPermissions=function(b){return a.post("/user_type_permission/user_type",b).then(function(a){return a.data})}}]),angular.module("app.services").service("userTypeService",["securityService",function(a){this.getUserTypes=function(){return a.get("/user_type/lazy").then(function(a){return a.data})}}]),angular.module("app.services").service("subsidiaryService",["securityService",function(a){this.getByProjectId=function(b){return a.get("/subsidiary/user_client/"+b).then(function(a){return a.data})}}]),angular.module("app.services").service("projectService",["securityService",function(a){this.create=function(b){return a.post("/project",b).then(function(a){return a.data})},this.update=function(b){return a.put("/project",b).then(function(a){return a.data})},this.getLazy=function(){return a.get("/project/lazy").then(function(a){return a.data})},this.getById=function(b){return a.get("/project/"+b).then(function(a){return a.data})}}]),angular.module("integridadUiApp").run(["$templateCache",function(a){"use strict";a.put("views/activate/activate.tpl.html",'<div class="panel panel-default"> <div class="panel-body"> <div class="row" ng-show="vm.errorActive"> <div class="form-group col-md-12"> <div class="alert alert-danger">{{vm.error}}</div> </div> </div> </div> </div>'),a.put("views/bills/bill.tpl.html",'<div style="width: 100%;height: 100%;top: 0px;left: 0px;position: fixed;display: block; z-index: 99; background: rgba(255, 255, 255, 0.3)" ng-show="vm.loading"> <div style="position: absolute;top: 15%;z-index: 100; width: 100%; text-align: center"> <div class="sk-circle"> <div class="sk-circle1 sk-child"></div> <div class="sk-circle2 sk-child"></div> <div class="sk-circle3 sk-child"></div> <div class="sk-circle4 sk-child"></div> <div class="sk-circle5 sk-child"></div> <div class="sk-circle6 sk-child"></div> <div class="sk-circle7 sk-child"></div> <div class="sk-circle8 sk-child"></div> <div class="sk-circle9 sk-child"></div> <div class="sk-circle10 sk-child"></div> <div class="sk-circle11 sk-child"></div> <div class="sk-circle12 sk-child"></div> </div> </div> </div> <div class="header"> <h4> Factura </h4> </div>'),a.put("views/clients/clients.tpl.html",'<div style="width: 100%;height: 100%;top: 0px;left: 0px;position: fixed;display: block; z-index: 99; background: rgba(255, 255, 255, 0.3)" ng-show="vm.loading"> <div style="position: absolute;top: 15%;z-index: 100; width: 100%; text-align: center"> <div class="sk-circle"> <div class="sk-circle1 sk-child"></div> <div class="sk-circle2 sk-child"></div> <div class="sk-circle3 sk-child"></div> <div class="sk-circle4 sk-child"></div> <div class="sk-circle5 sk-child"></div> <div class="sk-circle6 sk-child"></div> <div class="sk-circle7 sk-child"></div> <div class="sk-circle8 sk-child"></div> <div class="sk-circle9 sk-child"></div> <div class="sk-circle10 sk-child"></div> <div class="sk-circle11 sk-child"></div> <div class="sk-circle12 sk-child"></div> </div> </div> </div> <div class="header"> <h4> Clientes </h4> </div> <div class="row" ng-show="vm.error !== undefined"> <div class="form-group col-md-12"> <div class="alert alert-danger">{{vm.error}}</div> </div> </div> <div class="row" ng-show="vm.success !== undefined"> <div class="form-group col-md-12"> <div class="alert alert-success">{{vm.success}}</div> </div> </div> <div ng-show="vm.client === undefined"> <input ng-model="searchText" class="form-control" placeholder="Buscar"> <table class="table table-striped"> <thead> <tr> <th> CodConta </th> <th> Nombre </th> <th> Ruc / C&eacute;dula </th> <th> <button type="button" class="btn btn-primary" ng-click="vm.clientCreate()"> Crear </button> </th> </tr> </thead> <tbody> <tr ng-show="vm.clientList == 0"> <td colspan="4"> No hay clientes ingresados </td> </tr> <tr ng-repeat="clientEdit in vm.clientList | orderBy:name | filter:searchText"> <td>{{ clientEdit.codConta }}</td> <td>{{ clientEdit.name }}</td> <td>{{ clientEdit.identification }}</td> <td> <button type="button" class="btn btn-primary" ng-click="vm.clientEdit(clientEdit)"> Editar </button> <button type="button" class="btn btn-primary" ng-click="vm.client=clientEdit" data-toggle="modal" data-target="#modalEliminar"> Eliminar </button> </td> </tr> </tbody> </table> </div> <div class="panel panel-default" ng-show="vm.client"> <div class="panel-body"> <div class="row"> <div class="form-group col-md-12"> <label>Nombre *: </label> <input type="text" ng-model="vm.client.name" class="form-control"> </div> </div> <div class="row"> <div class="form-group col-md-6"> <label>Tel&eacute;fono: (incluir c&oacute;digo de provincia ej: 02) </label> <input type="text" onkeypress="return ((event.which >= 48 && event.which <= 57) || (event.keyCode == 9 || event.keyCode == 8))" ng-model="vm.client.phone" class="form-control" maxlength="9"> </div> <div class="form-group col-md-6"> <label>Tel&eacute;fono celular: </label> <input type="text" onkeypress="return ((event.which >= 48 && event.which <= 57) || (event.keyCode == 9 || event.keyCode == 8))" ng-model="vm.client.celPhone" class="form-control" maxlength="10"> </div> </div> <div class="row"> <div class="form-group col-md-6"> <label>Pa&iacute;s: </label> <select ng-options="country for country in vm.countryList" ng-model="vm.client.country" class="form-control" ng-change="vm.validateEcuador()"></select> </div> <div class="form-group col-md-6" ng-show="vm.client.country === \'Ecuador\'"> <label>Ciudad: </label> <select ng-options="city for city in vm.citiesList" ng-model="vm.client.city" class="form-control"></select> </div> <div class="form-group col-md-6" ng-show="vm.client.country !== \'Ecuador\'"> <label>Ciudad: </label> <input type="text" ng-model="vm.client.city" class="form-control"> </div> </div> <div class="row"> <div class="form-group col-md-6"> <label>Tipo de Identificacion: </label> <select ng-options="item.code as item.name for item in [{code:\'CED\', name:\'CEDULA\'}, {code:\'RUC\', name:\'RUC\'}]" ng-model="vm.client.typeId" class="form-control"></select> </div> <div class="form-group col-md-6" ng-show="vm.client.typeId === \'CED\'"> <label>C&eacute;dula *: </label> <input type="text" onkeypress="return ((event.which >= 48 && event.which <= 57) || (event.keyCode == 9 || event.keyCode == 8))" ng-model="vm.client.identification" class="form-control" maxlength="10"> </div> <div class="form-group col-md-6" ng-show="vm.client.typeId === \'RUC\'"> <label>Ruc *: </label> <input type="text" onkeypress="return ((event.which >= 48 && event.which <= 57) || (event.keyCode == 9 || event.keyCode == 8))" ng-model="vm.client.identification" class="form-control" maxlength="13"> </div> </div> <div class="row"> <div class="form-group col-md-12"> <label>Direcci&oacute;n: </label> <input type="text" ng-model="vm.client.address" class="form-control"> </div> </div> <!-- <div class="row">\n      <div class="form-group col-md-12">\n        <label>Intersecci&oacute;n: </label>\n        <input type="text" ng-model="vm.client.address2" class="form-control">\n      </div>\n    </div> --> <div class="row"> <div class="form-group col-md-6"> <label>C&oacute;digo Contabilidad: </label> <input type="text" ng-model="vm.client.codConta" class="form-control"> </div> <div class="form-group col-md-6"> <label>Contacto: </label> <input type="text" ng-model="vm.client.contact" class="form-control"> </div> </div> </div> <div class="panel-footer"> <button type="button" class="btn btn-primary" ng-click="vm.save()" ng-disabled="vm.client.name === undefined || vm.client.identification === undefined ||\n      vm.client.codConta === undefined"> Guardar </button> <button type="button" class="btn btn-success" ng-click="vm.cancel()"> Cancelar </button> </div> </div> <div id="modalEliminar" class="modal fade" role="dialog"> <div class="modal-dialog"> <div class="modal-content"> <div class="modal-header"> <button type="button" class="close" data-dismiss="modal" ng-click="vm.client=undefined">&times;</button> <h4 class="modal-title">Advertencia</h4> </div> <div class="modal-body"> <div class="row"> <div class="col-md-12"> Esta seguro que desea Eliminar el cliente {{vm.client.name}} con identificacion: {{vm.client.identification}} </div> </div> </div> <div class="modal-footer"> <button type="button" class="btn btn-primary" ng-click="vm.remove()" data-dismiss="modal"> Eliminar </button> </div> </div> </div> </div>'),a.put("views/home/home.tpl.html",'<div class="panel panel-default"> <div class="panel-body"> <div class="row"> <div class="form-group col-md-12"> <h1>HOLA HOLA <br> Gracias por ingresar al Sistema Integridad</h1> </div> </div> </div> </div>'),a.put("views/main.html",'<div style="width: 100%;height: 100%;top: 0px;left: 0px;position: fixed;display: block; z-index: 99; background: rgba(255, 255, 255, 0.3)" ng-show="vm.loading"> <div style="position: absolute;top: 15%;z-index: 100; width: 100%; text-align: center"> <div class="sk-circle"> <div class="sk-circle1 sk-child"></div> <div class="sk-circle2 sk-child"></div> <div class="sk-circle3 sk-child"></div> <div class="sk-circle4 sk-child"></div> <div class="sk-circle5 sk-child"></div> <div class="sk-circle6 sk-child"></div> <div class="sk-circle7 sk-child"></div> <div class="sk-circle8 sk-child"></div> <div class="sk-circle9 sk-child"></div> <div class="sk-circle10 sk-child"></div> <div class="sk-circle11 sk-child"></div> <div class="sk-circle12 sk-child"></div> </div> </div> </div> <div class="row" ng-show="vm.init"> <div class="col-md-8 col-md-offset-2"> <img src="images/zolutions1.36c9be71.jpg"><br> </div> </div> <div class="panel panel-default" ng-show="vm.init && !vm.recover"> <div class="panel-body"> <div class="row" ng-show="vm.error !== undefined"> <div class="form-group col-md-12"> <div class="alert alert-danger">{{vm.error}}</div> </div> </div> <div class="row" ng-show="vm.success !== undefined"> <div class="form-group col-md-12"> <div class="alert alert-success">{{vm.success}}</div> </div> </div> <div class="row"> <div class="form-group col-md-6"> <label>E-mail: </label> <input type="text" ng-model="vm.email" class="form-control"> </div> <div class="form-group col-md-6"> <label>Password: </label> <input type="password" ng-model="vm.password" class="form-control"> </div> </div> </div> <div class="panel-footer"> <button type="button" class="btn btn-primary" ng-click="vm.login()" ng-disabled="vm.email === undefined || vm.password === undefined"> Ingresar </button> <!-- <button type="button" class="btn btn-success"\n    ng-click="vm.init = false; vm.userIntegridad = {}; vm.success=undefined; vm.error=undefined">\n      Registrarse\n    </button> --> <button type="button" class="btn btn-warning" ng-click="vm.recover = true; vm.success=undefined; vm.error=undefined"> Olvid&eacute; mi Password </button> </div> </div> <div class="panel panel-default" ng-show="vm.recover"> <div class="panel-body"> <div class="row" ng-show="vm.error !== undefined"> <div class="form-group col-md-12"> <div class="alert alert-danger">{{vm.error}}</div> </div> </div> <div class="row" ng-show="vm.success !== undefined"> <div class="form-group col-md-12"> <div class="alert alert-success">{{vm.success}}</div> </div> </div> <div class="row"> <div class="form-group col-md-12"> <label>Ingrese E-mail de la cuenta a recuperar: </label> <input type="text" ng-model="vm.email" class="form-control"> </div> </div> </div> <div class="panel-footer"> <button type="button" class="btn btn-primary" ng-click="vm.recoverPass()" ng-disabled="vm.email === undefined"> Recuperar </button> <button type="button" class="btn btn-success" ng-click="vm.recover = false; vm.userIntegridad = {}; vm.success=undefined; vm.error=undefined"> Cancelar </button> </div> </div> <div class="panel panel-default" ng-show="!vm.init"> <div class="panel-body"> <div class="row" ng-show="vm.error !== undefined"> <div class="form-group col-md-12"> <div class="alert alert-danger">{{vm.error}}</div> </div> </div> <div class="row" ng-show="vm.success !== undefined"> <div class="form-group col-md-12"> <div class="alert alert-success">{{vm.success}}</div> </div> </div> <div class="row"> <div class="form-group col-md-6"> <label>Nombre *: </label> <input type="text" ng-model="vm.userIntegridad.firstName" class="form-control"> </div> <div class="form-group col-md-6"> <label>Apellido *: </label> <input type="text" ng-model="vm.userIntegridad.lastName" class="form-control"> </div> </div> <div class="row"> <div class="form-group col-md-6"> <label>Tel&eacute;fono: (incluir c&oacute;digo de provincia ej: 02) </label> <input type="text" onkeypress="return ((event.which >= 48 && event.which <= 57) || (event.keyCode == 9 || event.keyCode == 8))" ng-model="vm.userIntegridad.phone" class="form-control" maxlength="9"> </div> <div class="form-group col-md-6"> <label>Tel&eacute;fono celular: </label> <input type="text" onkeypress="return ((event.which >= 48 && event.which <= 57) || (event.keyCode == 9 || event.keyCode == 8))" ng-model="vm.userIntegridad.celPhone" class="form-control" maxlength="10"> </div> </div> <div class="row"> <div class="form-group col-md-6"> <label>Fecha de Nacimiento</label> <div class="input-group date" id="pickerBirthday"> <input type="text" class="form-control input-group-addon"> <span class="input-group-addon"><span class="glyphicon glyphicon-calendar"></span> </div> <script>var defaultDate = new Date();\n          $(\'#pickerBirthday\').datetimepicker({\n            format: "DD/MM/YY",\n            defaultDate: defaultDate\n          });</script> </div> </div> <div class="row"> <div class="form-group col-md-6"> <label>Tipo de Identificacion: </label> <select ng-options="item for item in [\'Cedula\', \'Ruc\']" ng-model="vm.typeId" class="form-control"></select> </div> <div class="form-group col-md-6" ng-show="vm.typeId === \'Cedula\'"> <label>C&eacute;dula *: </label> <input type="text" onkeypress="return ((event.which >= 48 && event.which <= 57) || (event.keyCode == 9 || event.keyCode == 8))" ng-model="vm.userIntegridad.cedula" class="form-control" maxlength="10"> </div> <div class="form-group col-md-6" ng-show="vm.typeId === \'Ruc\'"> <label>Ruc *: </label> <input type="text" onkeypress="return ((event.which >= 48 && event.which <= 57) || (event.keyCode == 9 || event.keyCode == 8))" ng-model="vm.userIntegridad.ruc" class="form-control" maxlength="13"> </div> </div> <div class="row"> <div class="form-group col-md-12"> <label>Direcci&oacute;n: </label> <input type="text" ng-model="vm.userIntegridad.address1" class="form-control"> </div> </div> <!-- <div class="row">\n      <div class="form-group col-md-12">\n        <label>Intersecci&oacute;n: </label>\n        <input type="text" ng-model="vm.userIntegridad.address2" class="form-control">\n      </div>\n    </div> --> <div class="row"> <div class="form-group col-md-6"> <label>E-mail *: </label> <input type="text" ng-model="vm.userIntegridad.email" class="form-control"> </div> <div class="form-group col-md-6"> <label>Password *: </label> <input type="password" ng-model="vm.userIntegridad.password" class="form-control"> </div> </div> </div> <div class="panel-footer"> <button type="button" class="btn btn-primary" ng-click="vm.register()" ng-disabled="vm.userIntegridad.email === undefined || vm.userIntegridad.password === undefined"> Registrar </button> <button type="button" class="btn btn-success" ng-click="vm.init = true; vm.userIntegridad = {}; vm.success=undefined; vm.error=undefined"> Cancelar </button> </div> </div> <div id="modalChangePassword" class="modal fade" role="dialog"> <div class="modal-dialog"> <div class="modal-content"> <div class="modal-header"> <h4 class="modal-title">Cambie su clave Temporal</h4> </div> <div class="modal-body"> <div class="row"> <div class="form-group col-md-6"> <label>Nuevo Password</label> <input type="password" class="form-control" id="password" ng-model="vm.newPass"> </div> <div class="form-group col-md-6"> <label>Confirmar nuevo Password</label> <input type="password" class="form-control" id="passwordConfirmation" ng-model="vm.passConfirmation" ng-change="vm.validatePassword()"> </div> </div> <div class="row" ng-show="vm.passwordNotMatch"> <div class="form-group col-md-12"> <div class="alert alert-danger">El nuevo password no coincide con la confirmacion</div> </div> </div> </div> <div class="modal-footer"> <div ng-if="vm.passConfirmation"> <button class="btn btn-primary" ng-click="vm.update()" data-dismiss="modal" ng-disabled="vm.passwordNotMatch">Cambiar e Ingresar</button> </div> </div> </div> </div> </div>'),
a.put("views/projects/projects.tpl.html",'<div style="width: 100%;height: 100%;top: 0px;left: 0px;position: fixed;display: block; z-index: 99; background: rgba(255, 255, 255, 0.3)" ng-show="vm.loading"> <div style="position: absolute;top: 15%;z-index: 100; width: 100%; text-align: center"> <div class="sk-circle"> <div class="sk-circle1 sk-child"></div> <div class="sk-circle2 sk-child"></div> <div class="sk-circle3 sk-child"></div> <div class="sk-circle4 sk-child"></div> <div class="sk-circle5 sk-child"></div> <div class="sk-circle6 sk-child"></div> <div class="sk-circle7 sk-child"></div> <div class="sk-circle8 sk-child"></div> <div class="sk-circle9 sk-child"></div> <div class="sk-circle10 sk-child"></div> <div class="sk-circle11 sk-child"></div> <div class="sk-circle12 sk-child"></div> </div> </div> </div> <div class="header"> <h4> Proyectos </h4> </div> <div class="row" ng-show="vm.error !== undefined"> <div class="form-group col-md-12"> <div class="alert alert-danger">{{vm.error}}</div> </div> </div> <div class="row" ng-show="vm.success !== undefined"> <div class="form-group col-md-12"> <div class="alert alert-success">{{vm.success}}</div> </div> </div> <div ng-show="vm.project === undefined"> <input ng-model="searchText" class="form-control" placeholder="Buscar"> <table class="table table-striped"> <thead> <tr> <th> Codigo </th> <th> Nombre </th> <th> Ruc </th> <th> <button type="button" class="btn btn-primary" ng-click="vm.projectCreate()"> Crear </button> </th> </tr> </thead> <tbody> <tr ng-show="vm.projectList == 0"> <td colspan="4"> No hay proyectos ingresados </td> </tr> <tr ng-repeat="projectEdit in vm.projectList | orderBy:name | filter:searchText"> <td>{{ projectEdit.codeIntegridad }}</td> <td>{{ projectEdit.name }}</td> <td>{{ projectEdit.ruc }}</td> <td> <button type="button" class="btn btn-primary" ng-click="vm.editProject(projectEdit)"> Editar </button> <button type="button" class="btn btn-primary" ng-click="vm.project=projectEdit" data-toggle="modal" data-target="#modalEliminar"> Eliminar </button> </td> </tr> </tbody> </table> </div> <div class="panel panel-default" ng-show="vm.project"> <div class="panel-body"> <div class="row"> <div class="form-group col-md-12"> <label>Nombre *: </label> <input type="text" ng-model="vm.project.name" class="form-control"> </div> </div> <div class="row"> <div class="form-group col-md-6"> <label>Tel&eacute;fono: (incluir c&oacute;digo de provincia ej: 02) </label> <input type="text" onkeypress="return ((event.which >= 48 && event.which <= 57) || (event.keyCode == 9 || event.keyCode == 8))" ng-model="vm.project.phone" class="form-control" maxlength="9"> </div> <div class="form-group col-md-6"> <label>Tel&eacute;fono celular: </label> <input type="text" onkeypress="return ((event.which >= 48 && event.which <= 57) || (event.keyCode == 9 || event.keyCode == 8))" ng-model="vm.project.celPhone" class="form-control" maxlength="10"> </div> </div> <div class="row"> <div class="form-group col-md-6"> <label>Ciudad: </label> <input type="text" ng-model="vm.project.city" class="form-control"> </div> </div> <div class="row"> <div class="form-group col-md-12"> <label>Direcci&oacute;n: </label> <input type="text" ng-model="vm.project.address1" class="form-control"> </div> </div> <div class="row"> <div class="form-group col-md-6"> <label>C&eacute;dula: </label> <input type="text" onkeypress="return ((event.which >= 48 && event.which <= 57) || (event.keyCode == 9 || event.keyCode == 8))" ng-model="vm.project.cedula" class="form-control" maxlength="10"> </div> <div class="form-group col-md-6"> <label>Ruc *: </label> <input type="text" onkeypress="return ((event.which >= 48 && event.which <= 57) || (event.keyCode == 9 || event.keyCode == 8))" ng-model="vm.project.ruc" class="form-control" maxlength="13"> </div> </div> <div class="row"> <div class="form-group col-md-6"> <label>C&oacute;digo Facturaci&oacute;n (Ejemplo: 001): </label> <input type="text" ng-model="vm.project.threeCode" class="form-control"> </div> <div class="form-group col-md-6"> <label>C&oacute;digo Integridad(Ejemplo: COD01-01): </label> <input type="text" ng-model="vm.project.codeIntegridad" class="form-control"> </div> </div> <div class="row"> <div class="form-group col-md-12"> <h4> Sucursales </h4> </div> </div> <div class="row"> <div class="form-group col-md-12"> <table class="table table-striped"> <thead> <tr> <th> C&oacute;digo Facturaci&oacute;n </th> <th> Nombre </th> <th> Ciudad </th> <th> Direcci&oacute;n </th> <th> <button type="button" class="btn btn-primary" ng-click="vm.subsidiary={}" data-toggle="modal" data-target="#modalSubsidiary"> Agregar </button> </th> </tr> </thead> <tbody> <tr ng-show="vm.project.subsidiaries == 0"> <td colspan="4"> No hay sucursales ingresados </td> </tr> <tr ng-repeat="subsi in vm.project.subsidiaries | orderBy:name | filter:{active: true}"> <td>{{ subsi.threeCode }}</td> <td>{{ subsi.name }}</td> <td>{{ subsi.city }}</td> <td>{{ subsi.address1 }}</td> <td> <button type="button" class="btn btn-primary" ng-click="vm.subsidiary=subsi" data-toggle="modal" data-target="#modalSubsidiary"> Editar </button> <button type="button" class="btn btn-primary" ng-click="vm.subsidiary=subsi" data-toggle="modal" data-target="#modalEliminarSubsidiary"> Eliminar </button> </td> </tr> </tbody> </table> </div> </div> </div> <div class="panel-footer"> <button type="button" class="btn btn-primary" ng-click="vm.save()" ng-disabled="vm.project.name === undefined"> Guardar </button> <button type="button" class="btn btn-success" ng-click="vm.cancel()"> Cancelar </button> </div> </div> <div id="modalSubsidiary" class="modal fade" role="dialog"> <div class="modal-dialog"> <div class="modal-content"> <div class="modal-header"> <button type="button" class="close" data-dismiss="modal" ng-click="vm.subsidiary=undefined">&times;</button> <h4 class="modal-title">Sucursal</h4> </div> <div class="modal-body"> <div class="row"> <div class="form-group col-md-12"> <label>Nombre *: </label> <input type="text" ng-model="vm.subsidiary.name" class="form-control"> </div> </div> <div class="row"> <div class="form-group col-md-6"> <label>Tel&eacute;fono: (incluir c&oacute;digo de provincia ej: 02) </label> <input type="text" onkeypress="return ((event.which >= 48 && event.which <= 57) || (event.keyCode == 9 || event.keyCode == 8))" ng-model="vm.subsidiary.phone" class="form-control" maxlength="9"> </div> <div class="form-group col-md-6"> <label>Tel&eacute;fono celular: </label> <input type="text" onkeypress="return ((event.which >= 48 && event.which <= 57) || (event.keyCode == 9 || event.keyCode == 8))" ng-model="vm.subsidiary.celPhone" class="form-control" maxlength="10"> </div> </div> <div class="row"> <div class="form-group col-md-6"> <label>Ciudad: </label> <input type="text" ng-model="vm.subsidiary.city" class="form-control"> </div> </div> <div class="row"> <div class="form-group col-md-12"> <label>Direcci&oacute;n: </label> <input type="text" ng-model="vm.subsidiary.address1" class="form-control"> </div> </div> <div class="row"> <div class="form-group col-md-6"> <label>C&oacute;digo Facturaci&oacute;n (Ejemplo: 001): </label> <input type="text" ng-model="vm.subsidiary.threeCode" class="form-control"> </div> </div> </div> <div class="modal-footer"> <button type="button" class="btn btn-primary" ng-click="vm.saveSubsidiary()" data-dismiss="modal"> Guardar </button> <button type="button" class="btn btn-success" ng-click="vm.cancelSubisdiary()" data-dismiss="modal"> Cancelar </button> </div> </div> </div> </div> <div id="modalEliminar" class="modal fade" role="dialog"> <div class="modal-dialog"> <div class="modal-content"> <div class="modal-header"> <button type="button" class="close" data-dismiss="modal" ng-click="vm.project=undefined">&times;</button> <h4 class="modal-title">Advertencia</h4> </div> <div class="modal-body"> <div class="row"> <div class="col-md-12"> Esta seguro que desea Eliminar el Proyecto {{vm.project.name}} con identificacion: {{vm.project.cedula}} / {{vm.project.ruc}} </div> </div> </div> <div class="modal-footer"> <button type="button" class="btn btn-primary" ng-click="vm.remove()" data-dismiss="modal"> Eliminar </button> </div> </div> </div> </div> <div id="modalEliminarSubsidiary" class="modal fade" role="dialog"> <div class="modal-dialog"> <div class="modal-content"> <div class="modal-header"> <button type="button" class="close" data-dismiss="modal" ng-click="vm.project=undefined">&times;</button> <h4 class="modal-title">Advertencia</h4> </div> <div class="modal-body"> <div class="row"> <div class="col-md-12"> Esta seguro que desea Eliminar la Sucursal {{vm.subsidiary.name}} con c&oacute;digo: {{vm.subsidiary.threeCode}} </div> </div> </div> <div class="modal-footer"> <button type="button" class="btn btn-primary" ng-click="vm.removeSubsidiary()" data-dismiss="modal"> Eliminar </button> </div> </div> </div> </div>'),a.put("views/users/edit.tpl.html",'<div style="width: 100%;height: 100%;top: 0px;left: 0px;position: fixed;display: block; z-index: 99; background: rgba(255, 255, 255, 0.3)" ng-show="vm.loading"> <div style="position: absolute;top: 15%;z-index: 100; width: 100%; text-align: center"> <div class="sk-circle"> <div class="sk-circle1 sk-child"></div> <div class="sk-circle2 sk-child"></div> <div class="sk-circle3 sk-child"></div> <div class="sk-circle4 sk-child"></div> <div class="sk-circle5 sk-child"></div> <div class="sk-circle6 sk-child"></div> <div class="sk-circle7 sk-child"></div> <div class="sk-circle8 sk-child"></div> <div class="sk-circle9 sk-child"></div> <div class="sk-circle10 sk-child"></div> <div class="sk-circle11 sk-child"></div> <div class="sk-circle12 sk-child"></div> </div> </div> </div> <div class="panel panel-default"> <div class="panel-body"> <div class="row" ng-show="vm.error !== undefined"> <div class="form-group col-md-12"> <div class="alert alert-danger">{{vm.error}}</div> </div> </div> <div class="row" ng-show="vm.success !== undefined"> <div class="form-group col-md-12"> <div class="alert alert-success">{{vm.success}}</div> </div> </div> <div class="row"> <div class="form-group col-md-6"> <label>Nombre *: </label> <input type="text" ng-model="vm.userIntegridad.firstName" class="form-control"> </div> <div class="form-group col-md-6"> <label>Apellido *: </label> <input type="text" ng-model="vm.userIntegridad.lastName" class="form-control"> </div> </div> <div class="row"> <div class="form-group col-md-6"> <label>Tel&eacute;fono: (incluir c&oacute;digo de provincia ej: 02) </label> <input type="text" onkeypress="return ((event.which >= 48 && event.which <= 57) || (event.keyCode == 9 || event.keyCode == 8))" ng-model="vm.userIntegridad.phone" class="form-control" maxlength="9"> </div> <div class="form-group col-md-6"> <label>Tel&eacute;fono celular: </label> <input type="text" onkeypress="return ((event.which >= 48 && event.which <= 57) || (event.keyCode == 9 || event.keyCode == 8))" ng-model="vm.userIntegridad.celPhone" class="form-control" maxlength="10"> </div> </div> <div class="row"> <div class="form-group col-md-6"> <label>Fecha de Nacimiento</label> <div class="input-group date" id="pickerBirthday"> <input type="text" class="form-control input-group-addon"> <span class="input-group-addon"><span class="glyphicon glyphicon-calendar"></span> </div> <script>var defaultDate = new Date();\n          $(\'#pickerBirthday\').datetimepicker({\n            format: "DD/MM/YY",\n            defaultDate: defaultDate\n          });</script> </div> </div> <div class="row"> <div class="form-group col-md-6"> <label>C&eacute;dula *: </label> <input type="text" onkeypress="return ((event.which >= 48 && event.which <= 57) || (event.keyCode == 9 || event.keyCode == 8))" ng-model="vm.userIntegridad.cedula" class="form-control" maxlength="10"> </div> <div class="form-group col-md-6"> <label>Ruc *: </label> <input type="text" onkeypress="return ((event.which >= 48 && event.which <= 57) || (event.keyCode == 9 || event.keyCode == 8))" ng-model="vm.userIntegridad.ruc" class="form-control" maxlength="13"> </div> </div> <div class="row"> <div class="form-group col-md-12"> <label>Direcci&oacute;n: </label> <input type="text" ng-model="vm.userIntegridad.address1" class="form-control"> </div> </div> <!-- <div class="row">\n      <div class="form-group col-md-12">\n        <label>Intersecci&oacute;n: </label>\n        <input type="text" ng-model="vm.userIntegridad.address2" class="form-control">\n      </div>\n    </div> --> <div class="row"> <div class="form-group col-md-12"> <label>E-mail *: </label> <input type="text" ng-model="vm.userIntegridad.email" class="form-control"> </div> </div> <div class="row"> <div class="form-group col-md-12"> <label for="password">Cambiar Password&nbsp;</label> <input type="checkbox" id="changePassword" ng-model="vm.changePassword"> </div> </div> <div class="row" ng-show="vm.changePassword"> <div class="form-group col-md-6"> <label>Nuevo Password</label> <input type="password" class="form-control" id="password" ng-model="vm.newPass" ng-required="vm.changePassword"> </div> <div class="form-group col-md-6"> <label>Confirmar nuevo Password</label> <input type="password" class="form-control" id="passwordConfirmation" ng-model="vm.passConfirmation" ng-change="vm.validatePassword()" ng-required="vm.changePassword"> </div> </div> <div class="row" ng-show="vm.passwordNotMatch"> <div class="form-group col-md-12"> <div class="alert alert-danger">El nuevo password no coincide con la confirmacion</div> </div> </div> </div> <div class="panel-footer"> <button type="button" class="btn btn-primary" ng-click="vm.editUser()" ng-disabled="vm.userIntegridad.email === undefined || vm.passwordNotMatch"> Editar </button> <button type="button" class="btn btn-success" ng-click="vm.cancel()"> Cancelar </button> </div> </div>'),a.put("views/users/users.tpl.html",'<div style="width: 100%;height: 100%;top: 0px;left: 0px;position: fixed;display: block; z-index: 99; background: rgba(255, 255, 255, 0.3)" ng-show="vm.loading"> <div style="position: absolute;top: 15%;z-index: 100; width: 100%; text-align: center"> <div class="sk-circle"> <div class="sk-circle1 sk-child"></div> <div class="sk-circle2 sk-child"></div> <div class="sk-circle3 sk-child"></div> <div class="sk-circle4 sk-child"></div> <div class="sk-circle5 sk-child"></div> <div class="sk-circle6 sk-child"></div> <div class="sk-circle7 sk-child"></div> <div class="sk-circle8 sk-child"></div> <div class="sk-circle9 sk-child"></div> <div class="sk-circle10 sk-child"></div> <div class="sk-circle11 sk-child"></div> <div class="sk-circle12 sk-child"></div> </div> </div> </div> <div class="header"> <h4> Usuarios </h4> </div> <div class="row" ng-show="vm.error !== undefined"> <div class="form-group col-md-12"> <div class="alert alert-danger">{{vm.error}}</div> </div> </div> <div class="row" ng-show="vm.success !== undefined"> <div class="form-group col-md-12"> <div class="alert alert-success">{{vm.success}}</div> </div> </div> <div ng-show="vm.userIntegridad === undefined"> <input ng-model="searchText" class="form-control" placeholder="Buscar"> <table class="table table-striped"> <thead> <tr> <th> Nombre </th> <th> Apellido </th> <th> Ruc </th> <th> C&eacute;dula </th> <th> Tipo </th> <th> <button type="button" class="btn btn-primary" ng-click="vm.userCreate()"> Crear </button> </th> </tr> </thead> <tbody> <tr ng-show="vm.clientList == 0"> <td colspan="4"> No hay usuarios ingresados </td> </tr> <tr ng-repeat="userEdit in vm.userList | orderBy:firstName | filter:searchText"> <td>{{ userEdit.firstName }}</td> <td>{{ userEdit.lastName }}</td> <td>{{ userEdit.ruc }}</td> <td>{{ userEdit.cedula }}</td> <td>{{ userEdit.userType.name }}</td> <td> <button type="button" class="btn btn-primary" ng-click="vm.userEdit(userEdit)"> Editar </button> <button type="button" class="btn btn-primary" ng-click="vm.userEdit=userEdits" data-toggle="modal" data-target="#modalEliminar"> Eliminar </button> </td> </tr> </tbody> </table> </div> <div ng-show="vm.userIntegridad"> <div class="panel panel-default"> <div class="panel-body"> <div class="row"> <div class="form-group col-md-6"> <label>Proyecto *: </label> <select ng-options="project as project.name for project in vm.projectList  | orderBy:\'name\'  track by project.id" ng-change="vm.getSubsidiaries()" ng-model="vm.project" class="form-control"> </select> </div> <div class="form-group col-md-6"> <label>Surcursal *: </label> <select ng-options="sub as sub.name for sub in vm.subsidiaryList  | orderBy:\'name\' track by sub.id" ng-model="vm.userIntegridad.subsidiary" class="form-control"> </select> </div> </div> <div class="row"> <div class="form-group col-md-12"> <label>Tipo de Usuario *: </label> <select ng-options="userType as userType.name for userType in vm.userTypes  | orderBy:\'name\' track by id" ng-model="vm.userIntegridad.userType" class="form-control"> </select> </div> </div> <div class="row"> <div class="form-group col-md-6"> <label>Nombre *: </label> <input type="text" ng-model="vm.userIntegridad.firstName" class="form-control"> </div> <div class="form-group col-md-6"> <label>Apellido *: </label> <input type="text" ng-model="vm.userIntegridad.lastName" class="form-control"> </div> </div> <div class="row"> <div class="form-group col-md-6"> <label>Tel&eacute;fono: (incluir c&oacute;digo de provincia ej: 02) </label> <input type="text" onkeypress="return ((event.which >= 48 && event.which <= 57) || (event.keyCode == 9 || event.keyCode == 8))" ng-model="vm.userIntegridad.phone" class="form-control" maxlength="9"> </div> <div class="form-group col-md-6"> <label>Tel&eacute;fono celular: </label> <input type="text" onkeypress="return ((event.which >= 48 && event.which <= 57) || (event.keyCode == 9 || event.keyCode == 8))" ng-model="vm.userIntegridad.celPhone" class="form-control" maxlength="10"> </div> </div> <div class="row"> <div class="form-group col-md-6"> <label>Fecha de Nacimiento</label> <div class="input-group date" id="pickerBirthday"> <input type="text" class="form-control input-group-addon"> <span class="input-group-addon"><span class="glyphicon glyphicon-calendar"></span> </div> <script>var defaultDate = new Date();\n            $(\'#pickerBirthday\').datetimepicker({\n              format: "DD/MM/YY",\n              defaultDate: defaultDate\n            });</script> </div> </div> <div class="row"> <div class="form-group col-md-6"> <label>Tipo de Identificacion: </label> <select ng-options="item for item in [\'Cedula\', \'Ruc\']" ng-model="vm.typeId" class="form-control"></select> </div> <div class="form-group col-md-6" ng-show="vm.typeId === \'Cedula\'"> <label>C&eacute;dula *: </label> <input type="text" onkeypress="return ((event.which >= 48 && event.which <= 57) || (event.keyCode == 9 || event.keyCode == 8))" ng-model="vm.userIntegridad.cedula" class="form-control" maxlength="10"> </div> <div class="form-group col-md-6" ng-show="vm.typeId === \'Ruc\'"> <label>Ruc *: </label> <input type="text" onkeypress="return ((event.which >= 48 && event.which <= 57) || (event.keyCode == 9 || event.keyCode == 8))" ng-model="vm.userIntegridad.ruc" class="form-control" maxlength="13"> </div> </div> <div class="row"> <div class="form-group col-md-12"> <label>Direcci&oacute;n: </label> <input type="text" ng-model="vm.userIntegridad.address1" class="form-control"> </div> </div> <!-- <div class="row">\n        <div class="form-group col-md-12">\n          <label>Intersecci&oacute;n: </label>\n          <input type="text" ng-model="vm.userIntegridad.address2" class="form-control">\n        </div>\n      </div> --> <div class="row"> <div class="form-group col-md-12"> <label>E-mail *: </label> <input type="text" ng-model="vm.userIntegridad.email" class="form-control"> </div> </div> </div> <div class="panel-footer"> <button type="button" class="btn btn-primary" ng-click="vm.register()" ng-disabled="vm.userIntegridad.email === undefined"> Guardar </button> <button type="button" class="btn btn-success" ng-click="vm.cancel()"> Cancelar </button> </div> </div> </div>')}]);